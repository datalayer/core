/*
 * Copyright (c) 2023-2025 Datalayer, Inc.
 * Distributed under the terms of the Modified BSD License.
 */

/* Import styles from dependencies */

/* Datalayer Color Palette CSS Variables */
:root {
  /* Primary Datalayer Colors */
  --datalayer-green-light: #2ecc71; /* RGB: 46, 204, 113 */
  --datalayer-green-main: #1abc9c; /* RGB: 26, 188, 156 */
  --datalayer-green-dark: #16a085; /* RGB: 22, 160, 133 */
  --datalayer-green-accessible-dark: #117964; /* High contrast green for focus states */
  --datalayer-gray: #59595c; /* RGB: 89, 89, 92 */
  --datalayer-black: #000000; /* RGB: 0, 0, 0 */
  --datalayer-white: #ffffff; /* RGB: 255, 255, 255 */

  /* Semantic Color Mappings */
  --color-primary: var(--datalayer-green-main);
  --color-primary-hover: var(--datalayer-green-dark);
  --color-primary-light: var(--datalayer-green-light);
  --color-primary-focus: var(--datalayer-green-accessible-dark);
  --color-success: var(--datalayer-green-main);
  --color-text-primary: var(--datalayer-black);
  --color-text-secondary: var(--datalayer-gray);
  --color-text-inverse: var(--datalayer-white);
  --color-bg-primary: var(--datalayer-white);
  --color-bg-secondary: #f8f9fa;

  /* Override Primer defaults with Datalayer colors */
  --color-canvas-default: var(--datalayer-white);
  --color-fg-default: var(--datalayer-black);
  --color-fg-muted: var(--datalayer-gray);
  --color-accent-fg: var(--datalayer-green-main);
  --color-success-fg: var(--datalayer-green-main);
  --color-btn-primary-bg: var(--datalayer-green-main);
  --color-btn-primary-hover-bg: var(--datalayer-green-dark);

  /* Override ALL Primer focus-related colors to use green */
  --color-accent-emphasis: var(--datalayer-green-accessible-dark);
  --color-border-accent-emphasis: var(--datalayer-green-accessible-dark);
  --color-focus: var(--datalayer-green-accessible-dark);
  --color-accent-fg: var(--datalayer-green-accessible-dark);
  --color-border-info: var(--datalayer-green-accessible-dark);
  --color-primer-border-active: var(--datalayer-green-accessible-dark);
  --color-state-focus-border: var(--datalayer-green-accessible-dark);
  --color-state-focus-shadow: 0 0 0 3px rgba(17, 121, 100, 0.1);

  /* Override blue colors that might be used for focus */
  --color-border-info: var(--datalayer-green-accessible-dark);
  --color-accent-emphasis: var(--datalayer-green-accessible-dark);
  --color-accent-muted: rgba(17, 121, 100, 0.1);
  --color-accent-subtle: rgba(17, 121, 100, 0.05);
  --color-done-emphasis: var(--datalayer-green-accessible-dark);
  --color-done-fg: var(--datalayer-green-accessible-dark);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family:
    -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu',
    'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: var(--color-canvas-default);
  color: var(--color-fg-default);
}

#root {
  width: 100vw;
  height: 100vh;
  overflow: hidden;
}

/* Jupyter notebook specific styles */
.jp-Notebook {
  height: 100%;
}

/* Scrollbar styles with Datalayer colors */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--color-bg-secondary);
}

::-webkit-scrollbar-thumb {
  background: var(--datalayer-gray);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--datalayer-green-main);
}

/* Global Focus Styles - Using Datalayer Green for Tab Navigation */
/* Remove ALL default browser/webkit focus styles */
*,
*:focus,
*:focus-visible,
*:focus-within {
  outline: none !important;
  outline-width: 0 !important;
  outline-style: none !important;
}

*:focus-visible:not(.ActionList-item) {
  outline: 2px solid var(--datalayer-green-accessible-dark) !important;
  outline-offset: 2px !important;
  border-radius: 4px;
}

/* Remove webkit/safari default blue outline */
*::-webkit-focus-ring-color {
  outline-color: transparent !important;
}

/* Disable webkit focus ring on ActionList items specifically */
.ActionList-item::-webkit-focus-ring-color {
  outline-color: transparent !important;
}

.ActionList-item {
  -webkit-tap-highlight-color: transparent !important;
  -webkit-focus-ring-color: transparent !important;
}

/* Force Primer theme to use green for ActionList focus */
[data-color-mode] {
  --color-border-accent-emphasis: var(
    --datalayer-green-accessible-dark
  ) !important;
}

/* Override Primer's blue with green at theme level */
.ActionList {
  --color-border-accent-emphasis: var(
    --datalayer-green-accessible-dark
  ) !important;
}

/* Navigation tabs focus styles */
button:focus-visible,
a:focus-visible,
[role='button']:focus-visible,
[role='tab']:focus-visible,
[tabindex]:focus-visible {
  outline: 2px solid var(--datalayer-green-accessible-dark) !important;
  outline-offset: 2px !important;
  border-radius: 4px;
}

/* Override ActionList focus completely - single green border only */
.ActionList-item {
  position: relative !important;
}

/* Maximum specificity to override Primer's focus styles */
body .ActionList .ActionList-item:focus,
body .ActionList .ActionList-item:focus-visible,
body .ActionList .ActionList-item:focus:hover,
body .ActionList .ActionList-item:focus-visible:hover,
body .ActionList .ActionList-item:focus:not(:hover),
body .ActionList .ActionList-item:focus-visible:not(:hover),
.ActionList-item:focus,
.ActionList-item:focus-visible,
.ActionList-item:focus:hover,
.ActionList-item:focus-visible:hover,
.ActionList-item:focus:not(:hover),
.ActionList-item:focus-visible:not(:hover) {
  /* Remove ALL focus styles */
  outline: 0 !important;
  outline-width: 0 !important;
  outline-style: none !important;
  outline-color: transparent !important;
  outline-offset: 0 !important;

  /* Use only green inset shadow */
  box-shadow: inset 0 0 0 2px var(--datalayer-green-accessible-dark) !important;
  -webkit-box-shadow: inset 0 0 0 2px var(--datalayer-green-accessible-dark) !important;
  -moz-box-shadow: inset 0 0 0 2px var(--datalayer-green-accessible-dark) !important;

  /* Ensure no borders */
  border: none !important;
  border-color: transparent !important;
}

/* Remove any pseudo-element focus indicators */
.ActionList-item::after,
.ActionList-item::before,
.ActionList-item:focus::after,
.ActionList-item:focus::before,
.ActionList-item:focus-visible::after,
.ActionList-item:focus-visible::before {
  display: none !important;
  content: none !important;
  box-shadow: none !important;
  outline: none !important;
}

/* Ensure no blue color leaks through */
.ActionList-item:focus-within {
  outline: none !important;
  box-shadow: inset 0 0 0 2px var(--datalayer-green-accessible-dark) !important;
}

/* Input and form control focus styles */
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  outline: 2px solid var(--datalayer-green-accessible-dark) !important;
  outline-offset: 0 !important;
  border-color: var(--datalayer-green-accessible-dark) !important;
}

/* IconButton focus styles */
.IconButton:focus-visible {
  outline: 2px solid var(--datalayer-green-accessible-dark) !important;
  outline-offset: 2px !important;
  border-radius: 4px;
}

/* Select dropdown focus styles - More aggressive targeting */
select:focus,
select:focus-visible,
.Select:focus,
.Select:focus-visible,
[role='combobox']:focus,
[role='combobox']:focus-visible,
.FormControl-select:focus,
.FormControl-select:focus-visible,
.FormControl-select:focus-within {
  outline: 2px solid var(--datalayer-green-accessible-dark) !important;
  outline-offset: 0 !important;
  border-color: var(--datalayer-green-accessible-dark) !important;
  box-shadow: 0 0 0 3px rgba(17, 121, 100, 0.1) !important;
}

/* Override Primer's internal select styling */
.FormControl-select {
  --color-border-accent-emphasis: var(
    --datalayer-green-accessible-dark
  ) !important;
  --color-accent-fg: var(--datalayer-green-accessible-dark) !important;
}

/* Target the select when it has focus */
.FormControl-select:has(:focus),
.FormControl-select:has(:focus-visible) {
  border-color: var(--datalayer-green-accessible-dark) !important;
  box-shadow: 0 0 0 3px rgba(17, 121, 100, 0.1) !important;
}

/* Environments page scrollbar - always show scrollbar space */
.environments-page {
  overflow-y: scroll !important; /* Always show scrollbar */
}

/* Fix Header.Link text colors - prevent white text on light background */
.Header-link {
  color: var(--datalayer-black) !important;
}

.Header-link:hover {
  color: var(--datalayer-green-accessible-dark) !important;
}

/* Ensure pressed state stays green, not black */
.Header-link:active,
.Header-link:active:hover,
.Header-link:active:focus {
  color: var(--datalayer-green-accessible-dark) !important;
}

.Header-link:focus,
.Header-link:visited {
  color: var(--datalayer-green-accessible-dark) !important;
}

/* Ensure active navigation items stay green */
.Header-item .Header-link[aria-current='page'] {
  color: var(--datalayer-green-accessible-dark) !important;
}

/* NUCLEAR OPTION: Remove ALL outlines and use only box-shadow for ActionList */
li[role='none'] > *:focus,
li[role='none'] > *:focus-visible,
li[role='none'] > *:focus-within,
ul > li:focus,
ul > li:focus-visible,
ul > li:focus-within,
.ActionList li:focus,
.ActionList li:focus-visible,
.ActionList li:focus-within {
  outline: 0 !important;
  outline: none !important;
  outline-width: 0 !important;
  outline-color: transparent !important;
  border: 0 !important;
  box-shadow: inset 0 0 0 2px var(--datalayer-green-accessible-dark) !important;
}
