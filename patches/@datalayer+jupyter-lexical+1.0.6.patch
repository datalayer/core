diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/DropDown.js b/node_modules/@datalayer/jupyter-lexical/lib/components/DropDown.js
index 746ce27..2b0d847 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/components/DropDown.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/DropDown.js
@@ -23,7 +23,7 @@ export function DropDownItems({ children, dropDownRef, onClose, }) {
     const [items, setItems] = useState();
     const [highlightedItem, setHighlightedItem] = useState();
     const registerItem = useCallback((itemRef) => {
-        setItems((prev) => (prev ? [...prev, itemRef] : [itemRef]));
+        setItems(prev => (prev ? [...prev, itemRef] : [itemRef]));
     }, [setItems]);
     const handleKeyDown = (event) => {
         if (!items) {
@@ -37,7 +37,7 @@ export function DropDownItems({ children, dropDownRef, onClose, }) {
             onClose();
         }
         else if (key === 'ArrowUp') {
-            setHighlightedItem((prev) => {
+            setHighlightedItem(prev => {
                 if (!prev) {
                     return items[0];
                 }
@@ -46,7 +46,7 @@ export function DropDownItems({ children, dropDownRef, onClose, }) {
             });
         }
         else if (key === 'ArrowDown') {
-            setHighlightedItem((prev) => {
+            setHighlightedItem(prev => {
                 if (!prev) {
                     return items[0];
                 }
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/components/DropDown.js.map b/node_modules/@datalayer/jupyter-lexical/lib/components/DropDown.js.map
index a0ef46e..bd38510 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/components/DropDown.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/components/DropDown.js.map
@@ -1 +1 @@
-{"version":3,"file":"DropDown.js","sourceRoot":"","sources":["../../src/components/DropDown.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"DropDown.js","sourceRoot":"","sources":["../../src/components/DropDown.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/LexicalConfigContext.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/context/LexicalConfigContext.d.ts
new file mode 100644
index 0000000..d691a2a
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/LexicalConfigContext.d.ts
@@ -0,0 +1,31 @@
+/**
+ * Configuration passed down to Lexical plugins
+ */
+export interface LexicalConfig {
+    /** Unique identifier for this Lexical document */
+    lexicalId: string;
+    /** Service manager for kernel operations (optional) */
+    serviceManager?: any;
+}
+/**
+ * Hook to access Lexical configuration
+ *
+ * @throws {Error} If used outside of LexicalConfigProvider
+ */
+export declare function useLexicalConfig(): LexicalConfig;
+/**
+ * Provider component for Lexical configuration
+ *
+ * @example
+ * ```tsx
+ * <LexicalConfigProvider lexicalId="doc-123" serviceManager={sm}>
+ *   <Editor />
+ * </LexicalConfigProvider>
+ * ```
+ */
+export interface LexicalConfigProviderProps {
+    lexicalId: string;
+    serviceManager?: any;
+    children: React.ReactNode;
+}
+export declare function LexicalConfigProvider({ lexicalId, serviceManager, children, }: LexicalConfigProviderProps): import("react/jsx-runtime").JSX.Element;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/LexicalConfigContext.js b/node_modules/@datalayer/jupyter-lexical/lib/context/LexicalConfigContext.js
new file mode 100644
index 0000000..19d957b
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/LexicalConfigContext.js
@@ -0,0 +1,33 @@
+import { jsx as _jsx } from "react/jsx-runtime";
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Context for Lexical configuration (lexicalId).
+ * Provides the lexicalId to child components and plugins.
+ *
+ * @module context/LexicalConfigContext
+ */
+import { createContext, useContext } from 'react';
+/**
+ * Context for Lexical configuration
+ */
+const LexicalConfigContext = createContext(undefined);
+/**
+ * Hook to access Lexical configuration
+ *
+ * @throws {Error} If used outside of LexicalConfigProvider
+ */
+export function useLexicalConfig() {
+    const config = useContext(LexicalConfigContext);
+    if (!config) {
+        throw new Error('useLexicalConfig must be used within a LexicalConfigProvider');
+    }
+    return config;
+}
+export function LexicalConfigProvider({ lexicalId, serviceManager, children, }) {
+    return (_jsx(LexicalConfigContext.Provider, { value: { lexicalId, serviceManager }, children: children }));
+}
+//# sourceMappingURL=LexicalConfigContext.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/LexicalConfigContext.js.map b/node_modules/@datalayer/jupyter-lexical/lib/context/LexicalConfigContext.js.map
new file mode 100644
index 0000000..cacf3bd
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/LexicalConfigContext.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"LexicalConfigContext.js","sourceRoot":"","sources":["../../src/context/LexicalConfigContext.tsx"],"names":[],"mappings":";AAAA;;;;GAIG;AAEH;;;;;GAKG;AAEH,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,MAAM,OAAO,CAAC;AAYlD;;GAEG;AACH,MAAM,oBAAoB,GAAG,aAAa,CACxC,SAAS,CACV,CAAC;AAEF;;;;GAIG;AACH,MAAM,UAAU,gBAAgB;IAC9B,MAAM,MAAM,GAAG,UAAU,CAAC,oBAAoB,CAAC,CAAC;IAChD,IAAI,CAAC,MAAM,EAAE,CAAC;QACZ,MAAM,IAAI,KAAK,CACb,8DAA8D,CAC/D,CAAC;IACJ,CAAC;IACD,OAAO,MAAM,CAAC;AAChB,CAAC;AAkBD,MAAM,UAAU,qBAAqB,CAAC,EACpC,SAAS,EACT,cAAc,EACd,QAAQ,GACmB;IAC3B,OAAO,CACL,KAAC,oBAAoB,CAAC,QAAQ,IAAC,KAAK,EAAE,EAAE,SAAS,EAAE,cAAc,EAAE,YAChE,QAAQ,GACqB,CACjC,CAAC;AACJ,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/SettingsContext.js b/node_modules/@datalayer/jupyter-lexical/lib/context/SettingsContext.js
index e18c116..0be9401 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/context/SettingsContext.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/SettingsContext.js
@@ -10,7 +10,7 @@ const Context = createContext({
 export const SettingsContext = ({ children, }) => {
     const [settings, setSettings] = useState(INITIAL_SETTINGS);
     const setOption = useCallback((setting, value) => {
-        setSettings((options) => ({
+        setSettings(options => ({
             ...options,
             [setting]: value,
         }));
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/SettingsContext.js.map b/node_modules/@datalayer/jupyter-lexical/lib/context/SettingsContext.js.map
index d06e47c..07ef220 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/context/SettingsContext.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/SettingsContext.js.map
@@ -1 +1 @@
-{"version":3,"file":"SettingsContext.js","sourceRoot":"","sources":["../../src/context/SettingsContext.tsx"],"names":[],"mappings":";AAkBA,OAAO,EACL,aAAa,EAEb,WAAW,EACX,UAAU,EACV,OAAO,EACP,QAAQ,GACT,MAAM,OAAO,CAAC;AAEf,OAAO,EAAC,gBAAgB,EAAE,gBAAgB,EAAC,MAAM,gBAAgB,CAAC;AAOlE,MAAM,OAAO,GAAwC,aAAa,CAAC;IACjE,SAAS,EAAE,CAAC,IAAiB,EAAE,KAAc,EAAE,EAAE;QAC/C,OAAO;IACT,CAAC;IACD,QAAQ,EAAE,gBAAgB;CAC3B,CAAC,CAAC;AAEH,MAAM,CAAC,MAAM,eAAe,GAAG,CAAC,EAC9B,QAAQ,GAGT,EAAe,EAAE;IAChB,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAG,QAAQ,CAAC,gBAAgB,CAAC,CAAC;IAE3D,MAAM,SAAS,GAAG,WAAW,CAAC,CAAC,OAAoB,EAAE,KAAc,EAAE,EAAE;QACrE,WAAW,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;YACxB,GAAG,OAAO;YACV,CAAC,OAAO,CAAC,EAAE,KAAK;SACjB,CAAC,CAAC,CAAC;QACJ,WAAW,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;IAC9B,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,MAAM,YAAY,GAAG,OAAO,CAAC,GAAG,EAAE;QAChC,OAAO,EAAC,SAAS,EAAE,QAAQ,EAAC,CAAC;IAC/B,CAAC,EAAE,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,CAAC;IAE1B,OAAO,KAAC,OAAO,CAAC,QAAQ,IAAC,KAAK,EAAE,YAAY,YAAG,QAAQ,GAAoB,CAAC;AAC9E,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,WAAW,GAAG,GAAyB,EAAE;IACpD,OAAO,UAAU,CAAC,OAAO,CAAC,CAAC;AAC7B,CAAC,CAAC;AAEF,SAAS,WAAW,CAAC,KAAkB,EAAE,KAAqB;IAC5D,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;IAC1C,MAAM,MAAM,GAAG,IAAI,eAAe,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAC/C,IAAI,KAAK,KAAK,gBAAgB,CAAC,KAAK,CAAC,EAAE,CAAC;QACtC,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;IACnC,CAAC;SAAM,CAAC;QACN,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IACvB,CAAC;IACD,GAAG,CAAC,MAAM,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;IAC/B,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,EAAE,EAAE,EAAE,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC;AACrD,CAAC"}
\ No newline at end of file
+{"version":3,"file":"SettingsContext.js","sourceRoot":"","sources":["../../src/context/SettingsContext.tsx"],"names":[],"mappings":";AAkBA,OAAO,EACL,aAAa,EAEb,WAAW,EACX,UAAU,EACV,OAAO,EACP,QAAQ,GACT,MAAM,OAAO,CAAC;AAEf,OAAO,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,MAAM,gBAAgB,CAAC;AAOpE,MAAM,OAAO,GAAwC,aAAa,CAAC;IACjE,SAAS,EAAE,CAAC,IAAiB,EAAE,KAAc,EAAE,EAAE;QAC/C,OAAO;IACT,CAAC;IACD,QAAQ,EAAE,gBAAgB;CAC3B,CAAC,CAAC;AAEH,MAAM,CAAC,MAAM,eAAe,GAAG,CAAC,EAC9B,QAAQ,GAGT,EAAe,EAAE;IAChB,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAG,QAAQ,CAAC,gBAAgB,CAAC,CAAC;IAE3D,MAAM,SAAS,GAAG,WAAW,CAAC,CAAC,OAAoB,EAAE,KAAc,EAAE,EAAE;QACrE,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YACtB,GAAG,OAAO;YACV,CAAC,OAAO,CAAC,EAAE,KAAK;SACjB,CAAC,CAAC,CAAC;QACJ,WAAW,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;IAC9B,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,MAAM,YAAY,GAAG,OAAO,CAAC,GAAG,EAAE;QAChC,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,CAAC;IACjC,CAAC,EAAE,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,CAAC;IAE1B,OAAO,KAAC,OAAO,CAAC,QAAQ,IAAC,KAAK,EAAE,YAAY,YAAG,QAAQ,GAAoB,CAAC;AAC9E,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,WAAW,GAAG,GAAyB,EAAE;IACpD,OAAO,UAAU,CAAC,OAAO,CAAC,CAAC;AAC7B,CAAC,CAAC;AAEF,SAAS,WAAW,CAAC,KAAkB,EAAE,KAAqB;IAC5D,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;IAC1C,MAAM,MAAM,GAAG,IAAI,eAAe,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAC/C,IAAI,KAAK,KAAK,gBAAgB,CAAC,KAAK,CAAC,EAAE,CAAC;QACtC,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;IACnC,CAAC;SAAM,CAAC;QACN,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IACvB,CAAC;IACD,GAAG,CAAC,MAAM,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;IAC/B,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,EAAE,EAAE,EAAE,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC;AACrD,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/context/index.d.ts
index 75b6ee0..2450faa 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/context/index.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/index.d.ts
@@ -1,3 +1,4 @@
+export * from './LexicalConfigContext';
 export * from './LexicalContext';
 export * from './SettingsContext';
 export * from './ToolbarContext';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/index.js b/node_modules/@datalayer/jupyter-lexical/lib/context/index.js
index 2f8644b..080a8dd 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/context/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/index.js
@@ -3,6 +3,7 @@
  *
  * MIT License
  */
+export * from './LexicalConfigContext';
 export * from './LexicalContext';
 export * from './SettingsContext';
 export * from './ToolbarContext';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/context/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/context/index.js.map
index a04ecdb..53242ab 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/context/index.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/context/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/context/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,cAAc,kBAAkB,CAAC;AACjC,cAAc,mBAAmB,CAAC;AAClC,cAAc,kBAAkB,CAAC"}
\ No newline at end of file
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/context/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,cAAc,wBAAwB,CAAC;AACvC,cAAc,kBAAkB,CAAC;AACjC,cAAc,mBAAmB,CAAC;AAClC,cAAc,kBAAkB,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/convertToMarkdown.js.map b/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/convertToMarkdown.js.map
index 3e1b40c..29a606a 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/convertToMarkdown.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/convert/markdown/convertToMarkdown.js.map
@@ -1 +1 @@
-{"version":3,"file":"convertToMarkdown.js","sourceRoot":"","sources":["../../../src/convert/markdown/convertToMarkdown.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"convertToMarkdown.js","sourceRoot":"","sources":["../../../src/convert/markdown/convertToMarkdown.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/editor/Editor.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/editor/Editor.d.ts
index 56b7a51..a7ebacf 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/editor/Editor.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/editor/Editor.d.ts
@@ -1,7 +1,10 @@
 import { INotebookContent } from '@jupyterlab/nbformat';
 import { OnSessionConnection } from '@datalayer/jupyter-react';
-import './../../style/index.css';
 type Props = {
+    /** Unique identifier for this Lexical document (required for tool operations) */
+    id?: string;
+    /** Service manager for kernel operations (required when id is provided) */
+    serviceManager?: any;
     notebook?: INotebookContent;
     onSessionConnection?: OnSessionConnection;
 };
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/editor/Editor.js b/node_modules/@datalayer/jupyter-lexical/lib/editor/Editor.js
index db83071..7f3adc2 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/editor/Editor.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/editor/Editor.js
@@ -34,7 +34,8 @@ import { useLexical } from '../context';
 import { TreeViewPlugin } from '../plugins';
 import { ToolbarPlugin } from '../plugins/ToolbarPlugin';
 import { ToolbarContext } from '../context/ToolbarContext';
-import './../../style/index.css';
+import { LexicalConfigProvider } from '../context/LexicalConfigContext';
+import { LexicalStatePlugin } from '../plugins/LexicalStatePlugin';
 function Placeholder() {
     return _jsx("div", { className: "editor-placeholder", children: "Code and analyse data." });
 }
@@ -77,7 +78,7 @@ const EditorContextPlugin = () => {
     return null;
 };
 export function EditorContainer(props) {
-    const { notebook, onSessionConnection } = props;
+    const { id, notebook, onSessionConnection } = props;
     const { defaultKernel } = useJupyter();
     const [editor] = useLexicalComposerContext();
     const [activeEditor, setActiveEditor] = useState(editor);
@@ -91,10 +92,14 @@ export function EditorContainer(props) {
     function onChange(_editorState) {
         //    console.log('---', _editorState.toJSON());
     }
-    return (_jsxs("div", { className: "editor-container", children: [_jsx(ToolbarPlugin, { editor: editor, activeEditor: activeEditor, setActiveEditor: setActiveEditor, setIsLinkEditMode: setIsLinkEditMode }), _jsxs("div", { className: "editor-inner", children: [_jsx(RichTextPlugin, { contentEditable: _jsx("div", { className: "editor-scroller", children: _jsx("div", { className: "editor", ref: onRef, children: _jsx(ContentEditable, { className: "editor-input" }) }) }), placeholder: _jsx(Placeholder, {}), ErrorBoundary: LexicalErrorBoundary }), _jsx(OnChangePlugin, { onChange: onChange }), _jsx(HistoryPlugin, {}), _jsx(TreeViewPlugin, {}), _jsx(AutoFocusPlugin, {}), _jsx(TablePlugin, {}), _jsx(ListPlugin, {}), _jsx(CheckListPlugin, {}), _jsx(LinkPlugin, {}), _jsx(AutoLinkPlugin, {}), _jsx(ListMaxIndentLevelPlugin, { maxDepth: 7 }), _jsx(MarkdownPlugin, {}), _jsx(JupyterInputOutputPlugin, { kernel: defaultKernel, onSessionConnection: onSessionConnection }), _jsx(ComponentPickerMenuPlugin, { initCode: "print('\uD83E\uDE90 \u269B\uFE0F Hello Jupyter UI')", kernel: defaultKernel }), _jsx(EquationsPlugin, {}), _jsx(ImagesPlugin, {}), _jsx(HashtagPlugin, {}), _jsx(HorizontalRulePlugin, {}), _jsx(YouTubePlugin, {}), _jsx(NbformatContentPlugin, { notebook: notebook }), _jsx(CodeActionMenuPlugin, {}), _jsx(AutoEmbedPlugin, {}), _jsx(EditorContextPlugin, {}), _jsx(TableOfContentsPlugin, {}), _jsx(CommentPlugin, { providerFactory: undefined }), floatingAnchorElem && (_jsxs(_Fragment, { children: [_jsx(DraggableBlockPlugin, { anchorElem: floatingAnchorElem }), _jsx(FloatingTextFormatToolbarPlugin, { anchorElem: floatingAnchorElem })] }))] })] }));
+    return (_jsxs("div", { className: "editor-container", children: [_jsx(ToolbarPlugin, { editor: editor, activeEditor: activeEditor, setActiveEditor: setActiveEditor, setIsLinkEditMode: setIsLinkEditMode }), _jsxs("div", { className: "editor-inner", children: [_jsx(RichTextPlugin, { contentEditable: _jsx("div", { className: "editor-scroller", children: _jsx("div", { className: "editor", ref: onRef, children: _jsx(ContentEditable, { className: "editor-input" }) }) }), placeholder: _jsx(Placeholder, {}), ErrorBoundary: LexicalErrorBoundary }), _jsx(OnChangePlugin, { onChange: onChange }), _jsx(HistoryPlugin, {}), _jsx(TreeViewPlugin, {}), _jsx(AutoFocusPlugin, {}), id && _jsx(LexicalStatePlugin, {}), _jsx(TablePlugin, {}), _jsx(ListPlugin, {}), _jsx(CheckListPlugin, {}), _jsx(LinkPlugin, {}), _jsx(AutoLinkPlugin, {}), _jsx(ListMaxIndentLevelPlugin, { maxDepth: 7 }), _jsx(MarkdownPlugin, {}), _jsx(JupyterInputOutputPlugin, { kernel: defaultKernel, onSessionConnection: onSessionConnection }), _jsx(ComponentPickerMenuPlugin, { initCode: "print('\uD83E\uDE90 \u269B\uFE0F Hello Jupyter UI')", kernel: defaultKernel }), _jsx(EquationsPlugin, {}), _jsx(ImagesPlugin, {}), _jsx(HashtagPlugin, {}), _jsx(HorizontalRulePlugin, {}), _jsx(YouTubePlugin, {}), _jsx(NbformatContentPlugin, { notebook: notebook }), _jsx(CodeActionMenuPlugin, {}), _jsx(AutoEmbedPlugin, {}), _jsx(EditorContextPlugin, {}), _jsx(TableOfContentsPlugin, {}), _jsx(CommentPlugin, { providerFactory: undefined }), floatingAnchorElem && (_jsxs(_Fragment, { children: [_jsx(DraggableBlockPlugin, { anchorElem: floatingAnchorElem }), _jsx(FloatingTextFormatToolbarPlugin, { anchorElem: floatingAnchorElem })] }))] })] }));
 }
 export function Editor(props) {
-    return (_jsx(LexicalComposer, { initialConfig: initialConfig, children: _jsx(ToolbarContext, { children: _jsx("div", { className: "editor-shell", children: _jsx(EditorContainer, { ...props }) }) }) }));
+    const { id, serviceManager } = props;
+    // Wrap with LexicalConfigProvider if id is provided (for tool operations)
+    const content = (_jsx(LexicalComposer, { initialConfig: initialConfig, children: _jsx(ToolbarContext, { children: _jsx("div", { className: "editor-shell", children: _jsx(EditorContainer, { ...props }) }) }) }));
+    // Only wrap with config provider if id is provided
+    return id ? (_jsx(LexicalConfigProvider, { lexicalId: id, serviceManager: serviceManager, children: content })) : (content);
 }
 export default Editor;
 //# sourceMappingURL=Editor.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/editor/Editor.js.map b/node_modules/@datalayer/jupyter-lexical/lib/editor/Editor.js.map
index 98f0258..27e6ed2 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/editor/Editor.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/editor/Editor.js.map
@@ -1 +1 @@
-{"version":3,"file":"Editor.js","sourceRoot":"","sources":["../../src/editor/Editor.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"Editor.js","sourceRoot":"","sources":["../../src/editor/Editor.tsx"],"names":[],"mappings":";AAAA;;;;GAIG;AAEH,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,OAAO,CAAC;AAE5C,OAAO,EAAE,yBAAyB,EAAE,MAAM,uCAAuC,CAAC;AAClF,OAAO,EAAE,eAAe,EAAE,MAAM,gCAAgC,CAAC;AACjE,OAAO,EAAE,aAAa,EAAE,MAAM,qCAAqC,CAAC;AACpE,OAAO,EAAE,cAAc,EAAE,MAAM,sCAAsC,CAAC;AACtE,OAAO,EAAE,eAAe,EAAE,MAAM,uCAAuC,CAAC;AACxE,OAAO,EAAE,aAAa,EAAE,MAAM,qCAAqC,CAAC;AACpE,OAAO,EAAE,eAAe,EAAE,MAAM,uCAAuC,CAAC;AACxE,OAAO,EAAE,WAAW,EAAE,MAAM,mCAAmC,CAAC;AAChE,OAAO,EAAE,UAAU,EAAE,MAAM,kCAAkC,CAAC;AAC9D,OAAO,EAAE,UAAU,EAAE,MAAM,kCAAkC,CAAC;AAC9D,OAAO,EAAE,cAAc,EAAE,MAAM,sCAAsC,CAAC;AACtE,OAAO,EAAE,eAAe,EAAE,MAAM,uCAAuC,CAAC;AACxE,OAAO,EAAE,kBAAkB,EAAE,MAAM,0CAA0C,CAAC;AAC9E,OAAO,EAAE,oBAAoB,EAAE,MAAM,qCAAqC,CAAC;AAC3E,OAAO,EAAE,WAAW,EAAE,SAAS,EAAE,MAAM,oBAAoB,CAAC;AAC5D,OAAO,EAAE,aAAa,EAAE,SAAS,EAAE,YAAY,EAAE,MAAM,gBAAgB,CAAC;AACxE,OAAO,EAAE,YAAY,EAAE,QAAQ,EAAE,MAAM,eAAe,CAAC;AACvD,OAAO,EAAE,WAAW,EAAE,MAAM,kBAAkB,CAAC;AAC/C,OAAO,EAAE,QAAQ,EAAE,MAAM,eAAe,CAAC;AACzC,OAAO,EAAE,YAAY,EAAE,QAAQ,EAAE,MAAM,eAAe,CAAC;AACvD,OAAO,EAAE,QAAQ,EAAE,MAAM,eAAe,CAAC;AAEzC,OAAO,EAAE,UAAU,EAAE,MAAM,0BAA0B,CAAC;AACtD,OAAO,EACL,WAAW,EACX,YAAY,EACZ,SAAS,EACT,yBAAyB,EACzB,gBAAgB,EAChB,iBAAiB,EACjB,WAAW,GACZ,MAAM,UAAU,CAAC;AAClB,OAAO,EACL,eAAe,EACf,cAAc,EACd,oBAAoB,EACpB,aAAa,EACb,yBAAyB,EACzB,oBAAoB,EACpB,eAAe,EACf,+BAA+B,EAC/B,oBAAoB,EACpB,YAAY,EACZ,wBAAwB,EACxB,wBAAwB,EACxB,cAAc,EACd,qBAAqB,EACrB,qBAAqB,EACrB,aAAa,GACd,MAAM,MAAM,CAAC;AACd,OAAO,EAAE,YAAY,EAAE,MAAM,WAAW,CAAC;AACzC,OAAO,EAAE,UAAU,EAAE,MAAM,YAAY,CAAC;AACxC,OAAO,EAAE,cAAc,EAAE,MAAM,YAAY,CAAC;AAE5C,OAAO,EAAE,aAAa,EAAE,MAAM,0BAA0B,CAAC;AACzD,OAAO,EAAE,cAAc,EAAE,MAAM,2BAA2B,CAAC;AAC3D,OAAO,EAAE,qBAAqB,EAAE,MAAM,iCAAiC,CAAC;AACxE,OAAO,EAAE,kBAAkB,EAAE,MAAM,+BAA+B,CAAC;AAWnE,SAAS,WAAW;IAClB,OAAO,cAAK,SAAS,EAAC,oBAAoB,uCAA6B,CAAC;AAC1E,CAAC;AAED,MAAM,aAAa,GAAG;IACpB,SAAS,EAAE,yBAAyB;IACpC,KAAK,EAAE,YAAY;IACnB,OAAO,CAAC,KAAY;QAClB,MAAM,KAAK,CAAC;IACd,CAAC;IACD,KAAK,EAAE;QACL,YAAY;QACZ,QAAQ;QACR,WAAW;QACX,YAAY;QACZ,WAAW;QACX,WAAW;QACX,kBAAkB;QAClB,SAAS;QACT,yBAAyB;QACzB,gBAAgB;QAChB,iBAAiB;QACjB,QAAQ;QACR,YAAY;QACZ,QAAQ;QACR,QAAQ;QACR,SAAS;QACT,aAAa;QACb,SAAS;QACT,YAAY;QACZ,WAAW;KACZ;CACF,CAAC;AAEF,MAAM,mBAAmB,GAAG,GAAG,EAAE;IAC/B,MAAM,EAAE,SAAS,EAAE,GAAG,UAAU,EAAE,CAAC;IACnC,MAAM,CAAC,MAAM,CAAC,GAAG,yBAAyB,EAAE,CAAC;IAC7C,SAAS,CAAC,GAAG,EAAE;QACb,SAAS,CAAC,MAAM,CAAC,CAAC;QAClB,wCAAwC;IAC1C,CAAC,EAAE,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC,CAAC;IACxB,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AAEF,MAAM,UAAU,eAAe,CAAC,KAAY;IAC1C,MAAM,EAAE,EAAE,EAAE,QAAQ,EAAE,mBAAmB,EAAE,GAAG,KAAK,CAAC;IACpD,MAAM,EAAE,aAAa,EAAE,GAAG,UAAU,EAAE,CAAC;IACvC,MAAM,CAAC,MAAM,CAAC,GAAG,yBAAyB,EAAE,CAAC;IAC7C,MAAM,CAAC,YAAY,EAAE,eAAe,CAAC,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC;IACzD,MAAM,CAAC,CAAC,EAAE,iBAAiB,CAAC,GAAG,QAAQ,CAAU,KAAK,CAAC,CAAC;IACxD,MAAM,CAAC,kBAAkB,EAAE,qBAAqB,CAAC,GAC/C,QAAQ,CAAwB,IAAI,CAAC,CAAC;IAExC,MAAM,KAAK,GAAG,CAAC,mBAAmC,EAAE,EAAE;QACpD,IAAI,mBAAmB,KAAK,IAAI,EAAE,CAAC;YACjC,qBAAqB,CAAC,mBAAmB,CAAC,CAAC;QAC7C,CAAC;IACH,CAAC,CAAC;IAEF,SAAS,QAAQ,CAAC,YAAyB;QACzC,gDAAgD;IAClD,CAAC;IACD,OAAO,CACL,eAAK,SAAS,EAAC,kBAAkB,aAC/B,KAAC,aAAa,IACZ,MAAM,EAAE,MAAM,EACd,YAAY,EAAE,YAAY,EAC1B,eAAe,EAAE,eAAe,EAChC,iBAAiB,EAAE,iBAAiB,GACpC,EACF,eAAK,SAAS,EAAC,cAAc,aAC3B,KAAC,cAAc,IACb,eAAe,EACb,cAAK,SAAS,EAAC,iBAAiB,YAC9B,cAAK,SAAS,EAAC,QAAQ,EAAC,GAAG,EAAE,KAAK,YAChC,KAAC,eAAe,IAAC,SAAS,EAAC,cAAc,GAAG,GACxC,GACF,EAER,WAAW,EAAE,KAAC,WAAW,KAAG,EAC5B,aAAa,EAAE,oBAAoB,GACnC,EACF,KAAC,cAAc,IAAC,QAAQ,EAAE,QAAQ,GAAI,EACtC,KAAC,aAAa,KAAG,EACjB,KAAC,cAAc,KAAG,EAClB,KAAC,eAAe,KAAG,EAClB,EAAE,IAAI,KAAC,kBAAkB,KAAG,EAC7B,KAAC,WAAW,KAAG,EACf,KAAC,UAAU,KAAG,EACd,KAAC,eAAe,KAAG,EACnB,KAAC,UAAU,KAAG,EACd,KAAC,cAAc,KAAG,EAClB,KAAC,wBAAwB,IAAC,QAAQ,EAAE,CAAC,GAAI,EACzC,KAAC,cAAc,KAAG,EAElB,KAAC,wBAAwB,IACvB,MAAM,EAAE,aAAa,EACrB,mBAAmB,EAAE,mBAAmB,GACxC,EACF,KAAC,yBAAyB,IACxB,QAAQ,EAAC,qDAAiC,EAC1C,MAAM,EAAE,aAAa,GACrB,EACF,KAAC,eAAe,KAAG,EACnB,KAAC,YAAY,KAAG,EAChB,KAAC,aAAa,KAAG,EACjB,KAAC,oBAAoB,KAAG,EACxB,KAAC,aAAa,KAAG,EACjB,KAAC,qBAAqB,IAAC,QAAQ,EAAE,QAAQ,GAAI,EAC7C,KAAC,oBAAoB,KAAG,EACxB,KAAC,eAAe,KAAG,EACnB,KAAC,mBAAmB,KAAG,EACvB,KAAC,qBAAqB,KAAG,EACzB,KAAC,aAAa,IAAC,eAAe,EAAE,SAAS,GAAI,EAC5C,kBAAkB,IAAI,CACrB,8BACE,KAAC,oBAAoB,IAAC,UAAU,EAAE,kBAAkB,GAAI,EACxD,KAAC,+BAA+B,IAAC,UAAU,EAAE,kBAAkB,GAAI,IAClE,CACJ,IACG,IACF,CACP,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,MAAM,CAAC,KAAY;IACjC,MAAM,EAAE,EAAE,EAAE,cAAc,EAAE,GAAG,KAAK,CAAC;IAErC,0EAA0E;IAC1E,MAAM,OAAO,GAAG,CACd,KAAC,eAAe,IAAC,aAAa,EAAE,aAAa,YAC3C,KAAC,cAAc,cACb,cAAK,SAAS,EAAC,cAAc,YAC3B,KAAC,eAAe,OAAK,KAAK,GAAI,GAC1B,GACS,GACD,CACnB,CAAC;IAEF,mDAAmD;IACnD,OAAO,EAAE,CAAC,CAAC,CAAC,CACV,KAAC,qBAAqB,IAAC,SAAS,EAAE,EAAE,EAAE,cAAc,EAAE,cAAc,YACjE,OAAO,GACc,CACzB,CAAC,CAAC,CAAC,CACF,OAAO,CACR,CAAC;AACJ,CAAC;AAED,eAAe,MAAM,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/examples/AppSimple.js b/node_modules/@datalayer/jupyter-lexical/lib/examples/AppSimple.js
index 60e7153..4eb8159 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/examples/AppSimple.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/examples/AppSimple.js
@@ -4,7 +4,8 @@ import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-run
  *
  * MIT License
  */
-import { Button } from '@primer/react';
+import { useState } from 'react';
+import { Button, ButtonGroup } from '@primer/react';
 import { Box } from '@datalayer/primer-addons';
 import { ThreeBarsIcon } from '@primer/octicons-react';
 import { Jupyter } from '@datalayer/jupyter-react';
@@ -24,7 +25,38 @@ const LexicalEditor = () => {
                     }, children: "Load Lexical Model" })] }) }));
 };
 export const AppSimple = () => {
-    return (_jsxs(_Fragment, { children: [_jsx("div", { className: "App", children: _jsx("h1", { children: "Jupyter UI \u2764\uFE0F Lexical" }) }), _jsx(Jupyter, { startDefaultKernel: true, children: _jsx(LexicalProvider, { children: _jsx(LexicalEditor, {}) }) }), _jsxs("div", { className: "other App", children: [_jsx("div", { style: {
+    // Get initial state from URL or localStorage
+    const getInitialKernelState = () => {
+        const urlParams = new URLSearchParams(window.location.search);
+        const kernelParam = urlParams.get('kernel');
+        if (kernelParam !== null) {
+            return kernelParam === 'true';
+        }
+        const stored = localStorage.getItem('hasKernel');
+        return stored === 'true';
+    };
+    const [hasKernel] = useState(getInitialKernelState);
+    const toggleKernel = (newValue) => {
+        localStorage.setItem('hasKernel', String(newValue));
+        const url = new URL(window.location.href);
+        url.searchParams.set('kernel', String(newValue));
+        window.location.href = url.toString();
+    };
+    return (_jsxs(_Fragment, { children: [_jsxs("div", { className: "App", children: [_jsx("h1", { children: "Jupyter UI \u2764\uFE0F Lexical" }), _jsxs(ButtonGroup, { children: [_jsx(Button, { variant: !hasKernel ? 'primary' : 'default', onClick: () => toggleKernel(false), sx: {
+                                    fontWeight: !hasKernel ? 'bold' : 'normal',
+                                    backgroundColor: !hasKernel ? '#0969da' : 'transparent',
+                                    color: !hasKernel ? 'white' : 'inherit',
+                                    '&:hover': {
+                                        backgroundColor: !hasKernel ? '#0860ca' : '#f3f4f6',
+                                    },
+                                }, children: "No Runtime" }), _jsx(Button, { variant: hasKernel ? 'primary' : 'default', onClick: () => toggleKernel(true), sx: {
+                                    fontWeight: hasKernel ? 'bold' : 'normal',
+                                    backgroundColor: hasKernel ? '#0969da' : 'transparent',
+                                    color: hasKernel ? 'white' : 'inherit',
+                                    '&:hover': {
+                                        backgroundColor: hasKernel ? '#0860ca' : '#f3f4f6',
+                                    },
+                                }, children: "With Runtime" })] }), _jsxs("p", { style: { fontSize: '12px', color: '#666', marginTop: '8px' }, children: ["Current mode:", ' ', _jsx("strong", { children: hasKernel ? 'Runtime Connected' : 'No Runtime' })] })] }), _jsx(Jupyter, { startDefaultKernel: hasKernel, children: _jsx(LexicalProvider, { children: _jsx(LexicalEditor, {}) }) }), _jsxs("div", { className: "other App", children: [_jsx("div", { style: {
                             display: 'flex',
                             alignItems: 'center',
                             justifyContent: 'center',
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/examples/AppSimple.js.map b/node_modules/@datalayer/jupyter-lexical/lib/examples/AppSimple.js.map
index 02ae3c8..77371b2 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/examples/AppSimple.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/examples/AppSimple.js.map
@@ -1 +1 @@
-{"version":3,"file":"AppSimple.js","sourceRoot":"","sources":["../../src/examples/AppSimple.tsx"],"names":[],"mappings":";AAAA;;;;GAIG;AAEH,OAAO,EAAE,MAAM,EAAE,MAAM,eAAe,CAAC;AACvC,OAAO,EAAE,GAAG,EAAE,MAAM,0BAA0B,CAAC;AAC/C,OAAO,EAAE,aAAa,EAAE,MAAM,wBAAwB,CAAC;AACvD,OAAO,EAAE,OAAO,EAAE,MAAM,0BAA0B,CAAC;AACnD,OAAO,EAAE,UAAU,EAAE,MAAM,EAAE,eAAe,EAAE,MAAM,IAAI,CAAC;AAEzD,OAAO,aAAa,MAAM,gCAAgC,CAAC;AAE3D,OAAO,cAAc,MAAM,8BAA8B,CAAC;AAE1D,MAAM,aAAa,GAAG,GAAG,EAAE;IACzB,MAAM,EAAE,MAAM,EAAE,GAAG,UAAU,EAAE,CAAC;IAChC,OAAO,CACL,KAAC,GAAG,IAAC,SAAS,EAAC,QAAQ,YACrB,MAAC,GAAG,eACF,KAAC,MAAM,IACL,QAAQ,EAAE,cAAc,EACxB,mBAAmB,EAAE,OAAO,CAAC,EAAE;wBAC7B,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,OAAO,CAAC,CAAC;oBAC3C,CAAC,GACD,EACF,KAAC,MAAM,IACL,OAAO,EAAE,CAAC,CAAmB,EAAE,EAAE;wBAC/B,CAAC,CAAC,cAAc,EAAE,CAAC;wBACnB,IAAI,MAAM,EAAE,CAAC;4BACX,MAAM,WAAW,GAAG,MAAM,CAAC,gBAAgB,CAAC,aAAoB,CAAC,CAAC;4BAClE,MAAM,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;wBACrC,CAAC;oBACH,CAAC,mCAGM,IACL,GACF,CACP,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,SAAS,GAAG,GAAG,EAAE;IAC5B,OAAO,CACL,8BACE,cAAK,SAAS,EAAC,KAAK,YAClB,2DAA8B,GAC1B,EACN,KAAC,OAAO,IAAC,kBAAkB,kBACzB,KAAC,eAAe,cACd,KAAC,aAAa,KAAG,GACD,GACV,EACV,eAAK,SAAS,EAAC,WAAW,aACxB,cACE,KAAK,EAAE;4BACL,OAAO,EAAE,MAAM;4BACf,UAAU,EAAE,QAAQ;4BACpB,cAAc,EAAE,QAAQ;4BACxB,SAAS,EAAE,QAAQ;yBACpB,YAED,YAAG,IAAI,EAAC,sBAAsB,EAAC,MAAM,EAAC,QAAQ,EAAC,GAAG,EAAC,YAAY,YAC7D,KAAC,aAAa,KAAG,GACf,GACA,EACN,uBACE,YAAG,IAAI,EAAC,sBAAsB,EAAC,MAAM,EAAC,QAAQ,EAAC,GAAG,EAAC,YAAY,gCAE3D,GACD,EACL,uBACE,uBACE,YACE,IAAI,EAAC,yCAAyC,EAC9C,MAAM,EAAC,QAAQ,EACf,GAAG,EAAC,YAAY,2BAGd,GACD,GACF,IACD,IACL,CACJ,CAAC;AACJ,CAAC,CAAC;AAEF,eAAe,SAAS,CAAC"}
\ No newline at end of file
+{"version":3,"file":"AppSimple.js","sourceRoot":"","sources":["../../src/examples/AppSimple.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/examples/ManualKernelControl.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/examples/ManualKernelControl.d.ts
new file mode 100644
index 0000000..cf26b4a
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/examples/ManualKernelControl.d.ts
@@ -0,0 +1,18 @@
+/**
+ * Example: Manual Kernel Control from External Component
+ *
+ * This example demonstrates how to programmatically control the Jupyter component's
+ * kernel state from an external component, such as a VSCode extension.
+ *
+ * Use cases:
+ * - VSCode extension detecting runtime termination
+ * - User manually disconnecting from a server
+ * - Switching between different Jupyter servers
+ * - Implementing custom kernel lifecycle management
+ */
+import React from 'react';
+/**
+ * Main component demonstrating manual kernel control
+ */
+export declare const ManualKernelControlExample: React.FC;
+export default ManualKernelControlExample;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/examples/ManualKernelControl.js b/node_modules/@datalayer/jupyter-lexical/lib/examples/ManualKernelControl.js
new file mode 100644
index 0000000..b6b24b1
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/examples/ManualKernelControl.js
@@ -0,0 +1,216 @@
+import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Example: Manual Kernel Control from External Component
+ *
+ * This example demonstrates how to programmatically control the Jupyter component's
+ * kernel state from an external component, such as a VSCode extension.
+ *
+ * Use cases:
+ * - VSCode extension detecting runtime termination
+ * - User manually disconnecting from a server
+ * - Switching between different Jupyter servers
+ * - Implementing custom kernel lifecycle management
+ */
+import { useState, useCallback, useEffect } from 'react';
+import { Jupyter } from '@datalayer/jupyter-react';
+import { ServerConnection, ServiceManager } from '@jupyterlab/services';
+import { Button, ButtonGroup } from '@primer/react';
+/**
+ * Simulates an external system (like VSCode extension) that monitors runtime state
+ */
+class RuntimeMonitor {
+    listeners = new Set();
+    _isConnected = true;
+    /**
+     * Subscribe to runtime state changes
+     */
+    onStateChange(callback) {
+        this.listeners.add(callback);
+        // Return unsubscribe function
+        return () => this.listeners.delete(callback);
+    }
+    /**
+     * Simulate runtime termination (e.g., kernel crash, server disconnect)
+     */
+    simulateRuntimeTermination() {
+        console.log(' Runtime terminated!');
+        this._isConnected = false;
+        this.notifyListeners();
+    }
+    /**
+     * Simulate runtime reconnection
+     */
+    simulateRuntimeReconnection() {
+        console.log(' Runtime reconnected!');
+        this._isConnected = true;
+        this.notifyListeners();
+    }
+    /**
+     * Get current runtime state
+     */
+    get isConnected() {
+        return this._isConnected;
+    }
+    notifyListeners() {
+        this.listeners.forEach(callback => callback(this._isConnected));
+    }
+}
+// Global runtime monitor instance (simulates VSCode extension global state)
+const runtimeMonitor = new RuntimeMonitor();
+/**
+ * Main component demonstrating manual kernel control
+ */
+export const ManualKernelControlExample = () => {
+    const [serviceManager, setServiceManager] = useState(undefined);
+    const [startDefaultKernel, setStartDefaultKernel] = useState(true);
+    const [runtimeConnected, setRuntimeConnected] = useState(true);
+    const [statusMessage, setStatusMessage] = useState('Runtime connected');
+    /**
+     * Initialize ServiceManager when runtime is connected
+     */
+    useEffect(() => {
+        if (runtimeConnected) {
+            const initServiceManager = async () => {
+                try {
+                    // Create ServerConnection settings
+                    const serverSettings = ServerConnection.makeSettings({
+                        baseUrl: 'https://oss.datalayer.run/api/jupyter-server',
+                        token: 'YOUR_TOKEN_HERE',
+                        appendToken: true,
+                    });
+                    // Create new ServiceManager instance
+                    const sm = new ServiceManager({
+                        serverSettings,
+                    });
+                    // Wait for ServiceManager to be ready
+                    await sm.ready;
+                    console.log(' ServiceManager initialized:', sm);
+                    setServiceManager(sm);
+                    setStatusMessage('Runtime connected - ServiceManager ready');
+                }
+                catch (error) {
+                    console.error('Failed to initialize ServiceManager:', error);
+                    setStatusMessage('Failed to connect to runtime');
+                }
+            };
+            initServiceManager();
+        }
+        else {
+            // Runtime disconnected - clear ServiceManager
+            if (serviceManager) {
+                console.log(' Disposing ServiceManager...');
+                serviceManager.dispose();
+            }
+            setServiceManager(undefined);
+            setStatusMessage('Runtime disconnected - No kernel available');
+        }
+        // Cleanup on unmount
+        return () => {
+            if (serviceManager && !serviceManager.isDisposed) {
+                serviceManager.dispose();
+            }
+        };
+    }, [runtimeConnected]); // Re-run when runtime connection state changes
+    /**
+     * Subscribe to runtime state changes from external monitor
+     */
+    useEffect(() => {
+        const unsubscribe = runtimeMonitor.onStateChange(isConnected => {
+            console.log(` Runtime state changed: ${isConnected ? 'connected' : 'disconnected'}`);
+            setRuntimeConnected(isConnected);
+        });
+        // Cleanup subscription on unmount
+        return unsubscribe;
+    }, []);
+    /**
+     * Manual control: Disconnect from runtime
+     */
+    const handleDisconnect = useCallback(() => {
+        console.log(' User requested disconnect');
+        setStartDefaultKernel(false);
+        setRuntimeConnected(false);
+    }, []);
+    /**
+     * Manual control: Connect to runtime
+     */
+    const handleConnect = useCallback(() => {
+        console.log(' User requested connect');
+        setStartDefaultKernel(true);
+        setRuntimeConnected(true);
+    }, []);
+    /**
+     * Simulate external event: Runtime termination
+     */
+    const handleSimulateTermination = useCallback(() => {
+        runtimeMonitor.simulateRuntimeTermination();
+    }, []);
+    /**
+     * Simulate external event: Runtime reconnection
+     */
+    const handleSimulateReconnection = useCallback(() => {
+        runtimeMonitor.simulateRuntimeReconnection();
+    }, []);
+    return (_jsxs("div", { style: { padding: '20px' }, children: [_jsx("h1", { children: "Manual Kernel Control Example" }), _jsxs("div", { style: {
+                    padding: '10px',
+                    marginBottom: '20px',
+                    backgroundColor: runtimeConnected ? '#d4edda' : '#f8d7da',
+                    border: `1px solid ${runtimeConnected ? '#c3e6cb' : '#f5c6cb'}`,
+                    borderRadius: '4px',
+                }, children: [_jsx("strong", { children: "Status:" }), " ", statusMessage, _jsx("br", {}), _jsx("strong", { children: "Runtime Connected:" }), ' ', runtimeConnected ? 'Yes ' : 'No ', _jsx("br", {}), _jsx("strong", { children: "ServiceManager:" }), ' ', serviceManager ? 'Available ' : 'Not Available ', _jsx("br", {}), _jsx("strong", { children: "Start Default Kernel:" }), ' ', startDefaultKernel ? 'Yes' : 'No'] }), _jsxs("div", { style: { marginBottom: '20px' }, children: [_jsx("h3", { children: "Manual Control (User Actions)" }), _jsxs(ButtonGroup, { children: [_jsx(Button, { variant: runtimeConnected ? 'default' : 'primary', onClick: handleConnect, disabled: runtimeConnected, children: "Connect to Runtime" }), _jsx(Button, { variant: runtimeConnected ? 'primary' : 'default', onClick: handleDisconnect, disabled: !runtimeConnected, children: "Disconnect from Runtime" })] })] }), _jsxs("div", { style: { marginBottom: '20px' }, children: [_jsx("h3", { children: "Simulate External Events (VSCode Extension)" }), _jsx("p", { style: { fontSize: '12px', color: '#666' }, children: "These simulate events from an external system like a VSCode extension detecting runtime changes." }), _jsxs(ButtonGroup, { children: [_jsx(Button, { variant: "danger", onClick: handleSimulateTermination, disabled: !runtimeConnected, children: "\uD83D\uDD34 Simulate Runtime Termination" }), _jsx(Button, { variant: "primary", onClick: handleSimulateReconnection, disabled: runtimeConnected, children: "\uD83D\uDFE2 Simulate Runtime Reconnection" })] })] }), _jsxs("div", { style: { border: '1px solid #ccc', padding: '10px', marginTop: '20px' }, children: [_jsx("h3", { children: "Jupyter Component" }), _jsx(Jupyter, { serviceManager: serviceManager, startDefaultKernel: startDefaultKernel, lite: false, collaborative: false, children: _jsx("div", { style: { padding: '20px' }, children: runtimeConnected ? (_jsxs("div", { children: [_jsx("p", { children: "\u2705 Jupyter is connected to runtime. You can execute code." }), _jsxs("code", { children: ["print(\"Hello from Jupyter!\")", _jsx("br", {}), "1 + 1"] })] })) : (_jsx("div", { children: _jsx("p", { children: "\u274C Jupyter is disconnected. Connect to runtime to execute code." }) })) }) })] }), _jsxs("div", { style: {
+                    marginTop: '40px',
+                    padding: '20px',
+                    backgroundColor: '#f6f8fa',
+                    borderRadius: '6px',
+                }, children: [_jsx("h3", { children: "VSCode Extension Integration Pattern" }), _jsx("pre", { style: { fontSize: '12px', overflow: 'auto' }, children: `// In your VSCode extension:
+
+// 1. Monitor runtime state
+class RuntimeManager {
+  private _onDidChangeState = new vscode.EventEmitter<boolean>();
+  public readonly onDidChangeState = this._onDidChangeState.event;
+
+  // Detect kernel termination
+  public handleKernelTerminated(): void {
+    this._onDidChangeState.fire(false);
+  }
+
+  // Detect kernel started
+  public handleKernelStarted(): void {
+    this._onDidChangeState.fire(true);
+  }
+}
+
+// 2. Pass state to React component
+const runtimeManager = new RuntimeManager();
+
+// 3. In webview React code:
+const [hasRuntime, setHasRuntime] = useState(true);
+
+useEffect(() => {
+  // Listen to messages from extension
+  window.addEventListener('message', (event) => {
+    const message = event.data;
+    if (message.type === 'runtime-state-changed') {
+      setHasRuntime(message.connected);
+    }
+  });
+}, []);
+
+// 4. Control Jupyter component
+<Jupyter
+  serviceManager={hasRuntime ? serviceManager : undefined}
+  startDefaultKernel={hasRuntime}
+/>
+` })] }), _jsxs("div", { style: {
+                    marginTop: '20px',
+                    padding: '20px',
+                    backgroundColor: '#fff3cd',
+                    borderRadius: '6px',
+                }, children: [_jsx("h3", { children: "\uD83D\uDCDA Jupyter Component Props for Manual Control" }), _jsxs("table", { style: { width: '100%', fontSize: '12px' }, children: [_jsx("thead", { children: _jsxs("tr", { style: { textAlign: 'left', borderBottom: '2px solid #ddd' }, children: [_jsx("th", { style: { padding: '8px' }, children: "Prop" }), _jsx("th", { style: { padding: '8px' }, children: "Type" }), _jsx("th", { style: { padding: '8px' }, children: "Description" })] }) }), _jsxs("tbody", { children: [_jsxs("tr", { style: { borderBottom: '1px solid #ddd' }, children: [_jsx("td", { style: { padding: '8px' }, children: _jsx("code", { children: "serviceManager" }) }), _jsx("td", { style: { padding: '8px' }, children: _jsx("code", { children: "ServiceManager | undefined" }) }), _jsxs("td", { style: { padding: '8px' }, children: ["Pass a custom ServiceManager instance for full manual control. Set to ", _jsx("code", { children: "undefined" }), " to disable kernel connection. This is the main way to programmatically control runtime from external code (e.g., VSCode extension)."] })] }), _jsxs("tr", { style: { borderBottom: '1px solid #ddd' }, children: [_jsx("td", { style: { padding: '8px' }, children: _jsx("code", { children: "startDefaultKernel" }) }), _jsx("td", { style: { padding: '8px' }, children: _jsx("code", { children: "boolean" }) }), _jsxs("td", { style: { padding: '8px' }, children: ["Set to ", _jsx("code", { children: "false" }), " to prevent automatic kernel start. Set to ", _jsx("code", { children: "true" }), " to allow automatic kernel start. Use with", ' ', _jsx("code", { children: "serviceManager" }), " for full control."] })] }), _jsxs("tr", { children: [_jsx("td", { style: { padding: '8px' }, children: _jsx("code", { children: "lite" }) }), _jsx("td", { style: { padding: '8px' }, children: _jsx("code", { children: "boolean" }) }), _jsxs("td", { style: { padding: '8px' }, children: ["Use JupyterLite (in-browser runtime) instead of server. Set to", ' ', _jsx("code", { children: "true" }), " for serverless mode."] })] })] })] })] })] }));
+};
+export default ManualKernelControlExample;
+//# sourceMappingURL=ManualKernelControl.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/examples/ManualKernelControl.js.map b/node_modules/@datalayer/jupyter-lexical/lib/examples/ManualKernelControl.js.map
new file mode 100644
index 0000000..09b3cb7
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/examples/ManualKernelControl.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"ManualKernelControl.js","sourceRoot":"","sources":["../../src/examples/ManualKernelControl.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/examples/index.js b/node_modules/@datalayer/jupyter-lexical/lib/examples/index.js
index 7b2f7b1..ef1c3fa 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/examples/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/examples/index.js
@@ -5,8 +5,9 @@ import { jsx as _jsx } from "react/jsx-runtime";
  * MIT License
  */
 import { createRoot } from 'react-dom/client';
-// import App from "./AppSimple";
-import App from './AppNbformat';
+import App from './AppSimple';
+// import App from './AppNbformat';
+// import { ManualKernelControlExample } from './ManualKernelControl';
 import '../../style/index.css';
 const div = document.createElement('div');
 document.body.appendChild(div);
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/examples/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/examples/index.js.map
index 2e4ac5e..3a84f60 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/examples/index.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/examples/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/examples/index.tsx"],"names":[],"mappings":";AAAA;;;;GAIG;AAEH,OAAO,EAAE,UAAU,EAAE,MAAM,kBAAkB,CAAC;AAC9C,iCAAiC;AACjC,OAAO,GAAG,MAAM,eAAe,CAAC;AAEhC,OAAO,uBAAuB,CAAC;AAE/B,MAAM,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AAC1C,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;AAC/B,MAAM,IAAI,GAAG,UAAU,CAAC,GAAG,CAAC,CAAC;AAE7B,IAAI,CAAC,MAAM,CAAC,KAAC,GAAG,KAAG,CAAC,CAAC"}
\ No newline at end of file
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/examples/index.tsx"],"names":[],"mappings":";AAAA;;;;GAIG;AAEH,OAAO,EAAE,UAAU,EAAE,MAAM,kBAAkB,CAAC;AAC9C,OAAO,GAAG,MAAM,aAAa,CAAC;AAC9B,mCAAmC;AACnC,sEAAsE;AAEtE,OAAO,uBAAuB,CAAC;AAE/B,MAAM,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AAC1C,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;AAC/B,MAAM,IAAI,GAAG,UAAU,CAAC,GAAG,CAAC,CAAC;AAE7B,IAAI,CAAC,MAAM,CAAC,KAAC,GAAG,KAAG,CAAC,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/index.d.ts
index 1237bd8..3677a63 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/index.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/index.d.ts
@@ -6,4 +6,5 @@ export * from './hooks';
 export * from './nodes';
 export * from './plugins';
 export * from './themes';
+export * from './tools';
 export * from './utils';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/index.js b/node_modules/@datalayer/jupyter-lexical/lib/index.js
index 13f2860..ace8bac 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/index.js
@@ -11,5 +11,6 @@ export * from './hooks';
 export * from './nodes';
 export * from './plugins';
 export * from './themes';
+export * from './tools';
 export * from './utils';
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/index.js.map
index c22a4b9..8774f4d 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/index.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,cAAc,cAAc,CAAC;AAC7B,cAAc,WAAW,CAAC;AAC1B,cAAc,WAAW,CAAC;AAC1B,cAAc,UAAU,CAAC;AACzB,cAAc,SAAS,CAAC;AACxB,cAAc,SAAS,CAAC;AACxB,cAAc,WAAW,CAAC;AAC1B,cAAc,UAAU,CAAC;AACzB,cAAc,SAAS,CAAC"}
\ No newline at end of file
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,cAAc,cAAc,CAAC;AAC7B,cAAc,WAAW,CAAC;AAC1B,cAAc,WAAW,CAAC;AAC1B,cAAc,UAAU,CAAC;AACzB,cAAc,SAAS,CAAC;AACxB,cAAc,SAAS,CAAC;AACxB,cAAc,WAAW,CAAC;AAC1B,cAAc,UAAU,CAAC;AACzB,cAAc,SAAS,CAAC;AACxB,cAAc,SAAS,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/InlineCompletionNode.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/nodes/InlineCompletionNode.d.ts
new file mode 100644
index 0000000..796973d
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/InlineCompletionNode.d.ts
@@ -0,0 +1,141 @@
+/**
+ * Lexical DecoratorNode for rendering LLM-powered inline completion ghost text.
+ * Uses NodeTransform to persist across JupyterInputNode updates from syntax highlighting.
+ *
+ * @module nodes/InlineCompletionNode
+ *
+ * @remarks
+ * This node is managed by LexicalInlineCompletionPlugin which:
+ * - Inserts the node when completions are received
+ * - Re-adds it via NodeTransform when JupyterInputOutputPlugin recreates the tree
+ * - Removes it when Tab (accept) or Escape (dismiss) is pressed
+ *
+ * @example
+ * ```typescript
+ * const completionNode = $createInlineCompletionNode('suggested code');
+ * jupyterInputNode.append(completionNode);
+ * ```
+ */
+import type { DOMConversionMap, DOMExportOutput, EditorConfig, LexicalNode, NodeKey, SerializedLexicalNode, Spread } from 'lexical';
+import { DecoratorNode } from 'lexical';
+import * as React from 'react';
+/**
+ * Props for InlineCompletionComponent
+ */
+export interface InlineCompletionNodeProps {
+    /** The completion text to display as ghost text */
+    completionText: string;
+}
+/**
+ * Serialized representation of InlineCompletionNode
+ */
+export type SerializedInlineCompletionNode = Spread<{
+    completionText: string;
+}, SerializedLexicalNode>;
+/**
+ * Lexical DecoratorNode that renders inline completion ghost text.
+ * Styled with low opacity and VS Code theme colors to appear as suggestions.
+ */
+export declare class InlineCompletionNode extends DecoratorNode<React.ReactElement> {
+    __completionText: string;
+    /**
+     * Returns the node type identifier.
+     * @returns Node type string
+     */
+    static getType(): string;
+    /**
+     * Clones an existing InlineCompletionNode.
+     * @param node - Node to clone
+     * @returns New node instance
+     */
+    static clone(node: InlineCompletionNode): InlineCompletionNode;
+    /**
+     * Creates a new InlineCompletionNode.
+     * @param completionText - The ghost text to display
+     * @param key - Optional Lexical node key
+     */
+    constructor(completionText: string, key?: NodeKey);
+    /**
+     * Creates the DOM element for this node.
+     * Styled as ghost text with low opacity and pointer-events disabled.
+     * @param _config - Editor configuration (unused)
+     * @returns Configured span element
+     */
+    createDOM(_config: EditorConfig): HTMLElement;
+    /**
+     * Indicates whether DOM element needs updating.
+     * @returns Always false - DOM is static
+     */
+    updateDOM(): false;
+    /**
+     * Deserializes node from JSON.
+     * @param serializedNode - Serialized node data
+     * @returns New InlineCompletionNode instance
+     */
+    static importJSON(serializedNode: SerializedInlineCompletionNode): InlineCompletionNode;
+    /**
+     * Serializes node to JSON.
+     * @returns Serialized node representation
+     */
+    exportJSON(): SerializedInlineCompletionNode;
+    /**
+     * Disables DOM import for this node type.
+     * @returns null - no DOM import support
+     */
+    static importDOM(): DOMConversionMap | null;
+    /**
+     * Disables DOM export for this node type.
+     * @returns Empty export output
+     */
+    exportDOM(): DOMExportOutput;
+    /**
+     * Gets the completion text.
+     * @returns The ghost text string
+     */
+    getCompletionText(): string;
+    /**
+     * Updates the completion text.
+     * @param text - New completion text
+     */
+    setCompletionText(text: string): void;
+    /**
+     * Renders the React component for this decorator node.
+     * @returns React element displaying ghost text
+     */
+    decorate(): React.ReactElement;
+    /**
+     * Indicates this is an inline node.
+     * @returns Always true
+     */
+    isInline(): boolean;
+    /**
+     * Prevents keyboard selection of this node.
+     * @returns Always false - ghost text should not be selectable
+     */
+    isKeyboardSelectable(): boolean;
+}
+/**
+ * Factory function to create an InlineCompletionNode.
+ * @param completionText - The ghost text to display
+ * @returns New InlineCompletionNode instance
+ *
+ * @example
+ * ```typescript
+ * const node = $createInlineCompletionNode('def fib(n):\n    return n');
+ * jupyterInputNode.append(node);
+ * ```
+ */
+export declare function $createInlineCompletionNode(completionText: string): InlineCompletionNode;
+/**
+ * Type guard to check if a node is an InlineCompletionNode.
+ * @param node - Node to check
+ * @returns True if node is InlineCompletionNode
+ *
+ * @example
+ * ```typescript
+ * if ($isInlineCompletionNode(node)) {
+ *   const text = node.getCompletionText();
+ * }
+ * ```
+ */
+export declare function $isInlineCompletionNode(node: LexicalNode | null | undefined): node is InlineCompletionNode;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/InlineCompletionNode.js b/node_modules/@datalayer/jupyter-lexical/lib/nodes/InlineCompletionNode.js
new file mode 100644
index 0000000..7c8c69b
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/InlineCompletionNode.js
@@ -0,0 +1,177 @@
+import { jsx as _jsx } from "react/jsx-runtime";
+import { DecoratorNode } from 'lexical';
+/**
+ * Lexical DecoratorNode that renders inline completion ghost text.
+ * Styled with low opacity and VS Code theme colors to appear as suggestions.
+ */
+export class InlineCompletionNode extends DecoratorNode {
+    __completionText;
+    /**
+     * Returns the node type identifier.
+     * @returns Node type string
+     */
+    static getType() {
+        return 'inline-completion';
+    }
+    /**
+     * Clones an existing InlineCompletionNode.
+     * @param node - Node to clone
+     * @returns New node instance
+     */
+    static clone(node) {
+        return new InlineCompletionNode(node.__completionText, node.__key);
+    }
+    /**
+     * Creates a new InlineCompletionNode.
+     * @param completionText - The ghost text to display
+     * @param key - Optional Lexical node key
+     */
+    constructor(completionText, key) {
+        super(key);
+        this.__completionText = completionText;
+    }
+    /**
+     * Creates the DOM element for this node.
+     * Styled as ghost text with low opacity and pointer-events disabled.
+     * @param _config - Editor configuration (unused)
+     * @returns Configured span element
+     */
+    createDOM(_config) {
+        const dom = document.createElement('span');
+        dom.className = 'inline-completion-ghost';
+        dom.style.cssText = `
+      opacity: 0.5;
+      color: var(--vscode-editorSuggestWidget-foreground, #999);
+      pointer-events: none;
+      user-select: none;
+      white-space: pre;
+    `;
+        return dom;
+    }
+    /**
+     * Indicates whether DOM element needs updating.
+     * @returns Always false - DOM is static
+     */
+    updateDOM() {
+        return false;
+    }
+    /**
+     * Deserializes node from JSON.
+     * @param serializedNode - Serialized node data
+     * @returns New InlineCompletionNode instance
+     */
+    static importJSON(serializedNode) {
+        return $createInlineCompletionNode(serializedNode.completionText);
+    }
+    /**
+     * Serializes node to JSON.
+     * @returns Serialized node representation
+     */
+    exportJSON() {
+        // Don't serialize completion nodes - they're ephemeral ghost text
+        // Return minimal structure to satisfy type system
+        return {
+            completionText: '',
+            type: 'inline-completion',
+            version: 1,
+        };
+    }
+    /**
+     * Disables DOM import for this node type.
+     * @returns null - no DOM import support
+     */
+    static importDOM() {
+        return null;
+    }
+    /**
+     * Disables DOM export for this node type.
+     * @returns Empty export output
+     */
+    exportDOM() {
+        return { element: null };
+    }
+    /**
+     * Gets the completion text.
+     * @returns The ghost text string
+     */
+    getCompletionText() {
+        return this.__completionText;
+    }
+    /**
+     * Updates the completion text.
+     * @param text - New completion text
+     */
+    setCompletionText(text) {
+        const writable = this.getWritable();
+        writable.__completionText = text;
+    }
+    /**
+     * Renders the React component for this decorator node.
+     * @returns React element displaying ghost text
+     */
+    decorate() {
+        console.warn('[InlineCompletionNode]  decorate() called with text:', this.__completionText.substring(0, 50));
+        return _jsx(InlineCompletionComponent, { completionText: this.__completionText });
+    }
+    /**
+     * Indicates this is an inline node.
+     * @returns Always true
+     */
+    isInline() {
+        return true;
+    }
+    /**
+     * Prevents keyboard selection of this node.
+     * @returns Always false - ghost text should not be selectable
+     */
+    isKeyboardSelectable() {
+        return false;
+    }
+}
+/**
+ * Factory function to create an InlineCompletionNode.
+ * @param completionText - The ghost text to display
+ * @returns New InlineCompletionNode instance
+ *
+ * @example
+ * ```typescript
+ * const node = $createInlineCompletionNode('def fib(n):\n    return n');
+ * jupyterInputNode.append(node);
+ * ```
+ */
+export function $createInlineCompletionNode(completionText) {
+    return new InlineCompletionNode(completionText);
+}
+/**
+ * Type guard to check if a node is an InlineCompletionNode.
+ * @param node - Node to check
+ * @returns True if node is InlineCompletionNode
+ *
+ * @example
+ * ```typescript
+ * if ($isInlineCompletionNode(node)) {
+ *   const text = node.getCompletionText();
+ * }
+ * ```
+ */
+export function $isInlineCompletionNode(node) {
+    return node instanceof InlineCompletionNode;
+}
+/**
+ * React component that renders inline completion ghost text.
+ * Styled with low opacity to appear as a suggestion rather than actual code.
+ *
+ * @param props - Component props
+ * @returns Styled span with ghost text
+ */
+function InlineCompletionComponent({ completionText, }) {
+    console.warn('[InlineCompletionComponent]  Rendering with text:', completionText.substring(0, 50));
+    return (_jsx("span", { className: "inline-completion-text", style: {
+            opacity: 0.5,
+            color: 'var(--vscode-editorSuggestWidget-foreground, #999)',
+            pointerEvents: 'none',
+            userSelect: 'none',
+            whiteSpace: 'pre',
+        }, children: completionText }));
+}
+//# sourceMappingURL=InlineCompletionNode.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/InlineCompletionNode.js.map b/node_modules/@datalayer/jupyter-lexical/lib/nodes/InlineCompletionNode.js.map
new file mode 100644
index 0000000..243e67b
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/InlineCompletionNode.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"InlineCompletionNode.js","sourceRoot":"","sources":["../../src/nodes/InlineCompletionNode.tsx"],"names":[],"mappings":";AAmCA,OAAO,EAAE,aAAa,EAAE,MAAM,SAAS,CAAC;AAqBxC;;;GAGG;AACH,MAAM,OAAO,oBAAqB,SAAQ,aAAiC;IACzE,gBAAgB,CAAS;IAEzB;;;OAGG;IACH,MAAM,CAAC,OAAO;QACZ,OAAO,mBAAmB,CAAC;IAC7B,CAAC;IAED;;;;OAIG;IACH,MAAM,CAAC,KAAK,CAAC,IAA0B;QACrC,OAAO,IAAI,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;IACrE,CAAC;IAED;;;;OAIG;IACH,YAAY,cAAsB,EAAE,GAAa;QAC/C,KAAK,CAAC,GAAG,CAAC,CAAC;QACX,IAAI,CAAC,gBAAgB,GAAG,cAAc,CAAC;IACzC,CAAC;IAED;;;;;OAKG;IACH,SAAS,CAAC,OAAqB;QAC7B,MAAM,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QAC3C,GAAG,CAAC,SAAS,GAAG,yBAAyB,CAAC;QAC1C,GAAG,CAAC,KAAK,CAAC,OAAO,GAAG;;;;;;KAMnB,CAAC;QACF,OAAO,GAAG,CAAC;IACb,CAAC;IAED;;;OAGG;IACH,SAAS;QACP,OAAO,KAAK,CAAC;IACf,CAAC;IAED;;;;OAIG;IACH,MAAM,CAAC,UAAU,CACf,cAA8C;QAE9C,OAAO,2BAA2B,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;IACpE,CAAC;IAED;;;OAGG;IACH,UAAU;QACR,kEAAkE;QAClE,kDAAkD;QAClD,OAAO;YACL,cAAc,EAAE,EAAE;YAClB,IAAI,EAAE,mBAAmB;YACzB,OAAO,EAAE,CAAC;SACX,CAAC;IACJ,CAAC;IAED;;;OAGG;IACH,MAAM,CAAC,SAAS;QACd,OAAO,IAAI,CAAC;IACd,CAAC;IAED;;;OAGG;IACH,SAAS;QACP,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;IAC3B,CAAC;IAED;;;OAGG;IACH,iBAAiB;QACf,OAAO,IAAI,CAAC,gBAAgB,CAAC;IAC/B,CAAC;IAED;;;OAGG;IACH,iBAAiB,CAAC,IAAY;QAC5B,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QACpC,QAAQ,CAAC,gBAAgB,GAAG,IAAI,CAAC;IACnC,CAAC;IAED;;;OAGG;IACH,QAAQ;QACN,OAAO,CAAC,IAAI,CACV,wDAAwD,EACxD,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,CACvC,CAAC;QACF,OAAO,KAAC,yBAAyB,IAAC,cAAc,EAAE,IAAI,CAAC,gBAAgB,GAAI,CAAC;IAC9E,CAAC;IAED;;;OAGG;IACH,QAAQ;QACN,OAAO,IAAI,CAAC;IACd,CAAC;IAED;;;OAGG;IACH,oBAAoB;QAClB,OAAO,KAAK,CAAC;IACf,CAAC;CACF;AAED;;;;;;;;;;GAUG;AACH,MAAM,UAAU,2BAA2B,CACzC,cAAsB;IAEtB,OAAO,IAAI,oBAAoB,CAAC,cAAc,CAAC,CAAC;AAClD,CAAC;AAED;;;;;;;;;;;GAWG;AACH,MAAM,UAAU,uBAAuB,CACrC,IAAoC;IAEpC,OAAO,IAAI,YAAY,oBAAoB,CAAC;AAC9C,CAAC;AAED;;;;;;GAMG;AACH,SAAS,yBAAyB,CAAC,EACjC,cAAc,GACY;IAC1B,OAAO,CAAC,IAAI,CACV,sDAAsD,EACtD,cAAc,CAAC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,CAChC,CAAC;IACF,OAAO,CACL,eACE,SAAS,EAAC,wBAAwB,EAClC,KAAK,EAAE;YACL,OAAO,EAAE,GAAG;YACZ,KAAK,EAAE,oDAAoD;YAC3D,aAAa,EAAE,MAAM;YACrB,UAAU,EAAE,MAAM;YAClB,UAAU,EAAE,KAAK;SAClB,YAEA,cAAc,GACV,CACR,CAAC;AACJ,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNode.js b/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNode.js
index 925e381..46cac16 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNode.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNode.js
@@ -8,6 +8,8 @@ import { DecoratorNode, } from 'lexical';
 import { UUID } from '@lumino/coreutils';
 import { OUTPUT_UUID_TO_CODE_UUID, INPUT_UUID_TO_OUTPUT_KEY, INPUT_UUID_TO_OUTPUT_UUID, OUTPUT_UUID_TO_OUTPUT_KEY, } from '../plugins/JupyterInputOutputPlugin';
 import { Output, OutputAdapter, newUuid, } from '@datalayer/jupyter-react';
+import { createNoKernelWarning } from './jupyterUtils';
+import { isJupyterOutputNodeOrphaned } from './JupyterOutputNodeUtils';
 export class JupyterOutputNode extends DecoratorNode {
     __code;
     __outputs;
@@ -107,11 +109,14 @@ export class JupyterOutputNode extends DecoratorNode {
     }
     /** @override */
     isIsolated() {
-        return false;
+        // Treat orphaned output nodes as isolated blocks for editing purposes
+        // Return true only for orphaned nodes so they are handled as isolated blocks
+        // Normal output nodes with valid parents remain non-isolated
+        return isJupyterOutputNodeOrphaned(this);
     }
     /** @override */
     decorate(_editor, _config) {
-        return (_jsx(Output, { code: this.getJupyterInput(), outputs: this.__outputs, adapter: this.__outputAdapter, id: this.__jupyterOutputNodeUuid, executeTrigger: this.getExecuteTrigger() + this.__renderTrigger, autoRun: this.__autoRun }));
+        return (_jsx(Output, { code: this.getJupyterInput(), outputs: this.__outputs, adapter: this.__outputAdapter, id: this.__jupyterOutputNodeUuid, executeTrigger: this.getExecuteTrigger() + this.__renderTrigger, autoRun: this.__autoRun, lumino: true }));
     }
     /** @override */
     exportJSON() {
@@ -126,32 +131,38 @@ export class JupyterOutputNode extends DecoratorNode {
     }
     /** @override */
     remove(_preserveEmptyParent) {
-        // Do not delete JupyterOutputNode.
+        // Check if this output node is orphaned (parent input node was deleted)
+        if (isJupyterOutputNodeOrphaned(this)) {
+            // Allow deletion of orphaned output nodes
+            // Explicitly set preserveEmptyParent to false for orphaned nodes,
+            // since their parent has already been deleted and we do not want to preserve an
+            // empty parent.
+            super.remove(false);
+        }
+        // Otherwise, do not delete (output nodes with valid parents are protected)
     }
     removeForce() {
         super.remove(false);
     }
     executeCode(code) {
-        console.warn(' JupyterOutputNode.executeCode called with:', code.slice(0, 50));
-        console.warn(' OutputAdapter kernel available:', !!this.__outputAdapter.kernel);
-        this.setJupyterInput(code);
-        if (!this.__outputAdapter.kernel) {
-            console.error(' OutputAdapter has no kernel - cannot execute!');
+        const self = this.getWritable();
+        self.__code = code;
+        if (!self.__outputAdapter.kernel) {
+            // Show user-facing warning instead of just logging
+            const warningOutput = createNoKernelWarning();
+            // Update BOTH the node's outputs AND the adapter's model
+            self.__outputs = [warningOutput];
+            self.__outputAdapter.setOutputs([warningOutput]);
+            // Force re-render by incrementing renderTrigger
+            self.__renderTrigger++;
             return;
         }
-        console.warn(' Calling OutputAdapter.execute()');
-        this.__outputAdapter.execute(code);
-        console.warn(' OutputAdapter.execute() completed');
-        // this.setExecuteTrigger(this.getExecuteTrigger() + 1);
+        // Execute with kernel
+        self.__outputAdapter.execute(code);
     }
     updateKernel(kernel) {
-        console.warn(' JupyterOutputNode.updateKernel called with:', !!kernel);
-        console.warn(' Previous kernel:', !!this.__outputAdapter.kernel);
         const self = this.getWritable();
         self.__outputAdapter.kernel = kernel;
-        // Don't increment renderTrigger immediately - let execution complete first
-        // The renderTrigger will be incremented after execution if needed
-        console.warn(' Kernel updated, new kernel:', !!self.__outputAdapter.kernel);
     }
 }
 export function $createJupyterOutputNode(code, outputAdapter, outputs, autoRun, jupyterInputNodeUuid, jupyterOutputNodeUuid) {
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNode.js.map b/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNode.js.map
index 5a97e88..f5d8c39 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNode.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNode.js.map
@@ -1 +1 @@
-{"version":3,"file":"JupyterOutputNode.js","sourceRoot":"","sources":["../../src/nodes/JupyterOutputNode.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"JupyterOutputNode.js","sourceRoot":"","sources":["../../src/nodes/JupyterOutputNode.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNodeUtils.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNodeUtils.d.ts
new file mode 100644
index 0000000..1624745
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNodeUtils.d.ts
@@ -0,0 +1,12 @@
+import type { JupyterOutputNode } from './JupyterOutputNode';
+/**
+ * Check if a JupyterOutputNode is orphaned (its parent input node was deleted).
+ *
+ * An output node is considered orphaned if:
+ * 1. Its parent input node UUID is not in the INPUT_UUID_TO_CODE_KEY map, OR
+ * 2. The output node has no parent in the Lexical tree
+ *
+ * @param outputNode - The JupyterOutputNode to check
+ * @returns true if the output node is orphaned, false otherwise
+ */
+export declare function isJupyterOutputNodeOrphaned(outputNode: JupyterOutputNode): boolean;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNodeUtils.js b/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNodeUtils.js
new file mode 100644
index 0000000..fad9266
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNodeUtils.js
@@ -0,0 +1,21 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { INPUT_UUID_TO_CODE_KEY } from '../plugins/JupyterInputOutputPlugin';
+/**
+ * Check if a JupyterOutputNode is orphaned (its parent input node was deleted).
+ *
+ * An output node is considered orphaned if:
+ * 1. Its parent input node UUID is not in the INPUT_UUID_TO_CODE_KEY map, OR
+ * 2. The output node has no parent in the Lexical tree
+ *
+ * @param outputNode - The JupyterOutputNode to check
+ * @returns true if the output node is orphaned, false otherwise
+ */
+export function isJupyterOutputNodeOrphaned(outputNode) {
+    const inputNodeKey = INPUT_UUID_TO_CODE_KEY.get(outputNode.getJupyterInputNodeUuid());
+    return !inputNodeKey || !outputNode.getParent();
+}
+//# sourceMappingURL=JupyterOutputNodeUtils.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNodeUtils.js.map b/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNodeUtils.js.map
new file mode 100644
index 0000000..34cc644
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/JupyterOutputNodeUtils.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"JupyterOutputNodeUtils.js","sourceRoot":"","sources":["../../src/nodes/JupyterOutputNodeUtils.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,OAAO,EAAE,sBAAsB,EAAE,MAAM,qCAAqC,CAAC;AAG7E;;;;;;;;;GASG;AACH,MAAM,UAAU,2BAA2B,CACzC,UAA6B;IAE7B,MAAM,YAAY,GAAG,sBAAsB,CAAC,GAAG,CAC7C,UAAU,CAAC,uBAAuB,EAAE,CACrC,CAAC;IACF,OAAO,CAAC,YAAY,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;AAClD,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.d.ts
index 995036d..5639252 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.d.ts
@@ -7,3 +7,4 @@ export * from './JupyterInputNode';
 export * from './JupyterOutputNode';
 export * from './JupyterCellNode';
 export * from './YouTubeNode';
+export * from './InlineCompletionNode';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.js b/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.js
index c673a63..e4031a7 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.js
@@ -12,4 +12,5 @@ export * from './JupyterInputNode';
 export * from './JupyterOutputNode';
 export * from './JupyterCellNode';
 export * from './YouTubeNode';
+export * from './InlineCompletionNode';
 //# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.js.map
index 6b481ef..db19697 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/nodes/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,cAAc,eAAe,CAAC;AAC9B,cAAc,gBAAgB,CAAC;AAC/B,cAAc,aAAa,CAAC;AAC5B,cAAc,6BAA6B,CAAC;AAC5C,cAAc,2BAA2B,CAAC;AAC1C,cAAc,oBAAoB,CAAC;AACnC,cAAc,qBAAqB,CAAC;AACpC,cAAc,mBAAmB,CAAC;AAClC,cAAc,eAAe,CAAC"}
\ No newline at end of file
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/nodes/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,cAAc,eAAe,CAAC;AAC9B,cAAc,gBAAgB,CAAC;AAC/B,cAAc,aAAa,CAAC;AAC5B,cAAc,6BAA6B,CAAC;AAC5C,cAAc,2BAA2B,CAAC;AAC1C,cAAc,oBAAoB,CAAC;AACnC,cAAc,qBAAqB,CAAC;AACpC,cAAc,mBAAmB,CAAC;AAClC,cAAc,eAAe,CAAC;AAC9B,cAAc,wBAAwB,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/jupyterUtils.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/nodes/jupyterUtils.d.ts
new file mode 100644
index 0000000..d8585ea
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/jupyterUtils.d.ts
@@ -0,0 +1,8 @@
+import type { IOutput } from '@jupyterlab/nbformat';
+/**
+ * Creates a warning output message for when no kernel is connected.
+ * This message is shown to users when they try to execute code without a kernel.
+ *
+ * @returns IOutput object containing the warning message
+ */
+export declare function createNoKernelWarning(): IOutput;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/jupyterUtils.js b/node_modules/@datalayer/jupyter-lexical/lib/nodes/jupyterUtils.js
new file mode 100644
index 0000000..65172d1
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/jupyterUtils.js
@@ -0,0 +1,19 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Creates a warning output message for when no kernel is connected.
+ * This message is shown to users when they try to execute code without a kernel.
+ *
+ * @returns IOutput object containing the warning message
+ */
+export function createNoKernelWarning() {
+    return {
+        output_type: 'stream',
+        name: 'stderr',
+        text: ['  No kernel connected. Please connect to execute code.\n'],
+    };
+}
+//# sourceMappingURL=jupyterUtils.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/nodes/jupyterUtils.js.map b/node_modules/@datalayer/jupyter-lexical/lib/nodes/jupyterUtils.js.map
new file mode 100644
index 0000000..71f8b19
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/nodes/jupyterUtils.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"jupyterUtils.js","sourceRoot":"","sources":["../../src/nodes/jupyterUtils.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAIH;;;;;GAKG;AACH,MAAM,UAAU,qBAAqB;IACnC,OAAO;QACL,WAAW,EAAE,QAAQ;QACrB,IAAI,EAAE,QAAQ;QACd,IAAI,EAAE,CAAC,4DAA4D,CAAC;KACrE,CAAC;AACJ,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ComponentPickerMenuPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ComponentPickerMenuPlugin.js
index 3448fac..730a11e 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ComponentPickerMenuPlugin.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ComponentPickerMenuPlugin.js
@@ -103,12 +103,7 @@ export const ComponentPickerMenuPlugin = ({ kernel, initCode = "print('Hello Jup
             new ComponentPickerOption('Jupyter Cell', {
                 icon: _jsx("i", { className: "icon code" }),
                 keywords: ['javascript', 'python', 'js', 'codeblock', 'jupyter'],
-                disabled: !kernel, // Disable if no kernel is available
                 onSelect: () => {
-                    // Only execute if kernel is available (should not be called if disabled)
-                    if (!kernel) {
-                        return;
-                    }
                     editor.dispatchCommand(INSERT_JUPYTER_INPUT_OUTPUT_COMMAND, {
                         code: initCode,
                         outputs: DEFAULT_INITIAL_OUTPUTS,
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ComponentPickerMenuPlugin.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ComponentPickerMenuPlugin.js.map
index 5a0aad0..f8a068e 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ComponentPickerMenuPlugin.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ComponentPickerMenuPlugin.js.map
@@ -1 +1 @@
-{"version":3,"file":"ComponentPickerMenuPlugin.js","sourceRoot":"","sources":["../../src/plugins/ComponentPickerMenuPlugin.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"ComponentPickerMenuPlugin.js","sourceRoot":"","sources":["../../src/plugins/ComponentPickerMenuPlugin.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/DraggableBlockPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/DraggableBlockPlugin.js
index ecd5d8e..b485ad0 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/DraggableBlockPlugin.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/DraggableBlockPlugin.js
@@ -113,6 +113,43 @@ function getBlockElement(anchorElem, editor, event, useEdgeAsDefault = false) {
 function isOnMenu(element) {
     return !!element.closest(`.${DRAGGABLE_BLOCK_MENU_CLASSNAME}`);
 }
+/**
+ * Helper function to find the scrolling container and get scroll offsets.
+ * Checks if the element itself has scrollable overflow, then checks parent.
+ */
+function getScrollingContainer(elem) {
+    // Check if the element itself is scrollable
+    const style = window.getComputedStyle(elem);
+    const hasScrollY = style.overflowY === 'auto' || style.overflowY === 'scroll';
+    const hasScrollX = style.overflowX === 'auto' || style.overflowX === 'scroll';
+    if (hasScrollY || hasScrollX) {
+        return {
+            element: elem,
+            scrollTop: elem.scrollTop || 0,
+            scrollLeft: elem.scrollLeft || 0,
+        };
+    }
+    // Check parent element
+    const parent = elem.parentElement;
+    if (parent) {
+        const parentStyle = window.getComputedStyle(parent);
+        const parentHasScrollY = parentStyle.overflowY === 'auto' || parentStyle.overflowY === 'scroll';
+        const parentHasScrollX = parentStyle.overflowX === 'auto' || parentStyle.overflowX === 'scroll';
+        if (parentHasScrollY || parentHasScrollX) {
+            return {
+                element: parent,
+                scrollTop: parent.scrollTop || 0,
+                scrollLeft: parent.scrollLeft || 0,
+            };
+        }
+    }
+    // No scrolling container found
+    return {
+        element: elem,
+        scrollTop: 0,
+        scrollLeft: 0,
+    };
+}
 function setMenuPosition(targetElem, floatingElem, anchorElem) {
     if (!targetElem) {
         floatingElem.style.opacity = '0';
@@ -123,9 +160,11 @@ function setMenuPosition(targetElem, floatingElem, anchorElem) {
     const targetStyle = window.getComputedStyle(targetElem);
     const floatingElemRect = floatingElem.getBoundingClientRect();
     const anchorElementRect = anchorElem.getBoundingClientRect();
-    const top = targetRect.top +
-        (parseInt(targetStyle.lineHeight, 10) - floatingElemRect.height) / 2 -
-        anchorElementRect.top;
+    const { scrollTop } = getScrollingContainer(anchorElem);
+    // Calculate position with scroll compensation
+    const lineHeight = parseInt(targetStyle.lineHeight, 10);
+    const topOffset = (lineHeight - floatingElemRect.height) / 2;
+    const top = targetRect.top + topOffset - anchorElementRect.top + scrollTop;
     const left = SPACE;
     floatingElem.style.opacity = '1';
     floatingElem.style.transform = `translate(${left}px, ${top}px)`;
@@ -143,6 +182,7 @@ function setTargetLine(targetLineElem, targetBlockElem, mouseY, anchorElem) {
     const { top: targetBlockElemTop, height: targetBlockElemHeight } = targetBlockElem.getBoundingClientRect();
     const { top: anchorTop, width: anchorWidth } = anchorElem.getBoundingClientRect();
     const { marginTop, marginBottom } = getCollapsedMargins(targetBlockElem);
+    const { scrollTop } = getScrollingContainer(anchorElem);
     let lineTop = targetBlockElemTop;
     if (mouseY >= targetBlockElemTop) {
         lineTop += targetBlockElemHeight + marginBottom / 2;
@@ -150,7 +190,7 @@ function setTargetLine(targetLineElem, targetBlockElem, mouseY, anchorElem) {
     else {
         lineTop -= marginTop / 2;
     }
-    const top = lineTop - anchorTop - TARGET_LINE_HALF_HEIGHT;
+    const top = lineTop - anchorTop - TARGET_LINE_HALF_HEIGHT + scrollTop;
     const left = TEXT_BOX_HORIZONTAL_PADDING - SPACE;
     targetLineElem.style.transform = `translate(${left}px, ${top}px)`;
     targetLineElem.style.width = `${anchorWidth - (TEXT_BOX_HORIZONTAL_PADDING - SPACE) * 2}px`;
@@ -163,11 +203,14 @@ function hideTargetLine(targetLineElem) {
     }
 }
 function useDraggableBlockMenu(editor, anchorElem, isEditable) {
-    const scrollerElem = anchorElem.parentElement;
     const menuRef = useRef(null);
     const targetLineRef = useRef(null);
     const isDraggingBlockRef = useRef(false);
     const [draggableBlockElem, setDraggableBlockElem] = useState(null);
+    // Get theme classes from editor config
+    const theme = editor._config.theme;
+    const menuThemeClass = theme.draggableBlockMenu || '';
+    const targetLineThemeClass = theme.draggableBlockTargetLine || '';
     useEffect(() => {
         function onMouseMove(event) {
             const target = event.target;
@@ -175,6 +218,10 @@ function useDraggableBlockMenu(editor, anchorElem, isEditable) {
                 setDraggableBlockElem(null);
                 return;
             }
+            // Performance optimization: Early exit if mouse is outside editor area
+            if (!anchorElem.contains(target)) {
+                return;
+            }
             if (isOnMenu(target)) {
                 return;
             }
@@ -184,13 +231,16 @@ function useDraggableBlockMenu(editor, anchorElem, isEditable) {
         function onMouseLeave() {
             setDraggableBlockElem(null);
         }
-        scrollerElem?.addEventListener('mousemove', onMouseMove);
-        scrollerElem?.addEventListener('mouseleave', onMouseLeave);
+        // BUGFIX: Attach to document instead of scrollerElem to ensure mouse events
+        // work even after scrolling. The scrollerElem approach fails when content scrolls
+        // because the mouse event coordinates become misaligned with element positions.
+        document.addEventListener('mousemove', onMouseMove);
+        document.addEventListener('mouseleave', onMouseLeave);
         return () => {
-            scrollerElem?.removeEventListener('mousemove', onMouseMove);
-            scrollerElem?.removeEventListener('mouseleave', onMouseLeave);
+            document.removeEventListener('mousemove', onMouseMove);
+            document.removeEventListener('mouseleave', onMouseLeave);
         };
-    }, [scrollerElem, anchorElem, editor]);
+    }, [anchorElem, editor]);
     useEffect(() => {
         if (menuRef.current) {
             setMenuPosition(draggableBlockElem, menuRef.current, anchorElem);
@@ -283,7 +333,7 @@ function useDraggableBlockMenu(editor, anchorElem, isEditable) {
         isDraggingBlockRef.current = false;
         hideTargetLine(targetLineRef.current);
     }
-    return createPortal(_jsxs(_Fragment, { children: [_jsx("div", { className: "icon draggable-block-menu", ref: menuRef, draggable: true, onDragStart: onDragStart, onDragEnd: onDragEnd, children: _jsx("div", { className: isEditable ? 'icon' : '' }) }), _jsx("div", { className: "draggable-block-target-line", ref: targetLineRef })] }), anchorElem);
+    return createPortal(_jsxs(_Fragment, { children: [_jsx("div", { className: `icon draggable-block-menu ${menuThemeClass}`, ref: menuRef, draggable: true, onDragStart: onDragStart, onDragEnd: onDragEnd, children: _jsx("div", { className: isEditable ? 'icon' : '' }) }), _jsx("div", { className: `draggable-block-target-line ${targetLineThemeClass}`, ref: targetLineRef })] }), anchorElem);
 }
 export function DraggableBlockPlugin({ anchorElem = document.body, }) {
     const [editor] = useLexicalComposerContext();
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/DraggableBlockPlugin.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/DraggableBlockPlugin.js.map
index 972158a..75bc4c8 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/DraggableBlockPlugin.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/DraggableBlockPlugin.js.map
@@ -1 +1 @@
-{"version":3,"file":"DraggableBlockPlugin.js","sourceRoot":"","sources":["../../src/plugins/DraggableBlockPlugin.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"DraggableBlockPlugin.js","sourceRoot":"","sources":["../../src/plugins/DraggableBlockPlugin.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterInputOutputPlugin.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterInputOutputPlugin.d.ts
index f7da39a..5571bcd 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterInputOutputPlugin.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterInputOutputPlugin.d.ts
@@ -19,5 +19,25 @@ export type JupyterInputOutputPluginProps = {
     onSessionConnection?: OnSessionConnection;
 };
 export declare const INSERT_JUPYTER_INPUT_OUTPUT_COMMAND: import("lexical").LexicalCommand<JupyterInputOutputProps>;
+/**
+ * Command to execute the currently focused/selected Jupyter cell.
+ * Dispatching this command will execute the code in the cell where the cursor is located.
+ */
+export declare const RUN_JUPYTER_CELL_COMMAND: import("lexical").LexicalCommand<void>;
+/**
+ * Command to execute all Jupyter cells in the document.
+ * Dispatching this command will execute all cells in sequential order.
+ */
+export declare const RUN_ALL_JUPYTER_CELLS_COMMAND: import("lexical").LexicalCommand<void>;
+/**
+ * Command to restart the Jupyter kernel.
+ * Dispatching this command will restart the kernel session.
+ */
+export declare const RESTART_JUPYTER_KERNEL_COMMAND: import("lexical").LexicalCommand<void>;
+/**
+ * Command to clear all outputs from all Jupyter cells in the document.
+ * Dispatching this command will clear the outputs of all cells without affecting the code.
+ */
+export declare const CLEAR_ALL_OUTPUTS_COMMAND: import("lexical").LexicalCommand<void>;
 export declare const JupyterInputOutputPlugin: (props?: JupyterInputOutputPluginProps) => null;
 export default JupyterInputOutputPlugin;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterInputOutputPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterInputOutputPlugin.js
index fb5b7cd..acbfbc5 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterInputOutputPlugin.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterInputOutputPlugin.js
@@ -4,12 +4,12 @@
  * MIT License
  */
 import { useEffect, useCallback, useRef } from 'react';
-import { $getSelection, $isRangeSelection, createCommand, COMMAND_PRIORITY_EDITOR, INSERT_LINE_BREAK_COMMAND, COMMAND_PRIORITY_HIGH, KEY_ENTER_COMMAND, COMMAND_PRIORITY_LOW, $createLineBreakNode, $createParagraphNode, $createTextNode, $createRangeSelection, $getNodeByKey, $createNodeSelection, $setSelection, SELECT_ALL_COMMAND, } from 'lexical';
+import { $getSelection, $isRangeSelection, createCommand, COMMAND_PRIORITY_EDITOR, INSERT_LINE_BREAK_COMMAND, COMMAND_PRIORITY_HIGH, COMMAND_PRIORITY_CRITICAL, KEY_ENTER_COMMAND, COMMAND_PRIORITY_LOW, $createLineBreakNode, $createRangeSelection, $getNodeByKey, $createNodeSelection, $setSelection, SELECT_ALL_COMMAND, $getRoot, $isElementNode, } from 'lexical';
 import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
 import { OutputAdapter, newUuid, } from '@datalayer/jupyter-react';
 import { UUID } from '@lumino/coreutils';
+import { createNoKernelWarning } from '../nodes/jupyterUtils';
 import { $createJupyterInputNode, JupyterInputNode, $isJupyterInputNode, } from '../nodes/JupyterInputNode';
-import { $isJupyterInputHighlightNode } from '../nodes/JupyterInputHighlightNode';
 import { registerCodeHighlighting } from '../nodes/JupyterInputHighlighter';
 import { JupyterOutputNode, $createJupyterOutputNode, } from '../nodes/JupyterOutputNode';
 export const INPUT_UUID_TO_OUTPUT_KEY = new Map();
@@ -21,13 +21,37 @@ export const DEFAULT_INITIAL_OUTPUTS = [
     {
         output_type: 'execute_result',
         data: {
-            'text/html': ['<p>Type code in the cell and Shift+Enter to execute.</p>'],
+            'text/html': [
+                '<div style="color: #888; font-size: 11px; font-style: italic; padding: 0; margin: 0;">',
+                'Press <kbd style="font-size: 10px; padding: 1px 4px; background: #f0f0f0; border: 1px solid #ccc; border-radius: 3px;">Shift+Enter</kbd> to execute. Please connect to execute code.',
+                '</div>',
+            ],
         },
         execution_count: 0,
         metadata: {},
     },
 ];
 export const INSERT_JUPYTER_INPUT_OUTPUT_COMMAND = createCommand();
+/**
+ * Command to execute the currently focused/selected Jupyter cell.
+ * Dispatching this command will execute the code in the cell where the cursor is located.
+ */
+export const RUN_JUPYTER_CELL_COMMAND = createCommand();
+/**
+ * Command to execute all Jupyter cells in the document.
+ * Dispatching this command will execute all cells in sequential order.
+ */
+export const RUN_ALL_JUPYTER_CELLS_COMMAND = createCommand();
+/**
+ * Command to restart the Jupyter kernel.
+ * Dispatching this command will restart the kernel session.
+ */
+export const RESTART_JUPYTER_KERNEL_COMMAND = createCommand();
+/**
+ * Command to clear all outputs from all Jupyter cells in the document.
+ * Dispatching this command will clear the outputs of all cells without affecting the code.
+ */
+export const CLEAR_ALL_OUTPUTS_COMMAND = createCommand();
 export const JupyterInputOutputPlugin = (props) => {
     const { kernel, onSessionConnection } = props || {};
     const [editor] = useLexicalComposerContext();
@@ -170,10 +194,10 @@ export const JupyterInputOutputPlugin = (props) => {
         if (kernel) {
             onSessionConnection(kernel.session);
             if (kernel.session) {
-                kernel.session.statusChanged.connect((sessionConnection, _) => {
+                kernel.session.statusChanged.connect((sessionConnection, _status) => {
                     onSessionConnection(sessionConnection);
                 });
-                kernel.session.connectionStatusChanged.connect((sessionConnection, _) => {
+                kernel.session.connectionStatusChanged.connect((sessionConnection, _connectionStatus) => {
                     onSessionConnection(sessionConnection);
                 });
             }
@@ -219,54 +243,48 @@ export const JupyterInputOutputPlugin = (props) => {
                 if (parentNode && $isJupyterInputNode(parentNode)) {
                     if (event.shiftKey) {
                         // Shift+Enter: Execute code
-                        console.warn(' Shift+Enter detected, starting execution flow');
                         event.preventDefault();
                         const code = parentNode.getTextContent();
-                        console.warn(' Code to execute:', code.slice(0, 100));
                         const jupyterInputNodeUuid = parentNode.getJupyterInputNodeUuid();
-                        console.warn(' Input UUID:', jupyterInputNodeUuid);
-                        // Check if kernel is available
-                        console.warn(' Plugin kernel available:', !!kernel);
-                        if (kernel) {
-                            console.warn(' Kernel details:', {
-                                id: kernel.id,
-                                session: !!kernel.session,
-                            });
-                        }
                         const jupyterOutputNodeKey = INPUT_UUID_TO_OUTPUT_KEY.get(jupyterInputNodeUuid);
-                        console.warn(' Found existing output key:', jupyterOutputNodeKey);
                         if (jupyterOutputNodeKey) {
                             const jupyterOutputNode = $getNodeByKey(jupyterOutputNodeKey);
                             if (jupyterOutputNode) {
-                                console.warn(' Executing on existing output node');
                                 // Check the existing output node's adapter kernel
                                 const existingAdapter = jupyterOutputNode.__outputAdapter;
-                                console.warn(' Existing OutputAdapter kernel:', !!existingAdapter.kernel);
+                                // Get writable node ONCE at the start
+                                const writableNode = jupyterOutputNode.getWritable();
+                                // Update kernel if needed
                                 if (!existingAdapter.kernel && kernel) {
-                                    console.warn(' Updating existing OutputAdapter with kernel');
-                                    // Update kernel directly without triggering render
                                     existingAdapter.kernel = kernel;
-                                    console.warn(' Kernel updated directly on adapter');
                                 }
-                                // Execute code on existing output node
-                                jupyterOutputNode.executeCode(code);
+                                // Set the code
+                                writableNode.__code = code;
+                                // Handle execution
+                                if (!existingAdapter.kernel) {
+                                    // Show user-facing warning
+                                    const warningOutput = createNoKernelWarning();
+                                    // Update BOTH the node's outputs AND the adapter's model
+                                    writableNode.__outputs = [warningOutput];
+                                    existingAdapter.setOutputs([warningOutput]);
+                                    writableNode.__renderTrigger++;
+                                }
+                                else {
+                                    existingAdapter.execute(code);
+                                }
                                 return true;
                             }
                         }
-                        console.warn(' Creating new output node');
                         // Create new output node
                         const outputAdapter = new OutputAdapter(newUuid(), kernel, []);
-                        console.warn(' New OutputAdapter kernel:', !!outputAdapter.kernel);
                         const jupyterOutputNode = $createJupyterOutputNode(code, outputAdapter, [], true, jupyterInputNodeUuid, UUID.uuid4());
                         // Insert the output node immediately after the input node
                         parentNode.insertAfter(jupyterOutputNode);
                         const nodeSelection = $createNodeSelection();
                         nodeSelection.add(parentNode.__key);
                         $setSelection(nodeSelection);
-                        console.warn(' Code execution completed');
                         return true;
                     }
-                    console.warn(' Regular Enter in JupyterInputNode - inserting line break');
                     // Regular Enter: Insert a line break directly
                     const selection = $getSelection();
                     if ($isRangeSelection(selection)) {
@@ -278,137 +296,247 @@ export const JupyterInputOutputPlugin = (props) => {
                     return false;
                 }
             }
-            console.warn(' Not in JupyterInputNode - returning false');
             return false;
         }, COMMAND_PRIORITY_LOW);
     }, [editor, kernel]);
     // Handle Ctrl+A to select all content within a Jupyter input cell
-    // Use Lexical command system with HIGH priority to intercept before default behavior
+    // Use CRITICAL priority to run before Lexical's internal select-all handler
     useEffect(() => {
         return editor.registerCommand(SELECT_ALL_COMMAND, (event) => {
-            console.log(' SELECT_ALL_COMMAND intercepted before default behavior');
             const selection = $getSelection();
             if (!$isRangeSelection(selection)) {
-                console.log(' No range selection available');
-                return false; // Let default behavior handle it
-            }
-            // Debug: Log current selection details BEFORE default Ctrl+A
-            console.log(' Current selection details (BEFORE default Ctrl+A):', {
-                anchorKey: selection.anchor.key,
-                anchorOffset: selection.anchor.offset,
-                anchorType: selection.anchor.type,
-                focusKey: selection.focus.key,
-                focusOffset: selection.focus.offset,
-                focusType: selection.focus.type,
-            });
-            // Start from the anchor node and traverse up the hierarchy
-            const anchorNode = selection.anchor.getNode();
-            console.log(' Anchor node details (BEFORE default Ctrl+A):', {
-                type: anchorNode.getType(),
-                key: anchorNode.getKey(),
-                textContent: anchorNode.getTextContent?.()?.slice(0, 50) || 'N/A',
-                parent: anchorNode.getParent()?.getType() || 'No parent',
-            });
-            // Also check the focus node in case it's different
-            const focusNode = selection.focus.getNode();
-            if (focusNode !== anchorNode) {
-                console.log(' Focus node (different from anchor):', {
-                    type: focusNode.getType(),
-                    key: focusNode.getKey(),
-                    textContent: focusNode.getTextContent?.()?.slice(0, 50) || 'N/A',
-                    parent: focusNode.getParent()?.getType() || 'No parent',
-                });
+                return false;
             }
-            let currentNode = anchorNode;
+            // Traverse up from current node to find parent JupyterInputNode
+            let currentNode = selection.anchor.getNode();
             let jupyterInputNode = null;
             let depth = 0;
-            const maxDepth = 20; // Prevent infinite loops
-            // Traverse up the tree hierarchy
+            const maxDepth = 20;
             while (currentNode && depth < maxDepth) {
-                const nodeType = currentNode.getType();
-                const nodeKey = currentNode.getKey();
-                const isJupyterInput = $isJupyterInputNode(currentNode);
-                const isJupyterHighlight = $isJupyterInputHighlightNode(currentNode);
-                console.log(` Depth ${depth}: ${nodeType} (${nodeKey}) - isJupyterInput: ${isJupyterInput}, isJupyterHighlight: ${isJupyterHighlight}`);
-                // Direct check: Is this node a JupyterInputNode?
-                if (isJupyterInput) {
+                if ($isJupyterInputNode(currentNode)) {
                     jupyterInputNode = currentNode;
-                    console.log(` SUCCESS: Found JupyterInputNode at depth ${depth}`);
                     break;
                 }
-                // If this is a JupyterInputHighlightNode, continue traversing up
-                // (the parent should be a JupyterInputNode)
-                if (isJupyterHighlight) {
-                    console.log(` Found JupyterInputHighlightNode at depth ${depth}, continuing traversal...`);
+                currentNode = currentNode.getParent();
+                depth++;
+            }
+            if (jupyterInputNode) {
+                event.preventDefault();
+                event.stopPropagation();
+                // Check if entire cell is already selected by looking at the selection range
+                const isCollapsed = selection.isCollapsed();
+                const cellKey = jupyterInputNode.getKey();
+                const cellSize = jupyterInputNode.getChildrenSize();
+                // Selection is considered "entire cell" if it spans from offset 0 to childrenSize
+                // We need to check if selection covers the full range, regardless of anchor/focus order
+                let selectionCoversEntireCell = false;
+                if (!isCollapsed) {
+                    // Get the anchor and focus nodes
+                    const anchorNode = selection.anchor.getNode();
+                    const focusNode = selection.focus.getNode();
+                    // Check if both anchor and focus are within or at the jupyter input node
+                    const anchorInCell = anchorNode.getKey() === cellKey ||
+                        anchorNode.getParent()?.getKey() === cellKey;
+                    const focusInCell = focusNode.getKey() === cellKey ||
+                        focusNode.getParent()?.getKey() === cellKey;
+                    if (anchorInCell && focusInCell) {
+                        // Get text content to check if entire cell is selected
+                        const selectedText = selection.getTextContent();
+                        const cellText = jupyterInputNode.getTextContent();
+                        selectionCoversEntireCell = selectedText === cellText;
+                    }
                 }
-                // Move to parent
-                const parentNode = currentNode.getParent();
-                if (parentNode) {
-                    currentNode = parentNode;
-                    depth++;
+                console.warn('[SELECT_ALL] Check:', {
+                    isCollapsed,
+                    selectionCoversEntireCell,
+                    selectedText: selection.getTextContent().substring(0, 50),
+                    cellText: jupyterInputNode.getTextContent().substring(0, 50),
+                });
+                if (selectionCoversEntireCell) {
+                    // Second Cmd+A: Select ENTIRE document
+                    console.warn('[SELECT_ALL] Second press - selecting entire document');
+                    const root = $getRoot();
+                    const rangeSelection = $createRangeSelection();
+                    rangeSelection.anchor.set(root.getKey(), 0, 'element');
+                    rangeSelection.focus.set(root.getKey(), root.getChildrenSize(), 'element');
+                    $setSelection(rangeSelection);
+                    return true;
                 }
                 else {
-                    console.log(` No parent at depth ${depth}, reached root`);
-                    break;
+                    // First Cmd+A: Select all content within current cell
+                    console.warn('[SELECT_ALL] First press - selecting current cell');
+                    const rangeSelection = $createRangeSelection();
+                    rangeSelection.anchor.set(jupyterInputNode.getKey(), 0, 'element');
+                    rangeSelection.focus.set(jupyterInputNode.getKey(), cellSize, 'element');
+                    $setSelection(rangeSelection);
+                    return true;
                 }
             }
-            if (depth >= maxDepth) {
-                console.warn(` Max depth ${maxDepth} reached, stopping traversal`);
-            }
-            if (jupyterInputNode) {
-                console.log(' SUCCESS: Found JupyterInputNode, selecting all content within cell');
-                // Select all content within the Jupyter input node
-                const rangeSelection = $createRangeSelection();
-                rangeSelection.anchor.set(jupyterInputNode.getKey(), 0, 'element');
-                rangeSelection.focus.set(jupyterInputNode.getKey(), jupyterInputNode.getChildrenSize(), 'element');
-                $setSelection(rangeSelection);
-                return true; // Prevent default Ctrl+A behavior
-            }
-            console.log(' No JupyterInputNode found in hierarchy - allowing default Ctrl+A');
-            return false; // Let default behavior handle it
-        }, COMMAND_PRIORITY_HIGH);
+            return false; // Allow default select-all if not in Jupyter cell
+        }, COMMAND_PRIORITY_CRITICAL);
     }, [editor]);
     useEffect(() => {
         return editor.registerCommand(INSERT_JUPYTER_INPUT_OUTPUT_COMMAND, (props) => {
             const { code, outputs } = props;
             const selection = $getSelection();
             if ($isRangeSelection(selection)) {
-                // Check if kernel is undefined
-                if (!kernel) {
-                    // Clear any existing selection content
-                    selection.removeText();
-                    // Create a paragraph with the message
-                    const paragraph = $createParagraphNode();
-                    const textNode = $createTextNode('A runtime is needed to insert Jupyter Cells');
-                    paragraph.append(textNode);
-                    selection.insertNodes([paragraph]);
-                    return true;
-                }
                 // Clear any existing selection content
                 selection.removeText();
                 // Create the input node with the code content
                 const jupyterCodeNode = $createJupyterInputNode('python');
+                const jupyterCodeUuid = jupyterCodeNode.getJupyterInputNodeUuid();
                 selection.insertNodes([jupyterCodeNode]);
                 // Add the code content to the input node
                 if (code) {
                     selection.insertRawText(code);
                 }
-                // Create the output node
+                // Create the output node with kernel (may be undefined - that's OK!)
                 const outputAdapter = new OutputAdapter(newUuid(), kernel, outputs);
-                const jupyterOutputNode = $createJupyterOutputNode(code, outputAdapter, outputs || [], true, jupyterCodeNode.getJupyterInputNodeUuid(), UUID.uuid4());
+                const jupyterOutputNode = $createJupyterOutputNode(code, outputAdapter, outputs || [], true, jupyterCodeUuid, UUID.uuid4());
                 outputAdapter.outputArea.model.changed.connect((outputModel, _args) => {
                     editor.update(() => {
                         jupyterOutputNode.setOutputs(outputModel.toJSON());
                     }, { discrete: true }); // Use discrete to avoid cluttering undo stack
                 });
-                // Insert the output node immediately after the input node
-                jupyterCodeNode.insertAfter(jupyterOutputNode);
+                // Get the parent to insert the output node
+                const parent = jupyterCodeNode.getParent();
+                if (parent) {
+                    // Insert the output node immediately after the input node
+                    jupyterCodeNode.insertAfter(jupyterOutputNode);
+                }
                 // Position cursor at the beginning of the jupyter-input node
                 jupyterCodeNode.selectStart();
             }
             return true;
         }, COMMAND_PRIORITY_EDITOR);
     }, [editor, kernel]);
+    /**
+     * Helper function to execute code for a given input node.
+     * Centralizes adapter/kernel setup and code execution logic.
+     */
+    const executeInputNode = useCallback((node, kernelToUse) => {
+        const code = node.getTextContent();
+        const jupyterInputNodeUuid = node.getJupyterInputNodeUuid();
+        const jupyterOutputNodeKey = INPUT_UUID_TO_OUTPUT_KEY.get(jupyterInputNodeUuid);
+        if (jupyterOutputNodeKey) {
+            const jupyterOutputNode = $getNodeByKey(jupyterOutputNodeKey);
+            if (jupyterOutputNode) {
+                // Update kernel using public API before execution
+                jupyterOutputNode.updateKernel(kernelToUse);
+                jupyterOutputNode.executeCode(code);
+                return true;
+            }
+        }
+        return false;
+    }, []);
+    // Handle RUN_JUPYTER_CELL_COMMAND - execute currently focused cell
+    useEffect(() => {
+        return editor.registerCommand(RUN_JUPYTER_CELL_COMMAND, () => {
+            if (!kernel) {
+                console.warn(' No kernel available for cell execution');
+                return false;
+            }
+            const selection = $getSelection();
+            if (!selection)
+                return false;
+            const nodes = selection.getNodes();
+            const node = nodes[0];
+            // Find parent JupyterInputNode using public API
+            const parentNode = node?.getParent();
+            if (parentNode && $isJupyterInputNode(parentNode)) {
+                // Use shared helper to execute the cell
+                return executeInputNode(parentNode, kernel);
+            }
+            return false;
+        }, COMMAND_PRIORITY_EDITOR);
+    }, [editor, kernel, executeInputNode]);
+    // Handle RUN_ALL_JUPYTER_CELLS_COMMAND - execute all cells in document order
+    useEffect(() => {
+        return editor.registerCommand(RUN_ALL_JUPYTER_CELLS_COMMAND, () => {
+            if (!kernel) {
+                console.warn(' No kernel available for running all cells');
+                return false;
+            }
+            // Collect all JupyterInputNodes in document order using public API
+            const inputNodes = [];
+            function collectJupyterInputNodes(node) {
+                if ($isJupyterInputNode(node)) {
+                    inputNodes.push(node);
+                }
+                if ($isElementNode(node)) {
+                    const children = node.getChildren();
+                    for (const child of children) {
+                        collectJupyterInputNodes(child);
+                    }
+                }
+            }
+            const root = $getRoot();
+            collectJupyterInputNodes(root);
+            if (inputNodes.length === 0) {
+                console.warn(' No Jupyter cells found to execute');
+                return false;
+            }
+            console.log(` Executing ${inputNodes.length} cells in document order`);
+            // Execute each cell in document order using shared helper
+            inputNodes.forEach((node) => {
+                executeInputNode(node, kernel);
+            });
+            return true;
+        }, COMMAND_PRIORITY_EDITOR);
+    }, [editor, kernel, executeInputNode]);
+    // Handle RESTART_JUPYTER_KERNEL_COMMAND - restart the kernel
+    useEffect(() => {
+        return editor.registerCommand(RESTART_JUPYTER_KERNEL_COMMAND, () => {
+            if (!kernel?.session?.kernel) {
+                console.warn(' No kernel session available to restart');
+                return false;
+            }
+            // Execute restart asynchronously without blocking
+            (async () => {
+                try {
+                    if (!kernel.session.kernel) {
+                        console.error(' Kernel became null during restart');
+                        return;
+                    }
+                    console.log(' Restarting kernel...');
+                    await kernel.session.kernel.restart();
+                    console.log(' Kernel restarted successfully');
+                }
+                catch (error) {
+                    console.error(' Failed to restart kernel:', error);
+                }
+            })();
+            return true;
+        }, COMMAND_PRIORITY_EDITOR);
+    }, [editor, kernel]);
+    // Handle CLEAR_ALL_OUTPUTS_COMMAND - clear outputs from all cells
+    useEffect(() => {
+        return editor.registerCommand(CLEAR_ALL_OUTPUTS_COMMAND, () => {
+            let clearedCount = 0;
+            // Traverse document tree and clear all JupyterOutputNode outputs
+            function clearJupyterOutputs(node) {
+                if (node instanceof JupyterOutputNode) {
+                    node.setOutputs([]);
+                    clearedCount++;
+                }
+                if ($isElementNode(node)) {
+                    const children = node.getChildren();
+                    for (const child of children) {
+                        clearJupyterOutputs(child);
+                    }
+                }
+            }
+            const root = $getRoot();
+            clearJupyterOutputs(root);
+            if (clearedCount > 0) {
+                console.log(` Cleared outputs from ${clearedCount} cells`);
+            }
+            else {
+                console.warn(' No Jupyter cells found to clear');
+            }
+            return true;
+        }, COMMAND_PRIORITY_EDITOR);
+    }, [editor]);
     return null;
 };
 export default JupyterInputOutputPlugin;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterInputOutputPlugin.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterInputOutputPlugin.js.map
index 5f07c76..82713a1 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterInputOutputPlugin.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/JupyterInputOutputPlugin.js.map
@@ -1 +1 @@
-{"version":3,"file":"JupyterInputOutputPlugin.js","sourceRoot":"","sources":["../../src/plugins/JupyterInputOutputPlugin.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"JupyterInputOutputPlugin.js","sourceRoot":"","sources":["../../src/plugins/JupyterInputOutputPlugin.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.d.ts
new file mode 100644
index 0000000..998047b
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.d.ts
@@ -0,0 +1,69 @@
+/**
+ * Provider interface for LLM completion services.
+ * Implement this to integrate your LLM backend.
+ */
+export interface IInlineCompletionProvider {
+    /** Provider name for logging/debugging */
+    readonly name: string;
+    /**
+     * Fetches completion suggestions from LLM.
+     * @param request - Code text and cursor position
+     * @param context - Code before and after cursor
+     * @returns Promise with completion suggestions
+     */
+    fetch(request: CompletionRequest, context: CompletionContext): Promise<CompletionList>;
+}
+/**
+ * Completion request sent to provider.
+ */
+export interface CompletionRequest {
+    /** Full cell text */
+    text: string;
+    /** Cursor position in text */
+    offset: number;
+    /** Programming language (e.g., 'python') */
+    language?: string;
+}
+/**
+ * Context information for completion request.
+ */
+export interface CompletionContext {
+    /** Text before cursor */
+    before: string;
+    /** Text after cursor */
+    after: string;
+}
+/**
+ * List of completion suggestions from provider.
+ */
+export interface CompletionList {
+    /** Array of completion items */
+    items: CompletionItem[];
+}
+/**
+ * Single completion suggestion.
+ */
+export interface CompletionItem {
+    /** Text to insert if accepted */
+    insertText: string;
+}
+/**
+ * Props for LexicalInlineCompletionPlugin.
+ */
+export interface LexicalInlineCompletionPluginProps {
+    /** Array of completion providers (currently uses first one) */
+    providers: IInlineCompletionProvider[];
+    /** Debounce delay in milliseconds before requesting completion */
+    debounceMs?: number;
+    /** Whether completions are enabled */
+    enabled?: boolean;
+}
+/**
+ * Lexical plugin component for inline code completions.
+ * Must be used within LexicalComposer context.
+ *
+ * @param props - Plugin configuration
+ * @returns null - Plugin has no visual component
+ */
+export declare function LexicalInlineCompletionPlugin({ providers, debounceMs, enabled, }: LexicalInlineCompletionPluginProps): null;
+export default LexicalInlineCompletionPlugin;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.js
new file mode 100644
index 0000000..9346e0a
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.js
@@ -0,0 +1,482 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Lexical plugin for LLM-powered inline code completions in Jupyter cells.
+ * Displays ghost text suggestions that can be accepted (Tab) or dismissed (Escape).
+ *
+ * @module plugins/LexicalInlineCompletionPlugin
+ *
+ * @remarks
+ * This plugin:
+ * - Monitors editor updates and requests completions when text changes
+ * - Only triggers for non-empty content (no completions on blank lines or cursor movement)
+ * - Uses NodeTransform to persist InlineCompletionNode across JupyterInputOutputPlugin updates
+ * - Restricts completions to the active JupyterInputNode only
+ * - Debounces requests to avoid API spam (default 200ms)
+ *
+ * Key behaviors:
+ * - Tab: Accepts completion and inserts as real text
+ * - Escape: Dismisses completion
+ * - Typing: Replaces current completion with new request
+ * - Cursor movement: No new requests (text must change)
+ *
+ * @example
+ * ```tsx
+ * <LexicalComposer>
+ *   <LexicalInlineCompletionPlugin
+ *     providers={[myLLMProvider]}
+ *     debounceMs={200}
+ *     enabled={true}
+ *   />
+ * </LexicalComposer>
+ * ```
+ */
+import { useEffect, useState, useRef, useCallback } from 'react';
+import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
+import { $getSelection, $isRangeSelection, $getNodeByKey, $createTextNode, COMMAND_PRIORITY_LOW, COMMAND_PRIORITY_HIGH, KEY_TAB_COMMAND, KEY_ESCAPE_COMMAND, } from 'lexical';
+import { $isJupyterInputNode, JupyterInputNode, } from '../nodes/JupyterInputNode';
+import { $isJupyterInputHighlightNode } from '../nodes/JupyterInputHighlightNode';
+import { $createInlineCompletionNode, $isInlineCompletionNode, } from '../nodes/InlineCompletionNode';
+/**
+ * Lexical plugin component for inline code completions.
+ * Must be used within LexicalComposer context.
+ *
+ * @param props - Plugin configuration
+ * @returns null - Plugin has no visual component
+ */
+export function LexicalInlineCompletionPlugin({ providers, debounceMs = 200, enabled = true, }) {
+    const [editor] = useLexicalComposerContext();
+    const [currentCompletion, setCurrentCompletion] = useState(null);
+    const debounceTimerRef = useRef(null);
+    const lastRequestRef = useRef('');
+    const lastCellTextRef = useRef('');
+    const completionNodeKeyRef = useRef(null);
+    const requestCompletionRef = useRef(null);
+    /**
+     * Cleanup on unmount
+     */
+    useEffect(() => {
+        console.warn('[InlineCompletionPlugin] Mounted', {
+            enabled,
+            providers: providers.length,
+        });
+        return () => {
+            console.warn('[InlineCompletionPlugin] Unmounted - cleaning up timer');
+            if (debounceTimerRef.current) {
+                clearTimeout(debounceTimerRef.current);
+                debounceTimerRef.current = null;
+            }
+        };
+    }, []); // Only on mount/unmount
+    /**
+     * Request completion from providers
+     */
+    const requestCompletion = useCallback(async (cellText, cursorOffset, language) => {
+        if (!providers || providers.length === 0) {
+            console.warn('[InlineCompletionPlugin]  No provider configured');
+            return;
+        }
+        const provider = providers[0];
+        try {
+            console.warn('[InlineCompletionPlugin]  Requesting completion:', {
+                textLength: cellText.length,
+                cursorOffset,
+                language,
+                before: cellText
+                    .substring(0, cursorOffset)
+                    .substring(Math.max(0, cursorOffset - 50)),
+                after: cellText.substring(cursorOffset, cursorOffset + 50),
+            });
+            const before = cellText.substring(0, cursorOffset);
+            const after = cellText.substring(cursorOffset);
+            const result = await provider.fetch({ text: cellText, offset: cursorOffset, language }, { before, after });
+            console.warn('[InlineCompletionPlugin]  Received response:', {
+                itemCount: result?.items?.length || 0,
+                firstItem: result?.items?.[0]?.insertText?.substring(0, 100),
+            });
+            if (result && result.items && result.items.length > 0) {
+                const completion = result.items[0].insertText;
+                console.warn('[InlineCompletionPlugin]  Setting completion:', completion.substring(0, 100));
+                setCurrentCompletion(completion);
+            }
+            else {
+                console.warn('[InlineCompletionPlugin]  No completion items');
+                setCurrentCompletion(null);
+            }
+        }
+        catch (error) {
+            console.error('[InlineCompletionPlugin]  Error requesting completion:', error);
+            setCurrentCompletion(null);
+        }
+    }, [providers]);
+    // Keep ref updated with latest requestCompletion
+    useEffect(() => {
+        requestCompletionRef.current = requestCompletion;
+    }, [requestCompletion]);
+    /**
+     * Monitor editor updates and trigger completions
+     */
+    useEffect(() => {
+        if (!enabled)
+            return;
+        console.warn('[InlineCompletionPlugin]  Registering update listener');
+        return editor.registerUpdateListener(({ editorState }) => {
+            console.warn('[InlineCompletionPlugin]  Editor update fired');
+            editorState.read(() => {
+                const selection = $getSelection();
+                console.warn('[InlineCompletionPlugin] Selection:', {
+                    type: selection?.constructor.name,
+                    isRange: $isRangeSelection(selection),
+                    isCollapsed: $isRangeSelection(selection)
+                        ? selection.isCollapsed()
+                        : false,
+                });
+                if (!$isRangeSelection(selection) || !selection.isCollapsed()) {
+                    console.warn('[InlineCompletionPlugin]  Not collapsed selection');
+                    setCurrentCompletion(null);
+                    return;
+                }
+                const anchorNode = selection.anchor.getNode();
+                console.warn('[InlineCompletionPlugin] Anchor node:', {
+                    type: anchorNode.getType(),
+                    key: anchorNode.getKey(),
+                });
+                const jupyterInputNode = findJupyterInputParent(anchorNode);
+                if (!jupyterInputNode) {
+                    console.warn('[InlineCompletionPlugin]  Not in JupyterInputNode');
+                    setCurrentCompletion(null);
+                    return;
+                }
+                console.warn('[InlineCompletionPlugin]  Inside JupyterInputNode');
+                // Get cell text and cursor position
+                const cellText = jupyterInputNode.getTextContent();
+                const cursorOffset = getCursorOffset(jupyterInputNode, selection);
+                // Check if cell text actually changed (not just cursor movement)
+                if (cellText === lastCellTextRef.current) {
+                    console.warn('[InlineCompletionPlugin]  Cell text unchanged, skipping (cursor movement only)');
+                    return;
+                }
+                // Update last cell text
+                lastCellTextRef.current = cellText;
+                console.warn('[InlineCompletionPlugin] Cell state:', {
+                    cellLength: cellText.length,
+                    cursorOffset,
+                    lastChars: cellText.substring(Math.max(0, cursorOffset - 20), cursorOffset),
+                });
+                // Check if there's ANY non-whitespace content before cursor
+                // (either on current line or previous lines)
+                const textBeforeCursor = cellText.substring(0, cursorOffset);
+                if (textBeforeCursor.trim().length === 0) {
+                    console.warn('[InlineCompletionPlugin]  No content before cursor (empty or whitespace only)');
+                    setCurrentCompletion(null);
+                    return;
+                }
+                // Also check if current line is empty (e.g., just pressed Enter)
+                // Find start of current line
+                const lineStart = textBeforeCursor.lastIndexOf('\n') + 1;
+                const currentLineBeforeCursor = textBeforeCursor.substring(lineStart);
+                if (currentLineBeforeCursor.trim().length === 0) {
+                    console.warn('[InlineCompletionPlugin]  Current line is empty (no completion on blank lines)');
+                    setCurrentCompletion(null);
+                    return;
+                }
+                // Only request at end of line (current line, not entire cell)
+                const textAfterCursor = cellText.substring(cursorOffset);
+                const nextNewline = textAfterCursor.indexOf('\n');
+                // Get text after cursor on CURRENT LINE only (before next newline)
+                const textAfterCursorOnLine = nextNewline === -1
+                    ? textAfterCursor
+                    : textAfterCursor.substring(0, nextNewline);
+                console.warn('[InlineCompletionPlugin] After cursor:', {
+                    nextNewline,
+                    onCurrentLine: textAfterCursorOnLine,
+                    trimmedOnLineLength: textAfterCursorOnLine.trim().length,
+                });
+                // Check if there's text after cursor ON THE CURRENT LINE
+                if (textAfterCursorOnLine.trim().length > 0) {
+                    let hasCompletionNode = false;
+                    const children = jupyterInputNode.getChildren();
+                    for (const child of children) {
+                        if ($isInlineCompletionNode(child)) {
+                            hasCompletionNode = true;
+                            break;
+                        }
+                    }
+                    console.warn('[InlineCompletionPlugin] Text after cursor check:', {
+                        textAfterLength: textAfterCursor.trim().length,
+                        hasCompletionNode,
+                        childrenCount: children.length,
+                    });
+                    if (!hasCompletionNode) {
+                        console.warn('[InlineCompletionPlugin]  Not at end of line (no completion node found)');
+                        setCurrentCompletion(null);
+                        return;
+                    }
+                    // If we found our completion node, continue (don't clear it)
+                    console.warn('[InlineCompletionPlugin]  Has completion node, allowing');
+                }
+                // Debounce requests
+                if (debounceTimerRef.current) {
+                    clearTimeout(debounceTimerRef.current);
+                }
+                const requestKey = `${cellText}:${cursorOffset}`;
+                if (cellText.trim().length < 2) {
+                    console.warn('[InlineCompletionPlugin]  Text too short');
+                    setCurrentCompletion(null);
+                    lastRequestRef.current = '';
+                    return;
+                }
+                // Schedule timer even if same request (debounce behavior)
+                console.warn('[InlineCompletionPlugin]  Scheduling request in', debounceMs, 'ms', requestKey === lastRequestRef.current
+                    ? '(same request)'
+                    : '(new request)');
+                debounceTimerRef.current = setTimeout(() => {
+                    console.warn('[InlineCompletionPlugin]  Firing completion request');
+                    // Only make actual request if different from last
+                    if (requestKey !== lastRequestRef.current) {
+                        lastRequestRef.current = requestKey;
+                        requestCompletionRef.current?.(cellText, cursorOffset, 'python');
+                    }
+                    else {
+                        console.warn('[InlineCompletionPlugin]  Same as last completed request, skipping API call');
+                    }
+                }, debounceMs);
+            });
+        });
+    }, [editor, enabled, debounceMs]); // Removed requestCompletion dependency
+    /**
+     * Insert/update/remove the InlineCompletionNode based on currentCompletion
+     */
+    useEffect(() => {
+        if (!enabled)
+            return;
+        console.warn('[InlineCompletionPlugin]  Node management effect triggered:', {
+            hasCompletion: !!currentCompletion,
+            completionLength: currentCompletion?.length || 0,
+            hasExistingNode: !!completionNodeKeyRef.current,
+        });
+        editor.update(() => {
+            const selection = $getSelection();
+            console.warn('[InlineCompletionPlugin] Selection for insertion:', {
+                type: selection?.constructor.name,
+                isRange: $isRangeSelection(selection),
+            });
+            if (!$isRangeSelection(selection)) {
+                console.warn('[InlineCompletionPlugin]  Cannot manage nodes - no range selection');
+                return;
+            }
+            // Remove existing completion node
+            if (completionNodeKeyRef.current) {
+                console.warn('[InlineCompletionPlugin]  Removing existing node:', completionNodeKeyRef.current);
+                const existingNode = $getNodeByKey(completionNodeKeyRef.current);
+                if (existingNode && $isInlineCompletionNode(existingNode)) {
+                    existingNode.remove();
+                    console.warn('[InlineCompletionPlugin]  Removed old node');
+                }
+                else {
+                    console.warn('[InlineCompletionPlugin]  Old node not found');
+                }
+                completionNodeKeyRef.current = null;
+            }
+            // Insert new completion node if we have completion text
+            if (currentCompletion && currentCompletion.trim().length > 0) {
+                console.warn('[InlineCompletionPlugin]  Inserting completion node:', currentCompletion.substring(0, 50));
+                const completionNode = $createInlineCompletionNode(currentCompletion);
+                // Insert completion node at cursor position
+                // Get anchor node and insert without breaking selection
+                const anchorNode = selection.anchor.getNode();
+                const anchorOffset = selection.anchor.offset;
+                console.warn('[InlineCompletionPlugin]  Anchor:', {
+                    node: anchorNode.getType(),
+                    offset: anchorOffset,
+                });
+                // Handle different node types at cursor
+                if (anchorNode.getType() === 'text') {
+                    const textNode = anchorNode; // TextNode
+                    // Split text at cursor: "hello|world" -> "hello" + completion + "world"
+                    const splitNodes = textNode.splitText(anchorOffset);
+                    const nodeAfterSplit = splitNodes[0];
+                    // Insert completion after the first part
+                    nodeAfterSplit.insertAfter(completionNode);
+                    console.warn('[InlineCompletionPlugin]  Inserted after text split');
+                }
+                else if (anchorNode.getType() === 'jupyter-input-highlight') {
+                    // We're in a syntax highlight wrapper - insert after it
+                    console.warn('[InlineCompletionPlugin] In highlight node, inserting after highlight wrapper');
+                    anchorNode.insertAfter(completionNode);
+                }
+                else {
+                    // For any other node type, insert after it
+                    console.warn('[InlineCompletionPlugin] Unknown node type, inserting after node');
+                    anchorNode.insertAfter(completionNode);
+                }
+                completionNodeKeyRef.current = completionNode.getKey();
+                console.warn('[InlineCompletionPlugin]  Inserted DecoratorNode with key:', completionNode.getKey());
+                // Verify node persists in tree after insertion
+                setTimeout(() => {
+                    editor.read(() => {
+                        const node = $getNodeByKey(completionNode.getKey());
+                        if (node) {
+                            console.warn('[InlineCompletionPlugin]  Node still in tree after 10ms');
+                        }
+                        else {
+                            console.error('[InlineCompletionPlugin]  Node REMOVED from tree within 10ms!');
+                        }
+                    });
+                }, 10);
+                setTimeout(() => {
+                    editor.read(() => {
+                        const node = $getNodeByKey(completionNode.getKey());
+                        if (node) {
+                            console.warn('[InlineCompletionPlugin]  Node still in tree after 100ms');
+                        }
+                        else {
+                            console.error('[InlineCompletionPlugin]  Node REMOVED from tree within 100ms!');
+                        }
+                    });
+                }, 100);
+            }
+        });
+    }, [editor, currentCompletion, enabled]);
+    /**
+     * Use NodeTransform to continuously re-add completion node after JupyterInputOutputPlugin updates
+     * This ensures the completion persists even when JupyterInputNode is recreated
+     */
+    useEffect(() => {
+        if (!enabled || !currentCompletion)
+            return;
+        console.warn('[InlineCompletionPlugin]  Registering JupyterInputNode transform to maintain completion');
+        return editor.registerNodeTransform(JupyterInputNode, (node) => {
+            // Only add completion to the JupyterInputNode that contains the cursor
+            const selection = $getSelection();
+            if (!$isRangeSelection(selection))
+                return;
+            const anchorNode = selection.anchor.getNode();
+            const currentJupyterInputNode = findJupyterInputParent(anchorNode);
+            // Only transform the node that currently has the cursor
+            if (currentJupyterInputNode !== node) {
+                return;
+            }
+            // Check if this JupyterInputNode should have a completion
+            const children = node.getChildren();
+            const hasCompletion = children.some((child) => $isInlineCompletionNode(child));
+            // If we have a completion to show but it's not in the tree, add it
+            if (!hasCompletion && currentCompletion.trim()) {
+                console.warn('[InlineCompletionPlugin]  Transform: Re-adding completion to JupyterInputNode');
+                const completionNode = $createInlineCompletionNode(currentCompletion);
+                // Insert at cursor position, not at end
+                const anchorNode = selection.anchor.getNode();
+                const anchorOffset = selection.anchor.offset;
+                console.warn('[InlineCompletionPlugin]  Transform anchor:', {
+                    type: anchorNode.getType(),
+                    offset: anchorOffset,
+                });
+                // Use same insertion logic as initial insert
+                if (anchorNode.getType() === 'text') {
+                    const textNode = anchorNode;
+                    const splitNodes = textNode.splitText(anchorOffset);
+                    const nodeAfterSplit = splitNodes[0];
+                    nodeAfterSplit.insertAfter(completionNode);
+                    console.warn('[InlineCompletionPlugin]  Transform: Inserted after text split');
+                }
+                else if (anchorNode.getType() === 'jupyter-input-highlight') {
+                    anchorNode.insertAfter(completionNode);
+                    console.warn('[InlineCompletionPlugin]  Transform: Inserted after highlight node');
+                }
+                else {
+                    anchorNode.insertAfter(completionNode);
+                    console.warn('[InlineCompletionPlugin]  Transform: Inserted after unknown node');
+                }
+                completionNodeKeyRef.current = completionNode.getKey();
+            }
+        });
+    }, [editor, currentCompletion, enabled]);
+    /**
+     * Handle Tab to accept completion
+     */
+    useEffect(() => {
+        if (!enabled)
+            return;
+        return editor.registerCommand(KEY_TAB_COMMAND, (event) => {
+            if (!currentCompletion)
+                return false;
+            event?.preventDefault();
+            editor.update(() => {
+                const selection = $getSelection();
+                if (!$isRangeSelection(selection))
+                    return;
+                // Remove the completion node and insert as real text
+                if (completionNodeKeyRef.current) {
+                    const completionNode = $getNodeByKey(completionNodeKeyRef.current);
+                    if (completionNode && $isInlineCompletionNode(completionNode)) {
+                        const textNode = $createTextNode(currentCompletion);
+                        completionNode.replace(textNode);
+                        completionNodeKeyRef.current = null;
+                    }
+                }
+                setCurrentCompletion(null);
+            });
+            return true;
+        }, COMMAND_PRIORITY_HIGH);
+    }, [editor, enabled, currentCompletion]);
+    /**
+     * Handle Escape to dismiss
+     */
+    useEffect(() => {
+        if (!enabled)
+            return;
+        return editor.registerCommand(KEY_ESCAPE_COMMAND, () => {
+            if (!currentCompletion)
+                return false;
+            setCurrentCompletion(null);
+            return true;
+        }, COMMAND_PRIORITY_LOW);
+    }, [editor, enabled, currentCompletion]);
+    return null;
+}
+/**
+ * Find parent JupyterInputNode
+ */
+function findJupyterInputParent(node) {
+    let current = node;
+    while (current) {
+        if ($isJupyterInputNode(current)) {
+            return current;
+        }
+        if ($isJupyterInputHighlightNode(current)) {
+            const parent = current.getParent();
+            if (parent && $isJupyterInputNode(parent)) {
+                return parent;
+            }
+        }
+        current = current.getParent();
+    }
+}
+/**
+ * Get accurate cursor offset using Lexical selection API
+ */
+function getCursorOffset(jupyterInputNode, selection) {
+    try {
+        const firstDescendant = jupyterInputNode.getFirstDescendant();
+        const startKey = firstDescendant
+            ? firstDescendant.getKey()
+            : jupyterInputNode.getKey();
+        const startOffset = 0;
+        const startType = firstDescendant
+            ? 'text'
+            : 'element';
+        const tempSelection = selection.clone();
+        tempSelection.anchor.set(startKey, startOffset, startType);
+        tempSelection.focus.set(selection.anchor.key, selection.anchor.offset, selection.anchor.type);
+        return tempSelection.getTextContent().length;
+    }
+    catch (e) {
+        console.error('[InlineCompletionPlugin] Error getting cursor offset:', e);
+        return 0;
+    }
+}
+export default LexicalInlineCompletionPlugin;
+//# sourceMappingURL=LexicalInlineCompletionPlugin.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.js.map
new file mode 100644
index 0000000..e1cf384
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalInlineCompletionPlugin.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"LexicalInlineCompletionPlugin.js","sourceRoot":"","sources":["../../src/plugins/LexicalInlineCompletionPlugin.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalStatePlugin.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalStatePlugin.d.ts
new file mode 100644
index 0000000..64bd8d9
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalStatePlugin.d.ts
@@ -0,0 +1,19 @@
+/**
+ * Plugin that initializes the LexicalAdapter and registers it in the state store.
+ *
+ * This plugin should be placed inside the LexicalComposer and wrapped by
+ * LexicalConfigProvider which provides lexicalId and serviceManager.
+ *
+ * @returns null - This is an effect-only plugin
+ *
+ * @example
+ * ```tsx
+ * <LexicalConfigProvider lexicalId="doc-123" serviceManager={sm}>
+ *   <LexicalComposer initialConfig={config}>
+ *     <LexicalStatePlugin />
+ *     {/ * other plugins * /}
+ *   </LexicalComposer>
+ * </LexicalConfigProvider>
+ * ```
+ */
+export declare function LexicalStatePlugin(): null;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalStatePlugin.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalStatePlugin.js
new file mode 100644
index 0000000..63ce460
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalStatePlugin.js
@@ -0,0 +1,61 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Plugin to initialize LexicalAdapter and register it in the lexicalStore.
+ *
+ * This plugin:
+ * 1. Gets the editor instance from LexicalComposerContext
+ * 2. Gets lexicalId and serviceManager from LexicalConfigContext
+ * 3. Creates a LexicalAdapter
+ * 4. Registers the adapter in the global lexicalStore
+ *
+ * @module plugins/LexicalStatePlugin
+ */
+import { useEffect } from 'react';
+import { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';
+import { useLexicalConfig } from '../context/LexicalConfigContext';
+import { LexicalAdapter } from '../state/LexicalAdapter';
+import { lexicalStore } from '../state/LexicalState';
+/**
+ * Plugin that initializes the LexicalAdapter and registers it in the state store.
+ *
+ * This plugin should be placed inside the LexicalComposer and wrapped by
+ * LexicalConfigProvider which provides lexicalId and serviceManager.
+ *
+ * @returns null - This is an effect-only plugin
+ *
+ * @example
+ * ```tsx
+ * <LexicalConfigProvider lexicalId="doc-123" serviceManager={sm}>
+ *   <LexicalComposer initialConfig={config}>
+ *     <LexicalStatePlugin />
+ *     {/ * other plugins * /}
+ *   </LexicalComposer>
+ * </LexicalConfigProvider>
+ * ```
+ */
+export function LexicalStatePlugin() {
+    const [editor] = useLexicalComposerContext();
+    const { lexicalId, serviceManager } = useLexicalConfig();
+    useEffect(() => {
+        // Create adapter with editor and serviceManager
+        const adapter = new LexicalAdapter(editor, serviceManager);
+        // Register in global store
+        const currentLexicals = lexicalStore.getState().lexicals;
+        const updatedLexicals = new Map(currentLexicals);
+        updatedLexicals.set(lexicalId, { adapter });
+        lexicalStore.getState().setLexicals(updatedLexicals);
+        // Cleanup on unmount
+        return () => {
+            const currentLexicals = lexicalStore.getState().lexicals;
+            const updatedLexicals = new Map(currentLexicals);
+            updatedLexicals.delete(lexicalId);
+            lexicalStore.getState().setLexicals(updatedLexicals);
+        };
+    }, [editor, lexicalId, serviceManager]);
+    return null;
+}
+//# sourceMappingURL=LexicalStatePlugin.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalStatePlugin.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalStatePlugin.js.map
new file mode 100644
index 0000000..7fe55b2
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/LexicalStatePlugin.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"LexicalStatePlugin.js","sourceRoot":"","sources":["../../src/plugins/LexicalStatePlugin.tsx"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;;;;;;;GAUG;AAEH,OAAO,EAAE,SAAS,EAAE,MAAM,OAAO,CAAC;AAClC,OAAO,EAAE,yBAAyB,EAAE,MAAM,uCAAuC,CAAC;AAClF,OAAO,EAAE,gBAAgB,EAAE,MAAM,iCAAiC,CAAC;AACnE,OAAO,EAAE,cAAc,EAAE,MAAM,yBAAyB,CAAC;AACzD,OAAO,EAAE,YAAY,EAAE,MAAM,uBAAuB,CAAC;AAErD;;;;;;;;;;;;;;;;;GAiBG;AACH,MAAM,UAAU,kBAAkB;IAChC,MAAM,CAAC,MAAM,CAAC,GAAG,yBAAyB,EAAE,CAAC;IAC7C,MAAM,EAAE,SAAS,EAAE,cAAc,EAAE,GAAG,gBAAgB,EAAE,CAAC;IAEzD,SAAS,CAAC,GAAG,EAAE;QACb,gDAAgD;QAChD,MAAM,OAAO,GAAG,IAAI,cAAc,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC;QAE3D,2BAA2B;QAC3B,MAAM,eAAe,GAAG,YAAY,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC;QACzD,MAAM,eAAe,GAAG,IAAI,GAAG,CAAC,eAAe,CAAC,CAAC;QACjD,eAAe,CAAC,GAAG,CAAC,SAAS,EAAE,EAAE,OAAO,EAAE,CAAC,CAAC;QAC5C,YAAY,CAAC,QAAQ,EAAE,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;QAErD,qBAAqB;QACrB,OAAO,GAAG,EAAE;YACV,MAAM,eAAe,GAAG,YAAY,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC;YACzD,MAAM,eAAe,GAAG,IAAI,GAAG,CAAC,eAAe,CAAC,CAAC;YACjD,eAAe,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;YAClC,YAAY,CAAC,QAAQ,EAAE,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;QACvD,CAAC,CAAC;IACJ,CAAC,EAAE,CAAC,MAAM,EAAE,SAAS,EAAE,cAAc,CAAC,CAAC,CAAC;IAExC,OAAO,IAAI,CAAC;AACd,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ShortcutsPlugin/shortcuts.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ShortcutsPlugin/shortcuts.js
index d5e2cf1..557e69c 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ShortcutsPlugin/shortcuts.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ShortcutsPlugin/shortcuts.js
@@ -13,7 +13,6 @@
 import { IS_APPLE } from '@lexical/utils';
 import { isModifierMatch } from 'lexical';
 //disable eslint sorting rule for quick reference to shortcuts
-/* eslint-disable sort-keys-fix/sort-keys-fix */
 export const SHORTCUTS = Object.freeze({
     // (Ctrl|) + (Alt|Option) + <key> shortcuts
     NORMAL: IS_APPLE ? '+Opt+0' : 'Ctrl+Alt+0',
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ShortcutsPlugin/shortcuts.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ShortcutsPlugin/shortcuts.js.map
index 65dc112..6d077a2 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ShortcutsPlugin/shortcuts.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ShortcutsPlugin/shortcuts.js.map
@@ -1 +1 @@
-{"version":3,"file":"shortcuts.js","sourceRoot":"","sources":["../../../src/plugins/ShortcutsPlugin/shortcuts.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"shortcuts.js","sourceRoot":"","sources":["../../../src/plugins/ShortcutsPlugin/shortcuts.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/index.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/index.js
index 9743112..3af415a 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/index.js
@@ -1,6 +1,11 @@
 import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
 import { $isCodeNode, getCodeLanguageOptions as getCodeLanguageOptionsPrism, normalizeCodeLanguage as normalizeCodeLanguagePrism, } from '@lexical/code';
-import { getCodeLanguageOptions as getCodeLanguageOptionsShiki, getCodeThemeOptions as getCodeThemeOptionsShiki, normalizeCodeLanguage as normalizeCodeLanguageShiki, } from '@lexical/code-shiki';
+// TODO: Install @lexical/code-shiki package to enable Shiki syntax highlighting
+// import {
+//   getCodeLanguageOptions as getCodeLanguageOptionsShiki,
+//   getCodeThemeOptions as getCodeThemeOptionsShiki,
+//   normalizeCodeLanguage as normalizeCodeLanguageShiki,
+// } from '@lexical/code-shiki';
 import { $isLinkNode, TOGGLE_LINK_COMMAND } from '@lexical/link';
 import { $isListNode, ListNode } from '@lexical/list';
 import { INSERT_EMBED_COMMAND } from '@lexical/react/LexicalAutoEmbedPlugin';
@@ -29,7 +34,7 @@ const rootTypeToRootName = {
     root: 'Root',
     table: 'Table',
 };
-const CODE_LANGUAGE_OPTIONS_PRISM = getCodeLanguageOptionsPrism().filter((option) => [
+const CODE_LANGUAGE_OPTIONS_PRISM = getCodeLanguageOptionsPrism().filter(option => [
     'c',
     'clike',
     'cpp',
@@ -51,44 +56,58 @@ const CODE_LANGUAGE_OPTIONS_PRISM = getCodeLanguageOptionsPrism().filter((option
     'typescript',
     'xml',
 ].includes(option[0]));
-const CODE_LANGUAGE_OPTIONS_SHIKI = getCodeLanguageOptionsShiki().filter((option) => [
-    'c',
-    'clike',
-    'cpp',
-    'css',
-    'html',
-    'java',
-    'js',
-    'javascript',
-    'markdown',
-    'objc',
-    'objective-c',
-    'plain',
-    'powershell',
-    'py',
-    'python',
-    'rust',
-    'sql',
-    'typescript',
-    'xml',
-].includes(option[0]));
-const CODE_THEME_OPTIONS_SHIKI = getCodeThemeOptionsShiki().filter((option) => [
-    'catppuccin-latte',
-    'everforest-light',
-    'github-light',
-    'gruvbox-light-medium',
-    'kanagawa-lotus',
-    'dark-plus',
-    'light-plus',
-    'material-theme-lighter',
-    'min-light',
-    'one-light',
-    'rose-pine-dawn',
-    'slack-ochin',
-    'snazzy-light',
-    'solarized-light',
-    'vitesse-light',
-].includes(option[0]));
+// Use Prism options for now until @lexical/code-shiki is installed
+const CODE_LANGUAGE_OPTIONS_SHIKI_FALLBACK = CODE_LANGUAGE_OPTIONS_PRISM;
+// Fallback to Prism normalization until @lexical/code-shiki is installed
+const normalizeCodeLanguageShiki = normalizeCodeLanguagePrism;
+const CODE_THEME_OPTIONS_SHIKI = [
+    ['prism', 'Prism (Default)'],
+];
+// Original Shiki implementation (commented out until package is installed):
+// const CODE_LANGUAGE_OPTIONS_SHIKI: [string, string][] =
+//   getCodeLanguageOptionsShiki().filter((option: [string, string]) =>
+//     [
+//       'c',
+//       'clike',
+//       'cpp',
+//       'css',
+//       'html',
+//       'java',
+//       'js',
+//       'javascript',
+//       'markdown',
+//       'objc',
+//       'objective-c',
+//       'plain',
+//       'powershell',
+//       'py',
+//       'python',
+//       'rust',
+//       'sql',
+//       'typescript',
+//       'xml',
+//     ].includes(option[0]),
+//   );
+// const CODE_THEME_OPTIONS_SHIKI: [string, string][] =
+//   getCodeThemeOptionsShiki().filter((option: [string, string]) =>
+//     [
+//       'catppuccin-latte',
+//       'everforest-light',
+//       'github-light',
+//       'gruvbox-light-medium',
+//       'kanagawa-lotus',
+//       'dark-plus',
+//       'light-plus',
+//       'material-theme-lighter',
+//       'min-light',
+//       'one-light',
+//       'rose-pine-dawn',
+//       'slack-ochin',
+//       'snazzy-light',
+//       'solarized-light',
+//       'vitesse-light',
+//     ].includes(option[0]),
+//   );
 const FONT_FAMILY_OPTIONS = [
     ['Arial', 'Arial'],
     ['Courier New', 'Courier New'],
@@ -199,7 +218,7 @@ function ElementFormatDropdown({ editor, value, isRTL, disabled = false, }) {
 function $findTopLevelElement(node) {
     let topLevelElement = node.getKey() === 'root'
         ? node
-        : $findMatchingParent(node, (e) => {
+        : $findMatchingParent(node, e => {
             const parent = e.getParent();
             return parent !== null && $isRootOrShadowRoot(parent);
         });
@@ -285,7 +304,7 @@ export function ToolbarPlugin({ editor, activeEditor, setActiveEditor, setIsLink
             let matchingParent;
             if ($isLinkNode(parent)) {
                 // If node is a link, we need to fetch the parent paragraph node to set format
-                matchingParent = $findMatchingParent(node, (parentNode) => $isElementNode(parentNode) && !parentNode.isInline());
+                matchingParent = $findMatchingParent(node, parentNode => $isElementNode(parentNode) && !parentNode.isInline());
             }
             // If matchingParent is a valid node, pass it's format type
             updateToolbarState('elementFormat', $isElementNode(matchingParent)
@@ -348,16 +367,16 @@ export function ToolbarPlugin({ editor, activeEditor, setActiveEditor, setIsLink
         }, { editor: activeEditor });
     }, [activeEditor, $updateToolbar]);
     useEffect(() => {
-        return mergeRegister(editor.registerEditableListener((editable) => {
+        return mergeRegister(editor.registerEditableListener(editable => {
             setIsEditable(editable);
         }), activeEditor.registerUpdateListener(({ editorState }) => {
             editorState.read(() => {
                 $updateToolbar();
             }, { editor: activeEditor });
-        }), activeEditor.registerCommand(CAN_UNDO_COMMAND, (payload) => {
+        }), activeEditor.registerCommand(CAN_UNDO_COMMAND, payload => {
             updateToolbarState('canUndo', payload);
             return false;
-        }, COMMAND_PRIORITY_CRITICAL), activeEditor.registerCommand(CAN_REDO_COMMAND, (payload) => {
+        }, COMMAND_PRIORITY_CRITICAL), activeEditor.registerCommand(CAN_REDO_COMMAND, payload => {
             updateToolbarState('canRedo', payload);
             return false;
         }, COMMAND_PRIORITY_CRITICAL));
@@ -402,13 +421,13 @@ export function ToolbarPlugin({ editor, activeEditor, setActiveEditor, setIsLink
                 }, title: IS_APPLE ? 'Undo (Z)' : 'Undo (Ctrl+Z)', type: "button", className: "toolbar-item spaced", "aria-label": "Undo", children: _jsx("i", { className: "format undo" }) }), _jsx("button", { disabled: !toolbarState.canRedo || !isEditable, onClick: () => {
                     activeEditor.dispatchCommand(REDO_COMMAND, undefined);
                 }, title: IS_APPLE ? 'Redo (Z)' : 'Redo (Ctrl+Y)', type: "button", className: "toolbar-item", "aria-label": "Redo", children: _jsx("i", { className: "format redo" }) }), _jsx(Divider, {}), toolbarState.blockType in blockTypeToBlockName &&
-                activeEditor === editor && (_jsxs(_Fragment, { children: [_jsx(BlockFormatDropDown, { disabled: !isEditable, blockType: toolbarState.blockType, rootType: toolbarState.rootType, editor: activeEditor }), _jsx(Divider, {})] })), toolbarState.blockType === 'code' && isCodeHighlighted ? (_jsxs(_Fragment, { children: [!isCodeShiki && (_jsx(DropDown, { disabled: !isEditable, buttonClassName: "toolbar-item code-language", buttonLabel: (CODE_LANGUAGE_OPTIONS_PRISM.find((opt) => opt[0] ===
+                activeEditor === editor && (_jsxs(_Fragment, { children: [_jsx(BlockFormatDropDown, { disabled: !isEditable, blockType: toolbarState.blockType, rootType: toolbarState.rootType, editor: activeEditor }), _jsx(Divider, {})] })), toolbarState.blockType === 'code' && isCodeHighlighted ? (_jsxs(_Fragment, { children: [!isCodeShiki && (_jsx(DropDown, { disabled: !isEditable, buttonClassName: "toolbar-item code-language", buttonLabel: (CODE_LANGUAGE_OPTIONS_PRISM.find(opt => opt[0] ===
                             normalizeCodeLanguagePrism(toolbarState.codeLanguage)) || ['', ''])[1], buttonAriaLabel: "Select language", children: CODE_LANGUAGE_OPTIONS_PRISM.map(([value, name]) => {
                             return (_jsx(DropDownItem, { className: `item ${dropDownActiveClass(value === toolbarState.codeLanguage)}`, onClick: () => onCodeLanguageSelect(value), children: _jsx("span", { className: "text", children: name }) }, value));
-                        }) })), isCodeShiki && (_jsxs(_Fragment, { children: [_jsx(DropDown, { disabled: !isEditable, buttonClassName: "toolbar-item code-language", buttonLabel: (CODE_LANGUAGE_OPTIONS_SHIKI.find((opt) => opt[0] ===
-                                    normalizeCodeLanguageShiki(toolbarState.codeLanguage)) || ['', ''])[1], buttonAriaLabel: "Select language", children: CODE_LANGUAGE_OPTIONS_SHIKI.map(([value, name]) => {
+                        }) })), isCodeShiki && (_jsxs(_Fragment, { children: [_jsx(DropDown, { disabled: !isEditable, buttonClassName: "toolbar-item code-language", buttonLabel: (CODE_LANGUAGE_OPTIONS_SHIKI_FALLBACK.find(opt => opt[0] ===
+                                    normalizeCodeLanguagePrism(toolbarState.codeLanguage)) || ['', ''])[1], buttonAriaLabel: "Select language", children: CODE_LANGUAGE_OPTIONS_SHIKI_FALLBACK.map(([value, name]) => {
                                     return (_jsx(DropDownItem, { className: `item ${dropDownActiveClass(value === toolbarState.codeLanguage)}`, onClick: () => onCodeLanguageSelect(value), children: _jsx("span", { className: "text", children: name }) }, value));
-                                }) }), _jsx(DropDown, { disabled: !isEditable, buttonClassName: "toolbar-item code-language", buttonLabel: (CODE_THEME_OPTIONS_SHIKI.find((opt) => opt[0] === toolbarState.codeTheme) || ['', ''])[1], buttonAriaLabel: "Select theme", children: CODE_THEME_OPTIONS_SHIKI.map(([value, name]) => {
+                                }) }), _jsx(DropDown, { disabled: !isEditable, buttonClassName: "toolbar-item code-language", buttonLabel: (CODE_THEME_OPTIONS_SHIKI.find(opt => opt[0] === toolbarState.codeTheme) || ['', ''])[1], buttonAriaLabel: "Select theme", children: CODE_THEME_OPTIONS_SHIKI.map(([value, name]) => {
                                     return (_jsx(DropDownItem, { className: `item ${dropDownActiveClass(value === toolbarState.codeTheme)}`, onClick: () => onCodeThemeSelect(value), children: _jsx("span", { className: "text", children: name }) }, value));
                                 }) })] }))] })) : (_jsxs(_Fragment, { children: [_jsx(FontDropDown, { disabled: !isEditable, style: 'font-family', value: toolbarState.fontFamily, editor: activeEditor }), _jsx(Divider, {}), _jsx(FontSize, { selectionFontSize: parseFontSizeForToolbar(toolbarState.fontSize).slice(0, -2), editor: activeEditor, disabled: !isEditable }), _jsx(Divider, {}), _jsx("button", { disabled: !isEditable, onClick: () => {
                             activeEditor.dispatchCommand(FORMAT_TEXT_COMMAND, 'bold');
@@ -436,13 +455,13 @@ export function ToolbarPlugin({ editor, activeEditor, setActiveEditor, setIsLink
                                 }, className: 'item wide ' + dropDownActiveClass(toolbarState.isHighlight), title: "Highlight", "aria-label": "Format text with a highlight", children: _jsxs("div", { className: "icon-text-container", children: [_jsx("i", { className: "icon highlight" }), _jsx("span", { className: "text", children: "Highlight" })] }) }), _jsxs(DropDownItem, { onClick: () => clearFormatting(activeEditor), className: "item wide", title: "Clear text formatting", "aria-label": "Clear all text formatting", children: [_jsxs("div", { className: "icon-text-container", children: [_jsx("i", { className: "icon clear" }), _jsx("span", { className: "text", children: "Clear Formatting" })] }), _jsx("span", { className: "shortcut", children: SHORTCUTS.CLEAR_FORMATTING })] })] }), canViewerSeeInsertDropdown && (_jsxs(_Fragment, { children: [_jsx(Divider, {}), _jsxs(DropDown, { disabled: !isEditable, buttonClassName: "toolbar-item spaced", buttonLabel: "Insert", buttonAriaLabel: "Insert specialized editor node", buttonIconClassName: "icon plus", children: [_jsxs(DropDownItem, { onClick: () => {
                                             activeEditor.dispatchCommand(INSERT_HORIZONTAL_RULE_COMMAND, undefined);
                                         }, className: "item", children: [_jsx("i", { className: "icon horizontal-rule" }), _jsx("span", { className: "text", children: "Horizontal Rule" })] }), _jsxs(DropDownItem, { onClick: () => {
-                                            showModal('Insert Image', (onClose) => (_jsx(InsertImageDialog, { activeEditor: activeEditor, onClose: onClose })));
+                                            showModal('Insert Image', onClose => (_jsx(InsertImageDialog, { activeEditor: activeEditor, onClose: onClose })));
                                         }, className: "item", children: [_jsx("i", { className: "icon image" }), _jsx("span", { className: "text", children: "Image" })] }), _jsxs(DropDownItem, { onClick: () => insertGifOnClick({
                                             altText: 'Cat typing on a laptop',
                                             src: catTypingGif,
                                         }), className: "item", children: [_jsx("i", { className: "icon gif" }), _jsx("span", { className: "text", children: "GIF" })] }), _jsxs(DropDownItem, { onClick: () => {
-                                            showModal('Insert Equation', (onClose) => (_jsx(InsertEquationDialog, { activeEditor: activeEditor, onClose: onClose })));
-                                        }, className: "item", children: [_jsx("i", { className: "icon equation" }), _jsx("span", { className: "text", children: "Equation" })] }), EmbedConfigs.map((embedConfig) => (_jsxs(DropDownItem, { onClick: () => {
+                                            showModal('Insert Equation', onClose => (_jsx(InsertEquationDialog, { activeEditor: activeEditor, onClose: onClose })));
+                                        }, className: "item", children: [_jsx("i", { className: "icon equation" }), _jsx("span", { className: "text", children: "Equation" })] }), EmbedConfigs.map(embedConfig => (_jsxs(DropDownItem, { onClick: () => {
                                             activeEditor.dispatchCommand(INSERT_EMBED_COMMAND, embedConfig.type);
                                         }, className: "item", children: [embedConfig.icon, _jsx("span", { className: "text", children: embedConfig.contentName })] }, embedConfig.type)))] })] }))] })), _jsx(Divider, {}), _jsx(ElementFormatDropdown, { disabled: !isEditable, value: toolbarState.elementFormat, editor: activeEditor, isRTL: toolbarState.isRTL }), modal] }));
 }
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/index.js.map
index 4c1e61c..0ffa045 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/index.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/plugins/ToolbarPlugin/index.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/plugins/ToolbarPlugin/index.tsx"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/utils.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/utils.js
index 19fbd6f..23a6128 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/utils.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/utils.js
@@ -19,7 +19,6 @@ import { $isTableSelection } from '@lexical/table';
 import { $getNearestBlockElementAncestorOrThrow } from '@lexical/utils';
 import { $createParagraphNode, $getSelection, $isRangeSelection, $isTextNode, } from 'lexical';
 import { DEFAULT_FONT_SIZE, MAX_ALLOWED_FONT_SIZE, MIN_ALLOWED_FONT_SIZE, } from '../../context/ToolbarContext';
-// eslint-disable-next-line no-shadow
 export var UpdateFontSizeType;
 (function (UpdateFontSizeType) {
     UpdateFontSizeType[UpdateFontSizeType["increment"] = 1] = "increment";
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/utils.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/utils.js.map
index 1933ff2..df4befa 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/utils.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/ToolbarPlugin/utils.js.map
@@ -1 +1 @@
-{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../src/plugins/ToolbarPlugin/utils.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;;;GAMG;AACH,OAAO,EAAC,eAAe,EAAC,MAAM,eAAe,CAAC;AAC9C,OAAO,EACL,yBAAyB,EACzB,2BAA2B,EAC3B,6BAA6B,GAC9B,MAAM,eAAe,CAAC;AACvB,OAAO,EAAC,qBAAqB,EAAC,MAAM,0CAA0C,CAAC;AAC/E,OAAO,EACL,kBAAkB,EAClB,gBAAgB,EAChB,cAAc,EACd,YAAY,GAEb,MAAM,oBAAoB,CAAC;AAC5B,OAAO,EAAC,eAAe,EAAE,cAAc,EAAC,MAAM,oBAAoB,CAAC;AACnE,OAAO,EAAC,iBAAiB,EAAC,MAAM,gBAAgB,CAAC;AACjD,OAAO,EAAC,sCAAsC,EAAC,MAAM,gBAAgB,CAAC;AACtE,OAAO,EACL,oBAAoB,EACpB,aAAa,EACb,iBAAiB,EACjB,WAAW,GAEZ,MAAM,SAAS,CAAC;AAEjB,OAAO,EACL,iBAAiB,EACjB,qBAAqB,EACrB,qBAAqB,GACtB,MAAM,8BAA8B,CAAC;AAEtC,qCAAqC;AACrC,MAAM,CAAN,IAAY,kBAGX;AAHD,WAAY,kBAAkB;IAC5B,qEAAa,CAAA;IACb,qEAAS,CAAA;AACX,CAAC,EAHW,kBAAkB,KAAlB,kBAAkB,QAG7B;AAED;;;;;GAKG;AACH,MAAM,CAAC,MAAM,qBAAqB,GAAG,CACnC,eAAuB,EACvB,UAAqC,EACrC,EAAE;IACF,IAAI,CAAC,UAAU,EAAE,CAAC;QAChB,OAAO,eAAe,CAAC;IACzB,CAAC;IAED,IAAI,eAAe,GAAW,eAAe,CAAC;IAC9C,QAAQ,UAAU,EAAE,CAAC;QACnB,KAAK,kBAAkB,CAAC,SAAS;YAC/B,QAAQ,IAAI,EAAE,CAAC;gBACb,KAAK,eAAe,GAAG,qBAAqB;oBAC1C,eAAe,GAAG,qBAAqB,CAAC;oBACxC,MAAM;gBACR,KAAK,eAAe,IAAI,EAAE;oBACxB,eAAe,IAAI,EAAE,CAAC;oBACtB,MAAM;gBACR,KAAK,eAAe,IAAI,EAAE;oBACxB,eAAe,IAAI,CAAC,CAAC;oBACrB,MAAM;gBACR,KAAK,eAAe,IAAI,EAAE;oBACxB,eAAe,IAAI,CAAC,CAAC;oBACrB,MAAM;gBACR,KAAK,eAAe,IAAI,CAAC;oBACvB,eAAe,IAAI,CAAC,CAAC;oBACrB,MAAM;gBACR;oBACE,eAAe,GAAG,qBAAqB,CAAC;oBACxC,MAAM;YACV,CAAC;YACD,MAAM;QAER,KAAK,kBAAkB,CAAC,SAAS;YAC/B,QAAQ,IAAI,EAAE,CAAC;gBACb,KAAK,eAAe,GAAG,qBAAqB;oBAC1C,eAAe,GAAG,qBAAqB,CAAC;oBACxC,MAAM;gBACR,KAAK,eAAe,GAAG,EAAE;oBACvB,eAAe,IAAI,CAAC,CAAC;oBACrB,MAAM;gBACR,KAAK,eAAe,GAAG,EAAE;oBACvB,eAAe,IAAI,CAAC,CAAC;oBACrB,MAAM;gBACR,KAAK,eAAe,GAAG,EAAE;oBACvB,eAAe,IAAI,CAAC,CAAC;oBACrB,MAAM;gBACR,KAAK,eAAe,IAAI,EAAE;oBACxB,eAAe,IAAI,EAAE,CAAC;oBACtB,MAAM;gBACR;oBACE,eAAe,GAAG,qBAAqB,CAAC;oBACxC,MAAM;YACV,CAAC;YACD,MAAM;QAER;YACE,MAAM;IACV,CAAC;IACD,OAAO,eAAe,CAAC;AACzB,CAAC,CAAC;AAEF;;GAEG;AACH,MAAM,CAAC,MAAM,yBAAyB,GAAG,CACvC,MAAqB,EACrB,WAA0B,EAC1B,UAAqC,EACrC,EAAE;IACF,MAAM,eAAe,GAAG,CAAC,YAA2B,EAAU,EAAE;QAC9D,IAAI,CAAC,YAAY,EAAE,CAAC;YAClB,YAAY,GAAG,GAAG,iBAAiB,IAAI,CAAC;QAC1C,CAAC;QACD,YAAY,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACzC,MAAM,YAAY,GAAG,qBAAqB,CACxC,MAAM,CAAC,YAAY,CAAC,EACpB,UAAU,CACX,CAAC;QACF,OAAO,GAAG,YAAY,IAAI,CAAC;IAC7B,CAAC,CAAC;IAEF,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE;QACjB,IAAI,MAAM,CAAC,UAAU,EAAE,EAAE,CAAC;YACxB,MAAM,SAAS,GAAG,aAAa,EAAE,CAAC;YAClC,IAAI,SAAS,KAAK,IAAI,EAAE,CAAC;gBACvB,eAAe,CAAC,SAAS,EAAE;oBACzB,WAAW,EAAE,WAAW,IAAI,eAAe;iBAC5C,CAAC,CAAC;YACL,CAAC;QACH,CAAC;IACH,CAAC,CAAC,CAAC;AACL,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,cAAc,GAAG,CAC5B,MAAqB,EACrB,UAA8B,EAC9B,UAAkB,EAClB,EAAE;IACF,IAAI,UAAU,KAAK,EAAE,EAAE,CAAC;QACtB,MAAM,YAAY,GAAG,qBAAqB,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE,UAAU,CAAC,CAAC;QAC3E,yBAAyB,CAAC,MAAM,EAAE,MAAM,CAAC,YAAY,CAAC,GAAG,IAAI,EAAE,IAAI,CAAC,CAAC;IACvE,CAAC;SAAM,CAAC;QACN,yBAAyB,CAAC,MAAM,EAAE,IAAI,EAAE,UAAU,CAAC,CAAC;IACtD,CAAC;AACH,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,eAAe,GAAG,CAAC,MAAqB,EAAE,EAAE;IACvD,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE;QACjB,MAAM,SAAS,GAAG,aAAa,EAAE,CAAC;QAClC,cAAc,CAAC,SAAS,EAAE,GAAG,EAAE,CAAC,oBAAoB,EAAE,CAAC,CAAC;IAC1D,CAAC,CAAC,CAAC;AACL,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,aAAa,GAAG,CAC3B,MAAqB,EACrB,SAAiB,EACjB,WAA2B,EAC3B,EAAE;IACF,IAAI,SAAS,KAAK,WAAW,EAAE,CAAC;QAC9B,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE;YACjB,MAAM,SAAS,GAAG,aAAa,EAAE,CAAC;YAClC,cAAc,CAAC,SAAS,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC,CAAC;QACnE,CAAC,CAAC,CAAC;IACL,CAAC;AACH,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,gBAAgB,GAAG,CAAC,MAAqB,EAAE,SAAiB,EAAE,EAAE;IAC3E,IAAI,SAAS,KAAK,QAAQ,EAAE,CAAC;QAC3B,MAAM,CAAC,eAAe,CAAC,6BAA6B,EAAE,SAAS,CAAC,CAAC;IACnE,CAAC;SAAM,CAAC;QACN,eAAe,CAAC,MAAM,CAAC,CAAC;IAC1B,CAAC;AACH,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,eAAe,GAAG,CAAC,MAAqB,EAAE,SAAiB,EAAE,EAAE;IAC1E,IAAI,SAAS,KAAK,OAAO,EAAE,CAAC;QAC1B,MAAM,CAAC,eAAe,CAAC,yBAAyB,EAAE,SAAS,CAAC,CAAC;IAC/D,CAAC;SAAM,CAAC;QACN,eAAe,CAAC,MAAM,CAAC,CAAC;IAC1B,CAAC;AACH,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,kBAAkB,GAAG,CAChC,MAAqB,EACrB,SAAiB,EACjB,EAAE;IACF,IAAI,SAAS,KAAK,QAAQ,EAAE,CAAC;QAC3B,MAAM,CAAC,eAAe,CAAC,2BAA2B,EAAE,SAAS,CAAC,CAAC;IACjE,CAAC;SAAM,CAAC;QACN,eAAe,CAAC,MAAM,CAAC,CAAC;IAC1B,CAAC;AACH,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,WAAW,GAAG,CAAC,MAAqB,EAAE,SAAiB,EAAE,EAAE;IACtE,IAAI,SAAS,KAAK,OAAO,EAAE,CAAC;QAC1B,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE;YACjB,MAAM,SAAS,GAAG,aAAa,EAAE,CAAC;YAClC,cAAc,CAAC,SAAS,EAAE,GAAG,EAAE,CAAC,gBAAgB,EAAE,CAAC,CAAC;QACtD,CAAC,CAAC,CAAC;IACL,CAAC;AACH,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,UAAU,GAAG,CAAC,MAAqB,EAAE,SAAiB,EAAE,EAAE;IACrE,IAAI,SAAS,KAAK,MAAM,EAAE,CAAC;QACzB,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE;YACjB,IAAI,SAAS,GAAG,aAAa,EAAE,CAAC;YAChC,IAAI,CAAC,SAAS,EAAE,CAAC;gBACf,OAAO;YACT,CAAC;YACD,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,IAAI,SAAS,CAAC,WAAW,EAAE,EAAE,CAAC;gBAC7D,cAAc,CAAC,SAAS,EAAE,GAAG,EAAE,CAAC,eAAe,EAAE,CAAC,CAAC;YACrD,CAAC;iBAAM,CAAC;gBACN,MAAM,WAAW,GAAG,SAAS,CAAC,cAAc,EAAE,CAAC;gBAC/C,MAAM,QAAQ,GAAG,eAAe,EAAE,CAAC;gBACnC,SAAS,CAAC,WAAW,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAClC,SAAS,GAAG,aAAa,EAAE,CAAC;gBAC5B,IAAI,iBAAiB,CAAC,SAAS,CAAC,EAAE,CAAC;oBACjC,SAAS,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;gBACvC,CAAC;YACH,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;AACH,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,eAAe,GAAG,CAAC,MAAqB,EAAE,EAAE;IACvD,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE;QACjB,MAAM,SAAS,GAAG,aAAa,EAAE,CAAC;QAClC,IAAI,iBAAiB,CAAC,SAAS,CAAC,IAAI,iBAAiB,CAAC,SAAS,CAAC,EAAE,CAAC;YACjE,MAAM,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC;YAChC,MAAM,KAAK,GAAG,SAAS,CAAC,KAAK,CAAC;YAC9B,MAAM,KAAK,GAAG,SAAS,CAAC,QAAQ,EAAE,CAAC;YACnC,MAAM,cAAc,GAAG,SAAS,CAAC,OAAO,EAAE,CAAC;YAE3C,IAAI,MAAM,CAAC,GAAG,KAAK,KAAK,CAAC,GAAG,IAAI,MAAM,CAAC,MAAM,KAAK,KAAK,CAAC,MAAM,EAAE,CAAC;gBAC/D,OAAO;YACT,CAAC;YAED,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE,EAAE;gBAC1B,oDAAoD;gBACpD,6DAA6D;gBAC7D,IAAI,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC;oBACtB,oEAAoE;oBACpE,IAAI,QAAQ,GAAG,IAAI,CAAC;oBACpB,IAAI,GAAG,KAAK,CAAC,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;wBACrC,QAAQ,GAAG,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC;oBAC9D,CAAC;oBACD,IAAI,GAAG,KAAK,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;wBAC7B,QAAQ,GAAG,QAAQ,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC;oBAC7D,CAAC;oBACD;;;;;;uBAMG;oBACH,6DAA6D;oBAC7D,MAAM,iBAAiB,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;oBAC5C,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,IAAI,WAAW,CAAC,iBAAiB,CAAC,EAAE,CAAC;wBACzD,QAAQ,GAAG,iBAAiB,CAAC;oBAC/B,CAAC;oBAED,IAAI,QAAQ,CAAC,OAAO,KAAK,EAAE,EAAE,CAAC;wBAC5B,QAAQ,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;oBACxB,CAAC;oBACD,IAAI,QAAQ,CAAC,QAAQ,KAAK,CAAC,EAAE,CAAC;wBAC5B,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;oBACxB,CAAC;oBACD,MAAM,mBAAmB,GACvB,sCAAsC,CAAC,QAAQ,CAAC,CAAC;oBACnD,IAAI,mBAAmB,CAAC,QAAQ,KAAK,CAAC,EAAE,CAAC;wBACvC,mBAAmB,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;oBACpC,CAAC;oBACD,IAAI,mBAAmB,CAAC,QAAQ,KAAK,CAAC,EAAE,CAAC;wBACvC,mBAAmB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;oBACnC,CAAC;oBACD,IAAI,GAAG,QAAQ,CAAC;gBAClB,CAAC;qBAAM,IAAI,cAAc,CAAC,IAAI,CAAC,IAAI,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC;oBACtD,IAAI,CAAC,OAAO,CAAC,oBAAoB,EAAE,EAAE,IAAI,CAAC,CAAC;gBAC7C,CAAC;qBAAM,IAAI,qBAAqB,CAAC,IAAI,CAAC,EAAE,CAAC;oBACvC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;gBACrB,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC,CAAC,CAAC;AACL,CAAC,CAAC"}
\ No newline at end of file
+{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../src/plugins/ToolbarPlugin/utils.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.d.ts
index 41046f3..1f16dd3 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.d.ts
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.d.ts
@@ -10,6 +10,8 @@ export * from './HorizontalRulePlugin';
 export * from './ImagesPlugin';
 export * from './JupyterCellPlugin';
 export * from './JupyterInputOutputPlugin';
+export * from './LexicalInlineCompletionPlugin';
+export * from './LexicalStatePlugin';
 export * from './ListMaxIndentLevelPlugin';
 export * from './MarkdownPlugin';
 export * from './NbformatContentPlugin';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.js b/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.js
index 82c6cd1..2853778 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.js
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.js
@@ -15,6 +15,8 @@ export * from './HorizontalRulePlugin';
 export * from './ImagesPlugin';
 export * from './JupyterCellPlugin';
 export * from './JupyterInputOutputPlugin';
+export * from './LexicalInlineCompletionPlugin';
+export * from './LexicalStatePlugin';
 export * from './ListMaxIndentLevelPlugin';
 export * from './MarkdownPlugin';
 export * from './NbformatContentPlugin';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.js.map
index 82bc121..28ee777 100644
--- a/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.js.map
+++ b/node_modules/@datalayer/jupyter-lexical/lib/plugins/index.js.map
@@ -1 +1 @@
-{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/plugins/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,cAAc,mBAAmB,CAAC;AAClC,cAAc,kBAAkB,CAAC;AACjC,cAAc,wBAAwB,CAAC;AACvC,cAAc,iBAAiB,CAAC;AAChC,cAAc,6BAA6B,CAAC;AAC5C,cAAc,wBAAwB,CAAC;AACvC,cAAc,mBAAmB,CAAC;AAClC,cAAc,mCAAmC,CAAC;AAClD,cAAc,wBAAwB,CAAC;AACvC,cAAc,gBAAgB,CAAC;AAC/B,cAAc,qBAAqB,CAAC;AACpC,cAAc,4BAA4B,CAAC;AAC3C,cAAc,4BAA4B,CAAC;AAC3C,cAAc,kBAAkB,CAAC;AACjC,cAAc,yBAAyB,CAAC;AACxC,cAAc,mBAAmB,CAAC;AAClC,cAAc,yBAAyB,CAAC;AACxC,cAAc,iBAAiB,CAAC;AAChC,cAAc,kBAAkB,CAAC;AACjC,cAAc,iBAAiB,CAAC"}
\ No newline at end of file
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/plugins/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,cAAc,mBAAmB,CAAC;AAClC,cAAc,kBAAkB,CAAC;AACjC,cAAc,wBAAwB,CAAC;AACvC,cAAc,iBAAiB,CAAC;AAChC,cAAc,6BAA6B,CAAC;AAC5C,cAAc,wBAAwB,CAAC;AACvC,cAAc,mBAAmB,CAAC;AAClC,cAAc,mCAAmC,CAAC;AAClD,cAAc,wBAAwB,CAAC;AACvC,cAAc,gBAAgB,CAAC;AAC/B,cAAc,qBAAqB,CAAC;AACpC,cAAc,4BAA4B,CAAC;AAC3C,cAAc,iCAAiC,CAAC;AAChD,cAAc,sBAAsB,CAAC;AACrC,cAAc,4BAA4B,CAAC;AAC3C,cAAc,kBAAkB,CAAC;AACjC,cAAc,yBAAyB,CAAC;AACxC,cAAc,mBAAmB,CAAC;AAClC,cAAc,yBAAyB,CAAC;AACxC,cAAc,iBAAiB,CAAC;AAChC,cAAc,kBAAkB,CAAC;AACjC,cAAc,iBAAiB,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.d.ts
new file mode 100644
index 0000000..b8e97ef
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.d.ts
@@ -0,0 +1,141 @@
+/**
+ * Adapter for Lexical editor operations.
+ *
+ * This adapter provides a clean API for document manipulation,
+ * handling the complexity of different node types (simple nodes vs.
+ * plugin-based nodes like jupyter-cell, image, equation).
+ *
+ * Mirrors the Notebook2Adapter pattern for consistency across the codebase.
+ *
+ * @module tools/state/LexicalAdapter
+ */
+import type { LexicalEditor } from 'lexical';
+import type { LexicalBlock, BlockFormat, BriefBlock } from '../tools/core/types';
+/**
+ * Result of a document operation
+ */
+export interface OperationResult {
+    success: boolean;
+    error?: string;
+    blockId?: string;
+    execution_count?: number | null;
+    outputs?: any[];
+    elapsed_time?: number;
+    message?: string;
+}
+/**
+ * Adapter for high-level Lexical document operations.
+ * Wraps the LexicalEditor and provides a clean API for tool operations.
+ *
+ * This class mirrors Notebook2Adapter, providing:
+ * - State management compatibility
+ * - Consistent API surface for tool operations
+ * - Separation of concerns between state and editor
+ */
+export declare class LexicalAdapter {
+    private _editor;
+    private _defaultBlockType;
+    private _serviceManager?;
+    constructor(editor: LexicalEditor, serviceManager?: any);
+    /**
+     * Get the underlying Lexical editor instance.
+     */
+    get editor(): LexicalEditor;
+    /**
+     * Set the default block type for new blocks.
+     * Similar to Notebook2Adapter.setDefaultCellType()
+     */
+    setDefaultBlockType(type: string): void;
+    /**
+     * Get the default block type for new blocks.
+     */
+    get defaultBlockType(): string;
+    /**
+     * Get all blocks from the document.
+     * Uses editorStateToBlocks which handles jupyter-input/output node merging.
+     *
+     * @param format - Response format: 'brief' (block_id + block_type only) or 'detailed' (full content)
+     */
+    getBlocks(format?: BlockFormat): Promise<LexicalBlock[] | BriefBlock[]>;
+    /**
+     * Get a specific block by index.
+     * Uses editorStateToBlocks to ensure jupyter-input/output nodes are properly merged.
+     * Always returns detailed format (single block operations need full content).
+     */
+    getBlock(index: number): Promise<LexicalBlock | null>;
+    /**
+     * Get a block by ID.
+     * Uses editorStateToBlocks to ensure jupyter-input/output nodes are properly merged.
+     * Always returns detailed format (single block operations need full content).
+     */
+    getBlockById(blockId: string): Promise<LexicalBlock | null>;
+    /**
+     * Get the count of blocks in the document
+     */
+    getBlockCount(): Promise<number>;
+    /**
+     * Insert a block into the document.
+     * Handles all block types including complex ones like jupyter-cell.
+     *
+     * @param block - Block to insert
+     * @param afterBlockId - Insert after this block ID ('TOP', 'BOTTOM', or actual ID)
+     */
+    insertBlock(block: LexicalBlock, afterBlockId: string): Promise<OperationResult>;
+    /**
+     * Delete a block by ID
+     */
+    deleteBlock(blockId: string): Promise<OperationResult>;
+    /**
+     * Update a block by ID
+     */
+    updateBlock(blockId: string, block: LexicalBlock): Promise<OperationResult>;
+    /**
+     * Run a specific block (jupyter-cell or jupyter-input)
+     */
+    runBlock(blockId: string): Promise<OperationResult>;
+    /**
+     * Run all executable blocks in the document
+     */
+    runAllBlocks(): Promise<OperationResult>;
+    /**
+     * Check if a block type requires command-based insertion
+     */
+    private requiresCommand;
+    /**
+     * Insert a block using editor commands (for complex types)
+     */
+    private insertViaCommand;
+    /**
+     * Insert a block using direct node creation (for simple types)
+     */
+    private insertViaNode;
+    /**
+     * Create a simple Lexical node from a block
+     */
+    private createSimpleNode;
+    /**
+     * Execute code directly in the kernel without creating a block.
+     *
+     * This method sends code execution requests directly to the kernel,
+     * bypassing the lexical document model. Useful for:
+     * - Variable inspection
+     * - Environment setup
+     * - Background tasks
+     * - Tool introspection
+     *
+     * @param code - Code to execute (optional, defaults to empty string)
+     * @param storeHistory - Whether to store execution in kernel history (defaults to true)
+     * @param silent - Whether to suppress output (defaults to false)
+     * @param stopOnError - Whether to stop execution on error (defaults to true)
+     * @returns Promise with execution result including outputs
+     */
+    executeCode(code?: string, storeHistory?: boolean, silent?: boolean, stopOnError?: boolean): Promise<{
+        success: boolean;
+        outputs?: Array<{
+            type: 'stream' | 'execute_result' | 'display_data' | 'error';
+            content: unknown;
+        }>;
+        executionCount?: number;
+        error?: string;
+    }>;
+}
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.js b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.js
new file mode 100644
index 0000000..c68f9c4
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.js
@@ -0,0 +1,703 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { $getRoot, $createParagraphNode, $createTextNode } from 'lexical';
+import { $createHeadingNode, $createQuoteNode, } from '@lexical/rich-text';
+import { $createCodeNode } from '@lexical/code';
+import { $createListNode, $createListItemNode } from '@lexical/list';
+import { $createHorizontalRuleNode } from '@lexical/react/LexicalHorizontalRuleNode';
+import { editorStateToBlocks } from '../tools/utils/blocks';
+/**
+ * Adapter for high-level Lexical document operations.
+ * Wraps the LexicalEditor and provides a clean API for tool operations.
+ *
+ * This class mirrors Notebook2Adapter, providing:
+ * - State management compatibility
+ * - Consistent API surface for tool operations
+ * - Separation of concerns between state and editor
+ */
+export class LexicalAdapter {
+    _editor;
+    _defaultBlockType = 'paragraph';
+    _serviceManager; // ServiceManager from @jupyterlab/services
+    constructor(editor, serviceManager) {
+        this._editor = editor;
+        this._serviceManager = serviceManager;
+    }
+    /**
+     * Get the underlying Lexical editor instance.
+     */
+    get editor() {
+        return this._editor;
+    }
+    /**
+     * Set the default block type for new blocks.
+     * Similar to Notebook2Adapter.setDefaultCellType()
+     */
+    setDefaultBlockType(type) {
+        this._defaultBlockType = type;
+    }
+    /**
+     * Get the default block type for new blocks.
+     */
+    get defaultBlockType() {
+        return this._defaultBlockType;
+    }
+    /**
+     * Get all blocks from the document.
+     * Uses editorStateToBlocks which handles jupyter-input/output node merging.
+     *
+     * @param format - Response format: 'brief' (block_id + block_type only) or 'detailed' (full content)
+     */
+    async getBlocks(format = 'brief') {
+        return new Promise(resolve => {
+            const blocks = editorStateToBlocks(this._editor, format);
+            resolve(blocks);
+        });
+    }
+    /**
+     * Get a specific block by index.
+     * Uses editorStateToBlocks to ensure jupyter-input/output nodes are properly merged.
+     * Always returns detailed format (single block operations need full content).
+     */
+    async getBlock(index) {
+        return new Promise(resolve => {
+            const blocks = editorStateToBlocks(this._editor, 'detailed');
+            if (index >= 0 && index < blocks.length) {
+                resolve(blocks[index]);
+            }
+            else {
+                resolve(null);
+            }
+        });
+    }
+    /**
+     * Get a block by ID.
+     * Uses editorStateToBlocks to ensure jupyter-input/output nodes are properly merged.
+     * Always returns detailed format (single block operations need full content).
+     */
+    async getBlockById(blockId) {
+        return new Promise(resolve => {
+            const blocks = editorStateToBlocks(this._editor, 'detailed');
+            const block = blocks.find(b => b.block_id === blockId);
+            resolve(block || null);
+        });
+    }
+    /**
+     * Get the count of blocks in the document
+     */
+    async getBlockCount() {
+        const blocks = await this.getBlocks();
+        return blocks.length;
+    }
+    /**
+     * Insert a block into the document.
+     * Handles all block types including complex ones like jupyter-cell.
+     *
+     * @param block - Block to insert
+     * @param afterBlockId - Insert after this block ID ('TOP', 'BOTTOM', or actual ID)
+     */
+    async insertBlock(block, afterBlockId) {
+        // Debug logging removed to satisfy ESLint no-console rule
+        // console.log(`[LexicalAdapter] insertBlock: type=${block.block_type}, afterBlockId=${afterBlockId}`);
+        // Handle special block types that require commands
+        if (this.requiresCommand(block.block_type)) {
+            return this.insertViaCommand(block, afterBlockId);
+        }
+        // Handle simple block types via direct node creation
+        return this.insertViaNode(block, afterBlockId);
+    }
+    /**
+     * Delete a block by ID
+     */
+    async deleteBlock(blockId) {
+        return new Promise(resolve => {
+            this._editor.update(() => {
+                try {
+                    const root = $getRoot();
+                    const children = root.getChildren();
+                    const node = children.find(child => child.getKey() === blockId);
+                    if (!node) {
+                        resolve({
+                            success: false,
+                            error: `Block with ID ${blockId} not found`,
+                        });
+                        return;
+                    }
+                    node.remove();
+                    resolve({ success: true });
+                }
+                catch (error) {
+                    resolve({
+                        success: false,
+                        error: error instanceof Error ? error.message : String(error),
+                    });
+                }
+            });
+        });
+    }
+    /**
+     * Update a block by ID
+     */
+    async updateBlock(blockId, block) {
+        // For now, implement as delete + insert
+        const deleteResult = await this.deleteBlock(blockId);
+        if (!deleteResult.success) {
+            return deleteResult;
+        }
+        // Find the block before the deleted one to insert after it
+        const blocks = await this.getBlocks();
+        const deletedIndex = blocks.findIndex(b => b.block_id === blockId);
+        const insertAfterId = deletedIndex > 0 ? blocks[deletedIndex - 1].block_id : 'TOP';
+        return this.insertBlock(block, insertAfterId);
+    }
+    /**
+     * Run a specific block (jupyter-cell or jupyter-input)
+     */
+    async runBlock(blockId) {
+        const block = await this.getBlockById(blockId);
+        if (!block) {
+            return {
+                success: false,
+                error: `Block with ID ${blockId} not found`,
+            };
+        }
+        // Accept both jupyter-cell (parent) and jupyter-input (child with actual code)
+        const executableTypes = ['jupyter-cell', 'jupyter-input'];
+        if (!executableTypes.includes(block.block_type)) {
+            return {
+                success: false,
+                error: `Block type ${block.block_type} is not executable`,
+            };
+        }
+        // Execute the block and collect results
+        try {
+            const startTime = Date.now();
+            // Find the nodes and execute
+            const result = await new Promise((resolve, reject) => {
+                this._editor.update(() => {
+                    try {
+                        const root = $getRoot();
+                        let jupyterOutputNode = null;
+                        let code = '';
+                        // Find the jupyter-input and jupyter-output nodes
+                        const findNodes = (node) => {
+                            if (node.getType() === 'jupyter-cell' &&
+                                node.getKey() === blockId) {
+                                // Found the jupyter-cell, get its children
+                                const children = node.getChildren();
+                                children.forEach((child) => {
+                                    if (child.getType() === 'jupyter-input') {
+                                        code = child.getTextContent();
+                                    }
+                                    else if (child.getType() === 'jupyter-output') {
+                                        jupyterOutputNode = child;
+                                    }
+                                });
+                            }
+                            else if (node.getType() === 'jupyter-input' &&
+                                node.getKey() === blockId) {
+                                code = node.getTextContent();
+                                // Find corresponding output node (sibling)
+                                const parent = node.getParent();
+                                if (parent) {
+                                    parent.getChildren().forEach((sibling) => {
+                                        if (sibling.getType() === 'jupyter-output') {
+                                            jupyterOutputNode = sibling;
+                                        }
+                                    });
+                                }
+                            }
+                        };
+                        // Search through document
+                        root.getChildren().forEach(findNodes);
+                        if (!jupyterOutputNode) {
+                            reject(new Error('Could not find jupyter-output node for execution'));
+                            return;
+                        }
+                        if (!code || code.trim() === '') {
+                            reject(new Error('No code to execute'));
+                            return;
+                        }
+                        // Call executeCode() on the output node
+                        // This triggers execution and updates the UI
+                        jupyterOutputNode.executeCode(code);
+                        // Get the outputAdapter to await execution
+                        const outputAdapter = jupyterOutputNode.__outputAdapter;
+                        if (!outputAdapter) {
+                            reject(new Error('No outputAdapter available'));
+                            return;
+                        }
+                        resolve({ outputAdapter, code });
+                    }
+                    catch (error) {
+                        reject(error);
+                    }
+                });
+            });
+            // Wait for execution to complete (outputAdapter.execute is async)
+            // We need to wait a bit for the execution to finish and outputs to be collected
+            await new Promise(r => setTimeout(r, 500));
+            // Get the outputs from the outputAdapter
+            const outputs = result.outputAdapter.outputArea.model.toJSON();
+            const elapsed_time = (Date.now() - startTime) / 1000;
+            const adapterResult = {
+                success: true,
+                execution_count: outputs.length > 0 ? 1 : null,
+                outputs: outputs,
+                elapsed_time,
+                message: `Block executed in ${elapsed_time.toFixed(2)}s`,
+            };
+            return adapterResult;
+        }
+        catch (error) {
+            const errorMessage = error instanceof Error ? error.message : String(error);
+            return {
+                success: false,
+                error: `Failed to execute block: ${errorMessage}`,
+            };
+        }
+    }
+    /**
+     * Run all executable blocks in the document
+     */
+    async runAllBlocks() {
+        const blocks = await this.getBlocks();
+        const executableBlocks = blocks.filter(b => b.block_type === 'jupyter-cell');
+        // Debug logging removed to satisfy ESLint no-console rule
+        // console.log(`[LexicalAdapter] Running ${executableBlocks.length} executable blocks`);
+        for (const block of executableBlocks) {
+            const result = await this.runBlock(block.block_id);
+            if (!result.success) {
+                return {
+                    success: false,
+                    error: `Failed to run block ${block.block_id}: ${result.error}`,
+                };
+            }
+        }
+        return {
+            success: true,
+            blockId: executableBlocks.length > 0
+                ? executableBlocks[executableBlocks.length - 1].block_id
+                : undefined,
+        };
+    }
+    /**
+     * Check if a block type requires command-based insertion
+     */
+    requiresCommand(blockType) {
+        return ['jupyter-cell', 'image', 'equation'].includes(blockType);
+    }
+    /**
+     * Insert a block using editor commands (for complex types)
+     */
+    async insertViaCommand(block, afterBlockId) {
+        // Debug logging removed to satisfy ESLint no-console rule
+        // console.log(`[LexicalAdapter] Inserting ${block.block_type} via command`);
+        // eslint-disable-next-line no-async-promise-executor
+        return new Promise(async (resolve) => {
+            try {
+                // Handle different block types that require command insertion
+                if (block.block_type === 'equation') {
+                    // Import equation command dynamically
+                    const { INSERT_EQUATION_COMMAND } = await import('../plugins/EquationsPlugin');
+                    // Extract equation data from block
+                    const source = Array.isArray(block.source)
+                        ? block.source.join('\n')
+                        : block.source;
+                    const equation = block.metadata?.equation ||
+                        block.metadata?.latex ||
+                        source;
+                    // Equations are always display mode (inline: false), never inline
+                    const inline = false;
+                    // Create marker and dispatch equation insertion
+                    this._editor.update(() => {
+                        const root = $getRoot();
+                        const children = root.getChildren();
+                        // Create a temporary marker paragraph
+                        const marker = $createParagraphNode();
+                        marker.append($createTextNode('__EQUATION_MARKER__'));
+                        // Insert marker at the target position
+                        if (afterBlockId === 'TOP') {
+                            if (children.length > 0) {
+                                children[0].insertBefore(marker);
+                            }
+                            else {
+                                root.append(marker);
+                            }
+                        }
+                        else if (afterBlockId === 'BOTTOM' || !afterBlockId) {
+                            root.append(marker);
+                        }
+                        else {
+                            const targetBlock = children.find(child => child.getKey() === afterBlockId);
+                            if (targetBlock) {
+                                targetBlock.insertAfter(marker);
+                            }
+                            else {
+                                throw new Error(`Block ID ${afterBlockId} not found`);
+                            }
+                        }
+                    });
+                    // Dispatch the equation command
+                    setTimeout(() => {
+                        this._editor.update(() => {
+                            // Find and select the marker
+                            const root = $getRoot();
+                            const children = root.getChildren();
+                            const markerNode = children.find(child => child.getType() === 'paragraph' &&
+                                child.getTextContent() === '__EQUATION_MARKER__');
+                            if (markerNode) {
+                                markerNode.selectEnd();
+                                markerNode.remove();
+                            }
+                        });
+                        // Dispatch the insert command
+                        this._editor.dispatchCommand(INSERT_EQUATION_COMMAND, {
+                            equation,
+                            inline,
+                        });
+                        resolve({ success: true });
+                    }, 10);
+                }
+                else if (block.block_type === 'jupyter-cell') {
+                    // Import jupyter command dynamically
+                    const { INSERT_JUPYTER_INPUT_OUTPUT_COMMAND } = await import('../plugins/JupyterInputOutputPlugin');
+                    // For jupyter-cell, we need to:
+                    // 1. Create a placeholder paragraph at the target location
+                    // 2. Dispatch the command to insert the jupyter cell
+                    // 3. Remove the placeholder
+                    this._editor.update(() => {
+                        const root = $getRoot();
+                        const children = root.getChildren();
+                        // Create a temporary marker paragraph
+                        const marker = $createParagraphNode();
+                        marker.append($createTextNode('__JUPYTER_CELL_MARKER__'));
+                        // Insert marker at the target position
+                        if (afterBlockId === 'TOP') {
+                            if (children.length > 0) {
+                                children[0].insertBefore(marker);
+                            }
+                            else {
+                                root.append(marker);
+                            }
+                        }
+                        else if (afterBlockId === 'BOTTOM' || !afterBlockId) {
+                            root.append(marker);
+                        }
+                        else {
+                            const targetBlock = children.find(child => child.getKey() === afterBlockId);
+                            if (targetBlock) {
+                                targetBlock.insertAfter(marker);
+                            }
+                            else {
+                                throw new Error(`Block ID ${afterBlockId} not found`);
+                            }
+                        }
+                    });
+                    // Now dispatch the command to insert jupyter cell
+                    const source = Array.isArray(block.source)
+                        ? block.source.join('\n')
+                        : block.source;
+                    const commandPayload = {
+                        code: source,
+                        outputs: (block.metadata?.outputs || []),
+                        loading: '',
+                    };
+                    // Dispatch the command - this will be handled by the jupyter plugin
+                    setTimeout(() => {
+                        this._editor.update(() => {
+                            // Find and select the marker
+                            const root = $getRoot();
+                            const children = root.getChildren();
+                            const markerNode = children.find(child => child.getType() === 'paragraph' &&
+                                child.getTextContent() === '__JUPYTER_CELL_MARKER__');
+                            if (markerNode) {
+                                // Select the marker node before removing it
+                                // This ensures the INSERT command will insert at this position
+                                markerNode.selectEnd();
+                                // Remove the marker - the command will insert at selection
+                                markerNode.remove();
+                            }
+                        });
+                        // Dispatch the insert command
+                        this._editor.dispatchCommand(INSERT_JUPYTER_INPUT_OUTPUT_COMMAND, commandPayload);
+                        resolve({ success: true });
+                    }, 10);
+                }
+                else {
+                    resolve({
+                        success: false,
+                        error: `Unsupported command-based block type: ${block.block_type}`,
+                    });
+                }
+            }
+            catch (error) {
+                resolve({
+                    success: false,
+                    error: error instanceof Error ? error.message : String(error),
+                });
+            }
+        });
+    }
+    /**
+     * Insert a block using direct node creation (for simple types)
+     */
+    async insertViaNode(block, afterBlockId) {
+        // Debug logging removed to satisfy ESLint no-console rule
+        // console.log(`[LexicalAdapter] Inserting ${block.block_type} via node creation`);
+        return new Promise(resolve => {
+            this._editor.update(() => {
+                try {
+                    const root = $getRoot();
+                    const node = this.createSimpleNode(block);
+                    if (!node) {
+                        resolve({
+                            success: false,
+                            error: `Failed to create node for type: ${block.block_type}`,
+                        });
+                        return;
+                    }
+                    const children = root.getChildren();
+                    // Insert at target position
+                    if (afterBlockId === 'TOP') {
+                        if (children.length > 0) {
+                            children[0].insertBefore(node);
+                        }
+                        else {
+                            root.append(node);
+                        }
+                    }
+                    else if (afterBlockId === 'BOTTOM' || !afterBlockId) {
+                        root.append(node);
+                    }
+                    else {
+                        const targetBlock = children.find(child => child.getKey() === afterBlockId);
+                        if (targetBlock) {
+                            targetBlock.insertAfter(node);
+                        }
+                        else {
+                            resolve({
+                                success: false,
+                                error: `Block ID ${afterBlockId} not found`,
+                            });
+                            return;
+                        }
+                    }
+                    resolve({ success: true, blockId: node.getKey() });
+                }
+                catch (error) {
+                    resolve({
+                        success: false,
+                        error: error instanceof Error ? error.message : String(error),
+                    });
+                }
+            });
+        });
+    }
+    /**
+     * Create a simple Lexical node from a block
+     */
+    createSimpleNode(block) {
+        const textContent = Array.isArray(block.source)
+            ? block.source.join('\n')
+            : block.source;
+        const createTextNodes = () => {
+            if (block.formatting && block.formatting.length > 0) {
+                return block.formatting.map(seg => {
+                    const textNode = $createTextNode(seg.text);
+                    if (seg.format) {
+                        textNode.setFormat(seg.format);
+                    }
+                    return textNode;
+                });
+            }
+            else {
+                return [
+                    textContent ? $createTextNode(textContent) : $createTextNode(''),
+                ];
+            }
+        };
+        switch (block.block_type) {
+            case 'paragraph': {
+                const paragraph = $createParagraphNode();
+                createTextNodes().forEach(node => paragraph.append(node));
+                return paragraph;
+            }
+            case 'heading': {
+                const level = block.metadata?.level || 1;
+                const tag = `h${level}`;
+                const heading = $createHeadingNode(tag);
+                createTextNodes().forEach(node => heading.append(node));
+                return heading;
+            }
+            case 'code': {
+                const language = block.metadata?.language || 'plaintext';
+                const code = $createCodeNode(language);
+                code.append($createTextNode(textContent));
+                return code;
+            }
+            case 'quote': {
+                const quote = $createQuoteNode();
+                createTextNodes().forEach(node => quote.append(node));
+                return quote;
+            }
+            case 'list': {
+                const listType = block.metadata?.listType || 'bullet';
+                const list = $createListNode(listType);
+                // Parse source into individual list items (split by newlines)
+                const items = textContent
+                    .split('\n')
+                    .map(line => line.trim())
+                    .filter(line => line.length > 0);
+                // If no items provided, create one empty item
+                if (items.length === 0) {
+                    const listItem = $createListItemNode();
+                    list.append(listItem);
+                }
+                else {
+                    // Create a list item for each line
+                    items.forEach(itemText => {
+                        const listItem = $createListItemNode();
+                        listItem.append($createTextNode(itemText));
+                        list.append(listItem);
+                    });
+                }
+                return list;
+            }
+            case 'horizontalrule': {
+                return $createHorizontalRuleNode();
+            }
+            case 'listitem': {
+                const listItem = $createListItemNode();
+                if (block.metadata?.checked !== undefined) {
+                    listItem.setChecked(block.metadata.checked);
+                }
+                createTextNodes().forEach(node => listItem.append(node));
+                return listItem;
+            }
+            default:
+                return null;
+        }
+    }
+    /**
+     * Execute code directly in the kernel without creating a block.
+     *
+     * This method sends code execution requests directly to the kernel,
+     * bypassing the lexical document model. Useful for:
+     * - Variable inspection
+     * - Environment setup
+     * - Background tasks
+     * - Tool introspection
+     *
+     * @param code - Code to execute (optional, defaults to empty string)
+     * @param storeHistory - Whether to store execution in kernel history (defaults to true)
+     * @param silent - Whether to suppress output (defaults to false)
+     * @param stopOnError - Whether to stop execution on error (defaults to true)
+     * @returns Promise with execution result including outputs
+     */
+    async executeCode(code, storeHistory, silent, stopOnError) {
+        // Handle empty/undefined code with default
+        const codeToExecute = code || '';
+        if (!codeToExecute.trim()) {
+            return {
+                success: false,
+                error: 'Code parameter is required and cannot be empty',
+            };
+        }
+        if (!this._serviceManager) {
+            return {
+                success: false,
+                error: 'No ServiceManager available. LexicalAdapter requires a ServiceManager to execute code.',
+            };
+        }
+        // Get a running kernel connection from serviceManager
+        let kernel = null;
+        try {
+            // Refresh the list of running kernels
+            await this._serviceManager.kernels.refreshRunning();
+            const runningKernels = Array.from(this._serviceManager.kernels.running());
+            if (runningKernels.length === 0) {
+                return {
+                    success: false,
+                    error: 'No active kernel found. Please start a kernel first.',
+                };
+            }
+            // Get the first running kernel model
+            const kernelModel = runningKernels[0];
+            // IMPORTANT: await the connectTo call to get the actual kernel connection
+            kernel = await this._serviceManager.kernels.connectTo({
+                model: kernelModel,
+            });
+        }
+        catch (err) {
+            return {
+                success: false,
+                error: `Failed to connect to kernel: ${err instanceof Error ? err.message : String(err)}`,
+            };
+        }
+        if (!kernel || typeof kernel.requestExecute !== 'function') {
+            return {
+                success: false,
+                error: 'Kernel connection does not have requestExecute method.',
+            };
+        }
+        try {
+            // Apply defaults in adapter layer
+            const future = kernel.requestExecute({
+                code: codeToExecute,
+                stop_on_error: stopOnError ?? true,
+                store_history: storeHistory ?? true,
+                silent: silent ?? false,
+                allow_stdin: false,
+            });
+            const outputs = [];
+            let executionCount;
+            // Collect outputs
+            future.onIOPub = (msg) => {
+                const msgType = msg.header.msg_type;
+                if (msgType === 'stream') {
+                    outputs.push({
+                        type: 'stream',
+                        content: msg.content,
+                    });
+                }
+                else if (msgType === 'execute_result') {
+                    outputs.push({
+                        type: 'execute_result',
+                        content: msg.content,
+                    });
+                    executionCount = msg.content.execution_count;
+                }
+                else if (msgType === 'display_data') {
+                    outputs.push({
+                        type: 'display_data',
+                        content: msg.content,
+                    });
+                }
+                else if (msgType === 'error') {
+                    outputs.push({
+                        type: 'error',
+                        content: msg.content,
+                    });
+                }
+            };
+            // Wait for execution to complete
+            await future.done;
+            return {
+                success: true,
+                outputs,
+                executionCount,
+            };
+        }
+        catch (error) {
+            return {
+                success: false,
+                error: error instanceof Error ? error.message : String(error),
+            };
+        }
+    }
+}
+//# sourceMappingURL=LexicalAdapter.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.js.map b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.js.map
new file mode 100644
index 0000000..5d69486
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalAdapter.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"LexicalAdapter.js","sourceRoot":"","sources":["../../src/state/LexicalAdapter.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.d.ts
new file mode 100644
index 0000000..0660220
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.d.ts
@@ -0,0 +1,87 @@
+import { LexicalAdapter } from './LexicalAdapter';
+import type { LexicalBlock, BlockFormat, BriefBlock } from '../tools/core/types';
+/**
+ * State for a single Lexical document
+ */
+export type ILexicalState = {
+    adapter?: LexicalAdapter;
+};
+/**
+ * Root state containing all Lexical documents
+ */
+export interface ILexicalsState {
+    lexicals: Map<string, ILexicalState>;
+}
+/**
+ * Mutation types for tool operations
+ * These align with the tool operation parameters
+ */
+export type InsertBlockMutation = {
+    id: string;
+    type: string;
+    source: string;
+    properties?: Record<string, unknown>;
+    afterId: string;
+};
+export type InsertBlocksMutation = {
+    id: string;
+    blocks: Array<{
+        type: string;
+        source: string;
+        properties?: Record<string, unknown>;
+    }>;
+    afterId: string;
+};
+export type UpdateBlockMutation = {
+    id: string;
+    blockId: string;
+    type?: string;
+    source?: string;
+    properties?: Record<string, unknown>;
+};
+export type DeleteBlockMutation = {
+    id: string;
+    blockId: string;
+};
+export type ReadBlockMutation = {
+    id: string;
+    blockId: string;
+};
+/**
+ * Full Lexical state interface with all methods
+ */
+export type LexicalState = ILexicalsState & {
+    setLexicals: (lexicals: Map<string, ILexicalState>) => void;
+    selectLexical: (id: string) => ILexicalState | undefined;
+    selectLexicalAdapter: (id: string) => LexicalAdapter | undefined;
+    insertBlock: (id: string, type?: string, source?: string, properties?: Record<string, unknown>, afterId?: string) => Promise<void>;
+    updateBlock: (id: string, blockId?: string, type?: string, source?: string, properties?: Record<string, unknown>) => Promise<void>;
+    deleteBlock: (id: string, blockId?: string) => Promise<void>;
+    readBlock: (id: string, blockId?: string) => Promise<LexicalBlock | null>;
+    readAllBlocks: (id: string, format?: BlockFormat) => Promise<LexicalBlock[] | BriefBlock[]>;
+    runBlock: (id: string, blockId?: string) => Promise<any>;
+    runAllBlocks: (id: string) => Promise<any>;
+    executeCode: (id: string, code?: string, storeHistory?: boolean, silent?: boolean, stopOnError?: boolean) => Promise<any>;
+    getBlockCount: (id: string) => Promise<number>;
+    reset: () => void;
+};
+/**
+ * Create the Lexical store with Zustand
+ */
+export declare const lexicalStore: import("zustand").StoreApi<LexicalState>;
+/**
+ * React hook for using Lexical store
+ * Supports both full state and selector patterns
+ * Renamed from useLexicalState to match Notebook2 pattern (useNotebookStore2)
+ *
+ * @example
+ * // Get full state
+ * const state = useLexicalStore();
+ *
+ * @example
+ * // Use selector for performance
+ * const adapter = useLexicalStore(state => state.selectLexicalAdapter('doc1'));
+ */
+export declare function useLexicalStore(): LexicalState;
+export declare function useLexicalStore<T>(selector: (state: LexicalState) => T): T;
+export default useLexicalStore;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.js b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.js
new file mode 100644
index 0000000..dd472fb
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.js
@@ -0,0 +1,145 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Zustand state management for Lexical editors.
+ *
+ * Mirrors Notebook2State pattern for consistency across the codebase.
+ * Provides centralized state management for multiple Lexical documents.
+ *
+ * @module tools/state/LexicalState
+ */
+import { createStore } from 'zustand/vanilla';
+import { useStore } from 'zustand';
+/**
+ * Create the Lexical store with Zustand
+ */
+export const lexicalStore = createStore((set, get) => ({
+    lexicals: new Map(),
+    setLexicals: (lexicals) => set(() => ({ lexicals })),
+    selectLexical: (id) => {
+        return get().lexicals.get(id);
+    },
+    selectLexicalAdapter: (id) => {
+        return get().lexicals.get(id)?.adapter;
+    },
+    // Tool operations - thin wrappers delegating to adapter
+    insertBlock: async (id, type, source, properties, afterId) => {
+        // Accept object from executor, destructure it
+        const params = typeof id === 'object'
+            ? id
+            : { id, type, source, properties, afterId };
+        const adapter = get().lexicals.get(params.id)?.adapter;
+        if (!adapter) {
+            throw new Error(`Lexical document ${params.id} not found`);
+        }
+        const block = {
+            block_id: '', // Will be assigned by editor
+            block_type: params.type,
+            source: params.source,
+            metadata: params.properties,
+        };
+        const result = await adapter.insertBlock(block, params.afterId);
+        if (!result.success) {
+            throw new Error(result.error || 'Failed to insert block');
+        }
+    },
+    updateBlock: async (id, blockId, type, source, properties) => {
+        // Accept object from executor, destructure it
+        const params = typeof id === 'object'
+            ? id
+            : { id, blockId, type, source, properties };
+        const adapter = get().lexicals.get(params.id)?.adapter;
+        if (!adapter) {
+            throw new Error(`Lexical document ${params.id} not found`);
+        }
+        // Get the existing block first
+        const existingBlock = await adapter.getBlockById(params.blockId);
+        if (!existingBlock) {
+            throw new Error(`Block ${params.blockId} not found`);
+        }
+        // Merge updates with existing block
+        const updatedBlock = {
+            ...existingBlock,
+            block_type: params.type ?? existingBlock.block_type,
+            source: params.source ?? existingBlock.source,
+            metadata: {
+                ...existingBlock.metadata,
+                ...params.properties,
+            },
+        };
+        const result = await adapter.updateBlock(params.blockId, updatedBlock);
+        if (!result.success) {
+            throw new Error(result.error || 'Failed to update block');
+        }
+    },
+    deleteBlock: async (id, blockId) => {
+        // Accept object from executor, destructure it
+        const params = typeof id === 'object' ? id : { id, blockId };
+        const adapter = get().lexicals.get(params.id)?.adapter;
+        if (!adapter) {
+            throw new Error(`Lexical document ${params.id} not found`);
+        }
+        const result = await adapter.deleteBlock(params.blockId);
+        if (!result.success) {
+            throw new Error(result.error || 'Failed to delete block');
+        }
+    },
+    readBlock: async (id, blockId) => {
+        // Accept object from executor, destructure it
+        const params = typeof id === 'object' ? id : { id, blockId };
+        const adapter = get().lexicals.get(params.id)?.adapter;
+        if (!adapter) {
+            throw new Error(`Lexical document ${params.id} not found`);
+        }
+        return await adapter.getBlockById(params.blockId);
+    },
+    readAllBlocks: async (id, format) => {
+        // Accept object from executor, destructure it
+        const params = typeof id === 'object' ? id : { id, format: format || 'brief' };
+        const adapter = get().lexicals.get(params.id)?.adapter;
+        if (!adapter) {
+            throw new Error(`Lexical document ${params.id} not found`);
+        }
+        return await adapter.getBlocks(params.format || 'brief');
+    },
+    runBlock: async (id, blockId) => {
+        const params = typeof id === 'object' ? id : { id, blockId };
+        return ((await get()
+            .lexicals.get(params.id)
+            ?.adapter?.runBlock(params.blockId)) ?? {
+            success: false,
+            error: 'Adapter not found',
+        });
+    },
+    runAllBlocks: async (id) => {
+        const params = typeof id === 'object' ? id : { id };
+        return ((await get()
+            .lexicals.get(params.id)
+            ?.adapter?.runAllBlocks()) ?? {
+            success: false,
+            error: 'Adapter not found',
+        });
+    },
+    executeCode: async (id, code, storeHistory, silent, stopOnError) => {
+        const params = typeof id === 'object'
+            ? id
+            : { id, code, storeHistory, silent, stopOnError };
+        return ((await get()
+            .lexicals.get(params.id)
+            ?.adapter?.executeCode(params.code, params.storeHistory, params.silent, params.stopOnError)) ?? { success: false, error: 'Adapter not found' });
+    },
+    getBlockCount: async (id) => {
+        const blocks = await get().readAllBlocks(id);
+        return blocks.length;
+    },
+    reset: () => set({ lexicals: new Map() }),
+}));
+export function useLexicalStore(selector) {
+    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
+    return useStore(lexicalStore, selector);
+}
+export default useLexicalStore;
+//# sourceMappingURL=LexicalState.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.js.map b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.js.map
new file mode 100644
index 0000000..ad3a1b8
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/state/LexicalState.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"LexicalState.js","sourceRoot":"","sources":["../../src/state/LexicalState.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/state/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/state/index.d.ts
new file mode 100644
index 0000000..dde21fa
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/state/index.d.ts
@@ -0,0 +1,7 @@
+/**
+ * Lexical state management exports.
+ *
+ * @module tools/state
+ */
+export * from './LexicalAdapter';
+export * from './LexicalState';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/state/index.js b/node_modules/@datalayer/jupyter-lexical/lib/state/index.js
new file mode 100644
index 0000000..a7ec158
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/state/index.js
@@ -0,0 +1,13 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Lexical state management exports.
+ *
+ * @module tools/state
+ */
+export * from './LexicalAdapter';
+export * from './LexicalState';
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/state/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/state/index.js.map
new file mode 100644
index 0000000..7deca93
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/state/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/state/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,cAAc,kBAAkB,CAAC;AACjC,cAAc,gBAAgB,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/executor.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/executor.d.ts
new file mode 100644
index 0000000..84137c7
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/executor.d.ts
@@ -0,0 +1,47 @@
+/**
+ * Tool executor interface and implementations.
+ * Provides platform-agnostic execution abstraction.
+ *
+ * @module tools/core/executor
+ */
+import type { LexicalState } from '../../state/LexicalState';
+/**
+ * Tool executor interface - abstracts how operations are executed.
+ * Platforms can implement this interface to provide custom execution logic.
+ */
+export interface ToolExecutor {
+    /**
+     * Execute a tool operation
+     *
+     * @param operationName - Name of the operation (e.g., "insertBlock", "runBlock")
+     * @param args - Operation arguments
+     * @returns Result from execution
+     */
+    execute(operationName: string, args: unknown): Promise<unknown>;
+}
+/**
+ * Default executor - directly calls LexicalState store methods.
+ * Uses 1:1 mapping between operation names and store methods with no transformation.
+ *
+ * @example
+ * ```typescript
+ * const executor = new DefaultExecutor(lexicalId, lexicalStore);
+ * await executor.execute("insertBlock", { type: "paragraph", source: "Hello world" });
+ * ```
+ */
+export declare class DefaultExecutor implements ToolExecutor {
+    private lexicalId;
+    private store;
+    constructor(lexicalId: string, store: LexicalState);
+    /**
+     * Execute an operation by directly calling the corresponding LexicalState method.
+     *
+     * Operation names map 1:1 to LexicalState method names (e.g., "insertBlock"  store.insertBlock).
+     * All args are passed directly to the store method with lexicalId injected.
+     *
+     * @param operationName - Name of the operation (e.g., "insertBlock", "runBlock")
+     * @param args - Operation arguments (passed directly to store method)
+     * @returns Result from store method
+     */
+    execute<T = unknown>(operationName: string, args?: unknown): Promise<T>;
+}
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/executor.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/executor.js
new file mode 100644
index 0000000..7a34c04
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/executor.js
@@ -0,0 +1,63 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Default executor - directly calls LexicalState store methods.
+ * Uses 1:1 mapping between operation names and store methods with no transformation.
+ *
+ * @example
+ * ```typescript
+ * const executor = new DefaultExecutor(lexicalId, lexicalStore);
+ * await executor.execute("insertBlock", { type: "paragraph", source: "Hello world" });
+ * ```
+ */
+export class DefaultExecutor {
+    lexicalId;
+    store;
+    constructor(lexicalId, store) {
+        this.lexicalId = lexicalId;
+        this.store = store;
+    }
+    /**
+     * Execute an operation by directly calling the corresponding LexicalState method.
+     *
+     * Operation names map 1:1 to LexicalState method names (e.g., "insertBlock"  store.insertBlock).
+     * All args are passed directly to the store method with lexicalId injected.
+     *
+     * @param operationName - Name of the operation (e.g., "insertBlock", "runBlock")
+     * @param args - Operation arguments (passed directly to store method)
+     * @returns Result from store method
+     */
+    async execute(operationName, args) {
+        console.log('[DefaultExecutor] ========== EXECUTE CALLED ==========');
+        console.log('[DefaultExecutor] Operation name:', operationName);
+        console.log('[DefaultExecutor] Args:', JSON.stringify(args, null, 2));
+        console.log('[DefaultExecutor] Lexical ID:', this.lexicalId);
+        // Get the store method directly (1:1 mapping, no transformation)
+        const method = this.store[operationName];
+        console.log('[DefaultExecutor] Store method found:', typeof method);
+        if (typeof method !== 'function') {
+            console.error('[DefaultExecutor]  Store method not found or not a function!');
+            throw new Error(`Store method '${operationName}' not found or not a function`);
+        }
+        // Inject lexicalId into args and call store method
+        const payload = typeof args === 'object' && args !== null
+            ? { id: this.lexicalId, ...args }
+            : { id: this.lexicalId };
+        console.log('[DefaultExecutor] Injected payload:', JSON.stringify(payload, null, 2));
+        console.log('[DefaultExecutor] Calling store method:', operationName);
+        try {
+            const result = await method.call(this.store, payload);
+            console.log('[DefaultExecutor]  Store method returned:', result);
+            return result;
+        }
+        catch (error) {
+            console.error('[DefaultExecutor]  ERROR calling store method:', error);
+            console.error('[DefaultExecutor] Error stack:', error instanceof Error ? error.stack : 'N/A');
+            throw error;
+        }
+    }
+}
+//# sourceMappingURL=executor.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/executor.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/executor.js.map
new file mode 100644
index 0000000..f90881b
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/executor.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"executor.js","sourceRoot":"","sources":["../../../src/tools/core/executor.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AA0BH;;;;;;;;;GASG;AACH,MAAM,OAAO,eAAe;IAEhB;IACA;IAFV,YACU,SAAiB,EACjB,KAAmB;QADnB,cAAS,GAAT,SAAS,CAAQ;QACjB,UAAK,GAAL,KAAK,CAAc;IAC1B,CAAC;IAEJ;;;;;;;;;OASG;IACH,KAAK,CAAC,OAAO,CACX,aAAqB,EACrB,IAAc;QAEd,OAAO,CAAC,GAAG,CAAC,wDAAwD,CAAC,CAAC;QACtE,OAAO,CAAC,GAAG,CAAC,mCAAmC,EAAE,aAAa,CAAC,CAAC;QAChE,OAAO,CAAC,GAAG,CAAC,yBAAyB,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;QACtE,OAAO,CAAC,GAAG,CAAC,+BAA+B,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QAE7D,iEAAiE;QACjE,MAAM,MAAM,GAAI,IAAI,CAAC,KAA4C,CAC/D,aAAa,CACd,CAAC;QAEF,OAAO,CAAC,GAAG,CAAC,uCAAuC,EAAE,OAAO,MAAM,CAAC,CAAC;QAEpE,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE,CAAC;YACjC,OAAO,CAAC,KAAK,CACX,+DAA+D,CAChE,CAAC;YACF,MAAM,IAAI,KAAK,CACb,iBAAiB,aAAa,+BAA+B,CAC9D,CAAC;QACJ,CAAC;QAED,mDAAmD;QACnD,MAAM,OAAO,GACX,OAAO,IAAI,KAAK,QAAQ,IAAI,IAAI,KAAK,IAAI;YACvC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,SAAS,EAAE,GAAG,IAAI,EAAE;YACjC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC;QAE7B,OAAO,CAAC,GAAG,CACT,qCAAqC,EACrC,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,CACjC,CAAC;QACF,OAAO,CAAC,GAAG,CAAC,yCAAyC,EAAE,aAAa,CAAC,CAAC;QAEtE,IAAI,CAAC;YACH,MAAM,MAAM,GAAG,MAAO,MAAwC,CAAC,IAAI,CACjE,IAAI,CAAC,KAAK,EACV,OAAO,CACR,CAAC;YAEF,OAAO,CAAC,GAAG,CAAC,4CAA4C,EAAE,MAAM,CAAC,CAAC;YAClE,OAAO,MAAM,CAAC;QAChB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,KAAK,CAAC,iDAAiD,EAAE,KAAK,CAAC,CAAC;YACxE,OAAO,CAAC,KAAK,CACX,gCAAgC,EAChC,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAC7C,CAAC;YACF,MAAM,KAAK,CAAC;QACd,CAAC;IACH,CAAC;CACF"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.d.ts
new file mode 100644
index 0000000..2ffd94d
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.d.ts
@@ -0,0 +1,19 @@
+/**
+ * Lexical Tool Operations
+ *
+ * Platform-agnostic lexical operations that will be extracted to @datalayer/jupyter-ui-lexical
+ *
+ * @module jupyter-ui-lexical/tools/core
+ */
+export * from '../operations/insertBlock';
+export * from '../operations/updateBlock';
+export * from '../operations/deleteBlock';
+export * from '../operations/readBlock';
+export * from '../operations/readAllBlocks';
+export * from '../operations/runBlock';
+export * from '../operations/runAllBlocks';
+export * from '../operations/listAvailableBlocks';
+export * from './interfaces';
+export * from './types';
+export * from './executor';
+export { type ToolConfig, type ToolDefinition, } from '@datalayer/jupyter-react/lib/tools/core';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.js
new file mode 100644
index 0000000..062bd59
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.js
@@ -0,0 +1,26 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Lexical Tool Operations
+ *
+ * Platform-agnostic lexical operations that will be extracted to @datalayer/jupyter-ui-lexical
+ *
+ * @module jupyter-ui-lexical/tools/core
+ */
+// Re-export operations
+export * from '../operations/insertBlock';
+export * from '../operations/updateBlock';
+export * from '../operations/deleteBlock';
+export * from '../operations/readBlock';
+export * from '../operations/readAllBlocks';
+export * from '../operations/runBlock';
+export * from '../operations/runAllBlocks';
+export * from '../operations/listAvailableBlocks';
+// Export interfaces and types
+export * from './interfaces';
+export * from './types';
+export * from './executor';
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.js.map
new file mode 100644
index 0000000..c56916c
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/tools/core/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;;;GAMG;AAEH,uBAAuB;AACvB,cAAc,2BAA2B,CAAC;AAC1C,cAAc,2BAA2B,CAAC;AAC1C,cAAc,2BAA2B,CAAC;AAC1C,cAAc,yBAAyB,CAAC;AACxC,cAAc,6BAA6B,CAAC;AAC5C,cAAc,wBAAwB,CAAC;AACvC,cAAc,4BAA4B,CAAC;AAC3C,cAAc,mCAAmC,CAAC;AAElD,8BAA8B;AAC9B,cAAc,cAAc,CAAC;AAC7B,cAAc,SAAS,CAAC;AACxB,cAAc,YAAY,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/interfaces.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/interfaces.d.ts
new file mode 100644
index 0000000..b63016b
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/interfaces.d.ts
@@ -0,0 +1,65 @@
+/**
+ * Core interfaces for Lexical tool operations.
+ * These interfaces enable platform-agnostic tool execution.
+ *
+ * @module tools/core/interfaces
+ */
+import type { LexicalBlock, LexicalMetadata, RegisteredNodeInfo } from './types';
+import type { ToolExecutionContext } from '@datalayer/jupyter-react';
+export type { LexicalBlock, LexicalMetadata, RegisteredNodeInfo };
+export type { ToolExecutionContext };
+/**
+ * Core tool operation interface - platform agnostic.
+ *
+ * All tool operations implement this interface, enabling them to work
+ * identically across VS Code, SaaS, and ag-ui platforms.
+ *
+ * @template TParams - Tool parameter type (input)
+ * @template TResult - Tool result type (output)
+ */
+export interface ToolOperation<TParams, TResult> {
+    /**
+     * Unique operation name (used for registry lookup)
+     * Must match the `operation` field in ToolDefinition that references this operation.
+     */
+    name: string;
+    /**
+     * Execute the operation with given parameters and context
+     *
+     * Note: Description, parameters schema, and other metadata are defined in the
+     * ToolDefinition (schema), not here. Operations are pure implementation.
+     *
+     * @param params - Tool-specific parameters
+     * @param context - Execution context (documentId, executor, SDK, auth)
+     * @returns Operation result
+     * @throws Error if operation fails
+     */
+    execute(params: TParams, context: ToolExecutionContext): Promise<TResult>;
+}
+/**
+ * Tool operation registry interface
+ *
+ * Provides centralized access to all available operations.
+ */
+export interface ToolOperationRegistry {
+    /**
+     * Register a tool operation
+     */
+    register<TParams, TResult>(operation: ToolOperation<TParams, TResult>): void;
+    /**
+     * Get a tool operation by name
+     */
+    get<TParams, TResult>(name: string): ToolOperation<TParams, TResult> | undefined;
+    /**
+     * Check if an operation is registered
+     */
+    has(name: string): boolean;
+    /**
+     * Get all registered operation names
+     */
+    getAllNames(): string[];
+    /**
+     * Get all registered operations
+     */
+    getAll(): Array<ToolOperation<unknown, unknown>>;
+}
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/interfaces.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/interfaces.js
new file mode 100644
index 0000000..71c68be
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/interfaces.js
@@ -0,0 +1,7 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+export {};
+//# sourceMappingURL=interfaces.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/interfaces.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/interfaces.js.map
new file mode 100644
index 0000000..9945d86
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/interfaces.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"interfaces.js","sourceRoot":"","sources":["../../../src/tools/core/interfaces.ts"],"names":[],"mappings":"AAAA;;;;GAIG"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/types.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/types.d.ts
new file mode 100644
index 0000000..929578f
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/types.d.ts
@@ -0,0 +1,171 @@
+/**
+ * Types for Lexical document tool operations.
+ *
+ * @module tools/core/types
+ */
+/**
+ * Lexical document creation parameters
+ */
+export interface LexicalCreationParams {
+    /** Document name */
+    name: string;
+    /** Optional description */
+    description?: string;
+    /** Space identifier (for remote documents) */
+    spaceId?: string;
+    /** Space name (for remote documents) */
+    spaceName?: string;
+}
+/**
+ * Lexical document creation result
+ */
+export interface LexicalCreationResult {
+    /** Success status */
+    success: boolean;
+    /** Document unique identifier */
+    documentId?: string;
+    /** Document URI or path */
+    uri: string;
+    /** Error message if creation failed */
+    error?: string;
+}
+/**
+ * Lexical text node within a block
+ * Simplified for LLM consumption - preserves semantic formatting only
+ */
+export interface LexicalTextNode {
+    /** Text content */
+    text: string;
+    /** Semantic formatting (bold=1, italic=2, strikethrough=4, underline=8, code=16) */
+    format?: number;
+    /** Text style (CSS) - only preserved for critical styling */
+    style?: string;
+}
+/**
+ * Lexical block data structure
+ *
+ * ALIGNED WITH JUPYTER NOTEBOOK FORMAT for better Copilot understanding:
+ * - block_type  cell_type (e.g., "markdown", "code", "heading")
+ * - source  source (text content as string or string[])
+ * - metadata  metadata (block-specific properties)
+ * - block_id  UNIQUE (stable identifier for addressing blocks)
+ *
+ * Common block types:
+ * - "paragraph" - Regular text paragraph
+ * - "heading" - Heading (metadata.level: 1-6)
+ * - "code" - Code block (metadata.language: "python", "javascript", etc.)
+ * - "quote" - Blockquote
+ * - "list" - List container (metadata.list_type: "bullet"|"number"|"check")
+ * - "listitem" - List item (metadata.checked for checklists)
+ * - "jupyter-cell" - Executable Jupyter cell (metadata.language, outputs)
+ * - "equation" - Math equation (metadata.latex, metadata.inline)
+ * - "image" - Image (metadata.src, metadata.alt_text)
+ */
+export interface LexicalBlock {
+    /** Unique block identifier (Lexical node key) - use this for stable addressing */
+    block_id: string;
+    /** Block type identifier (analogous to Jupyter's cell_type) */
+    block_type: string;
+    /** Block content (analogous to Jupyter's source) */
+    source: string | string[];
+    /** Block metadata (analogous to Jupyter's metadata) */
+    metadata?: {
+        /** Heading level (1-6) */
+        level?: number;
+        /** Code/cell language */
+        language?: string;
+        /** List type */
+        list_type?: 'bullet' | 'number' | 'check';
+        /** Checklist item state */
+        checked?: boolean;
+        /** Jupyter cell outputs */
+        outputs?: Array<{
+            output_type: string;
+            text?: string;
+            data?: Record<string, unknown>;
+        }>;
+        /** Equation LaTeX */
+        latex?: string;
+        /** Inline equation flag */
+        inline?: boolean;
+        /** Image source */
+        src?: string;
+        /** Image alt text */
+        alt_text?: string;
+        /** Additional type-specific properties */
+        [key: string]: unknown;
+    };
+    /** Inline formatting (for preserving rich text within source) */
+    formatting?: Array<{
+        /** Text segment */
+        text: string;
+        /** Format flags (bold=1, italic=2, strikethrough=4, underline=8, code=16) */
+        format?: number;
+    }>;
+}
+/**
+ * Block format for controlling response detail level
+ */
+export type BlockFormat = 'brief' | 'detailed';
+/**
+ * Brief block representation for structure queries
+ * Includes block_id, block_type, and a 40-char content preview
+ */
+export interface BriefBlock {
+    /** Unique block identifier */
+    block_id: string;
+    /** Block type identifier */
+    block_type: string;
+    /** 40-character preview of block content (empty for horizontalrule) */
+    preview: string;
+}
+/**
+ * Complete Lexical document structure
+ */
+export interface LexicalDocumentData {
+    /** Root block containing all content */
+    root: {
+        /** Array of top-level blocks */
+        children: LexicalBlock[];
+        /** Root direction */
+        direction: 'ltr' | 'rtl' | null;
+        /** Root format */
+        format: string;
+        /** Root indent */
+        indent: number;
+        /** Root type - always "root" */
+        type: 'root';
+        /** Root version */
+        version: number;
+    };
+    /** Last saved timestamp */
+    lastSaved?: number;
+    /** Document source */
+    source?: string;
+    /** Document version */
+    version?: string;
+}
+/**
+ * Lexical document metadata
+ */
+export interface LexicalMetadata {
+    /** Document path/URI */
+    path: string;
+    /** Total block count */
+    blockCount: number;
+    /** Block type counts */
+    blockTypes: Record<string, number>;
+}
+/**
+ * Runtime information about a registered Lexical node
+ * Based on actual Lexical node class structure:
+ * - getType(): Returns the node type string (e.g., "equation", "image", "jupyter-cell")
+ * - Node classes extend DecoratorNode, ElementNode, or TextNode
+ * - exportJSON() defines serialized structure but doesn't expose metadata
+ */
+export interface RegisteredNodeInfo {
+    /** Node type identifier from node.getType() (e.g., "heading", "paragraph", "equation") */
+    type: string;
+    /** Node class name (constructor name) */
+    className?: string;
+}
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/types.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/types.js
new file mode 100644
index 0000000..a133a7a
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/types.js
@@ -0,0 +1,7 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+export {};
+//# sourceMappingURL=types.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/core/types.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/types.js.map
new file mode 100644
index 0000000..d003722
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/core/types.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"types.js","sourceRoot":"","sources":["../../../src/tools/core/types.ts"],"names":[],"mappings":"AAAA;;;;GAIG"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlock.d.ts
new file mode 100644
index 0000000..8384fe9
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlock.d.ts
@@ -0,0 +1,12 @@
+/**
+ * Tool definition for deleting blocks from Lexical documents
+ *
+ * @module tools/definitions/tools/deleteBlock
+ */
+import type { ToolDefinition } from '../core';
+/**
+ * Tool definition for deleting one or more blocks from a Lexical document
+ *
+ * This tool permanently removes blocks by their IDs. Supports both single and multi-delete operations.
+ */
+export declare const deleteBlockTool: ToolDefinition;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlock.js
new file mode 100644
index 0000000..b6228a9
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlock.js
@@ -0,0 +1,39 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { zodToToolParameters } from '@datalayer/jupyter-react/lib/tools/core/zodUtils';
+import { deleteBlockParamsSchema } from '../schemas/deleteBlock';
+/**
+ * Tool definition for deleting one or more blocks from a Lexical document
+ *
+ * This tool permanently removes blocks by their IDs. Supports both single and multi-delete operations.
+ */
+export const deleteBlockTool = {
+    name: 'datalayer_deleteBlock',
+    displayName: 'Delete Lexical Block(s)',
+    toolReferenceName: 'deleteBlock',
+    description: 'Delete one or more blocks from the currently open Lexical document by block_id. Supports single block deletion (pass string) or multi-delete (pass array of strings). WORKFLOW: 1) Call readAllBlocks to get block_id values, 2) Pass block_id(s) to delete. Validates all IDs exist before deletion. This permanently removes blocks and changes appear immediately. Works on active .lexical file.',
+    parameters: zodToToolParameters(deleteBlockParamsSchema),
+    operation: 'deleteBlock',
+    config: {
+        confirmationMessage: (params) => {
+            const count = params.ids.length;
+            return count === 1
+                ? `Delete block ${params.ids[0]}? This action cannot be undone.`
+                : `Delete ${count} blocks (${params.ids.join(', ')})? This action cannot be undone.`;
+        },
+        invocationMessage: (params) => {
+            const count = params.ids.length;
+            return count === 1
+                ? `Deleting block ${params.ids[0]} from lexical document`
+                : `Deleting ${count} blocks from lexical document`;
+        },
+        requiresConfirmation: true,
+        canBeReferencedInPrompt: true,
+        priority: 'high',
+    },
+    tags: ['lexical', 'delete', 'block', 'edit'],
+};
+//# sourceMappingURL=deleteBlock.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlock.js.map
new file mode 100644
index 0000000..209e66c
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/deleteBlock.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"deleteBlock.js","sourceRoot":"","sources":["../../../src/tools/definitions/deleteBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,kDAAkD,CAAC;AACvF,OAAO,EAAE,uBAAuB,EAAE,MAAM,wBAAwB,CAAC;AAEjE;;;;GAIG;AACH,MAAM,CAAC,MAAM,eAAe,GAAmB;IAC7C,IAAI,EAAE,uBAAuB;IAC7B,WAAW,EAAE,yBAAyB;IACtC,iBAAiB,EAAE,aAAa;IAChC,WAAW,EACT,sYAAsY;IAExY,UAAU,EAAE,mBAAmB,CAAC,uBAAuB,CAAC;IAExD,SAAS,EAAE,aAAa;IAExB,MAAM,EAAE;QACN,mBAAmB,EAAE,CAAC,MAAyB,EAAE,EAAE;YACjD,MAAM,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;YAChC,OAAO,KAAK,KAAK,CAAC;gBAChB,CAAC,CAAC,gBAAgB,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,iCAAiC;gBAChE,CAAC,CAAC,UAAU,KAAK,YAAY,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,kCAAkC,CAAC;QACzF,CAAC;QACD,iBAAiB,EAAE,CAAC,MAAyB,EAAE,EAAE;YAC/C,MAAM,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;YAChC,OAAO,KAAK,KAAK,CAAC;gBAChB,CAAC,CAAC,kBAAkB,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,wBAAwB;gBACzD,CAAC,CAAC,YAAY,KAAK,+BAA+B,CAAC;QACvD,CAAC;QACD,oBAAoB,EAAE,IAAI;QAC1B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,MAAM;KACjB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,MAAM,CAAC;CAC7C,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/executeCode.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/executeCode.d.ts
new file mode 100644
index 0000000..8802a37
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/executeCode.d.ts
@@ -0,0 +1,12 @@
+/**
+ * Tool definition for executing code directly in kernel
+ *
+ * @module tools/definitions/executeCode
+ */
+import type { ToolDefinition } from '../core';
+/**
+ * Tool definition for executing code directly in the kernel
+ *
+ * Executes code without creating or modifying blocks in the document.
+ */
+export declare const executeCodeTool: ToolDefinition;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/executeCode.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/executeCode.js
new file mode 100644
index 0000000..8a98f62
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/executeCode.js
@@ -0,0 +1,29 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { zodToToolParameters } from '@datalayer/jupyter-react/lib/tools/core/zodUtils';
+import { executeCodeParamsSchema } from '../schemas/executeCode';
+/**
+ * Tool definition for executing code directly in the kernel
+ *
+ * Executes code without creating or modifying blocks in the document.
+ */
+export const executeCodeTool = {
+    name: 'datalayer_executeCode_lexical',
+    displayName: 'Execute Code in Kernel (Lexical)',
+    toolReferenceName: 'executeCode',
+    description: 'Execute code directly in the kernel without creating blocks. Runs code and returns execution results immediately. Useful for quick computations, variable inspection, or running commands that should not appear in the document. Works on the active kernel for the currently open .lexical file.',
+    parameters: zodToToolParameters(executeCodeParamsSchema),
+    operation: 'executeCode',
+    config: {
+        confirmationMessage: (params) => `Execute code: ${params.code.substring(0, 50)}${params.code.length > 50 ? '...' : ''}?`,
+        invocationMessage: () => 'Executing code in kernel',
+        requiresConfirmation: false,
+        canBeReferencedInPrompt: true,
+        priority: 'high',
+    },
+    tags: ['lexical', 'kernel', 'execute', 'code', 'inspection'],
+};
+//# sourceMappingURL=executeCode.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/executeCode.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/executeCode.js.map
new file mode 100644
index 0000000..6d541a4
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/executeCode.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"executeCode.js","sourceRoot":"","sources":["../../../src/tools/definitions/executeCode.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,kDAAkD,CAAC;AACvF,OAAO,EAAE,uBAAuB,EAAE,MAAM,wBAAwB,CAAC;AAEjE;;;;GAIG;AACH,MAAM,CAAC,MAAM,eAAe,GAAmB;IAC7C,IAAI,EAAE,+BAA+B;IACrC,WAAW,EAAE,kCAAkC;IAC/C,iBAAiB,EAAE,aAAa;IAChC,WAAW,EACT,oSAAoS;IAEtS,UAAU,EAAE,mBAAmB,CAAC,uBAAuB,CAAC;IAExD,SAAS,EAAE,aAAa;IAExB,MAAM,EAAE;QACN,mBAAmB,EAAE,CAAC,MAAwB,EAAE,EAAE,CAChD,iBAAiB,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,GAAG;QACzF,iBAAiB,EAAE,GAAG,EAAE,CAAC,0BAA0B;QACnD,oBAAoB,EAAE,KAAK;QAC3B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,MAAM;KACjB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,EAAE,YAAY,CAAC;CAC7D,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/executeCode.ts.bak b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/executeCode.ts.bak
new file mode 100644
index 0000000..8bd361a
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/executeCode.ts.bak
@@ -0,0 +1,42 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+
+/**
+ * Tool definition for executing code directly in kernel
+ *
+ * @module tools/definitions/executeCode
+ */
+
+import type { ToolDefinition } from '../core';
+import { zodToToolParameters } from '../core/zodUtils';
+import { executeCodeParamsSchema } from '../schemas/executeCode';
+
+/**
+ * Tool definition for executing code directly in the kernel
+ *
+ * Executes code without creating or modifying blocks in the document.
+ */
+export const executeCodeTool: ToolDefinition = {
+  name: 'datalayer_executeCode_lexical',
+  displayName: 'Execute Code in Kernel (Lexical)',
+  toolReferenceName: 'executeCode',
+  description:
+    required: ['code'],
+  },
+
+  operation: 'executeCode',
+
+  config: {
+    confirmationMessage: (params: { code: string }) =>
+      `Execute code: ${params.code.substring(0, 50)}${params.code.length > 50 ? '...' : ''}?`,
+    invocationMessage: () => 'Executing code in kernel',
+    requiresConfirmation: false,
+    canBeReferencedInPrompt: true,
+    priority: 'high',
+  },
+
+  tags: ['lexical', 'kernel', 'execute', 'code', 'inspection'],
+};
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.d.ts
new file mode 100644
index 0000000..757ce90
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.d.ts
@@ -0,0 +1,16 @@
+/**
+ * Lexical Tool Definitions
+ *
+ * Platform-agnostic lexical tool schemas that will be extracted to @datalayer/jupyter-ui-lexical
+ *
+ * @module jupyter-ui-lexical/tools/definitions
+ */
+export * from './insertBlock';
+export * from './updateBlock';
+export * from './deleteBlock';
+export * from './readBlock';
+export * from './readAllBlocks';
+export * from './runBlock';
+export * from './runAllBlocks';
+export * from './listAvailableBlocks';
+export * from './executeCode';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.js
new file mode 100644
index 0000000..53d8cea
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.js
@@ -0,0 +1,22 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Lexical Tool Definitions
+ *
+ * Platform-agnostic lexical tool schemas that will be extracted to @datalayer/jupyter-ui-lexical
+ *
+ * @module jupyter-ui-lexical/tools/definitions
+ */
+export * from './insertBlock';
+export * from './updateBlock';
+export * from './deleteBlock';
+export * from './readBlock';
+export * from './readAllBlocks';
+export * from './runBlock';
+export * from './runAllBlocks';
+export * from './listAvailableBlocks';
+export * from './executeCode';
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.js.map
new file mode 100644
index 0000000..5e716e0
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/tools/definitions/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;;;GAMG;AAEH,cAAc,eAAe,CAAC;AAC9B,cAAc,eAAe,CAAC;AAC9B,cAAc,eAAe,CAAC;AAC9B,cAAc,aAAa,CAAC;AAC5B,cAAc,iBAAiB,CAAC;AAChC,cAAc,YAAY,CAAC;AAC3B,cAAc,gBAAgB,CAAC;AAC/B,cAAc,uBAAuB,CAAC;AACtC,cAAc,eAAe,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.d.ts
new file mode 100644
index 0000000..55514c4
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.d.ts
@@ -0,0 +1,18 @@
+/**
+ * Tool definition for inserting blocks into Lexical documents
+ *
+ * @module tools/definitions/tools/insertBlock
+ */
+import type { ToolDefinition } from '../core';
+/**
+ * Tool definition for inserting a block into a Lexical document
+ *
+ * Supports inserting various block types:
+ * - paragraph: Regular text paragraph
+ * - heading: Semantic HTML heading (NOT markdown - use plain text, specify tag property for h1-h6)
+ * - code: Code block (specify language in properties)
+ * - quote: Blockquote
+ * - list/listitem: List blocks
+ * - jupyter-cell: Executable Jupyter code cells
+ */
+export declare const insertBlockTool: ToolDefinition;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.js
new file mode 100644
index 0000000..51a661e
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.js
@@ -0,0 +1,35 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { zodToToolParameters } from '@datalayer/jupyter-react/lib/tools/core/zodUtils';
+import { insertBlockParamsSchema } from '../schemas/insertBlock';
+/**
+ * Tool definition for inserting a block into a Lexical document
+ *
+ * Supports inserting various block types:
+ * - paragraph: Regular text paragraph
+ * - heading: Semantic HTML heading (NOT markdown - use plain text, specify tag property for h1-h6)
+ * - code: Code block (specify language in properties)
+ * - quote: Blockquote
+ * - list/listitem: List blocks
+ * - jupyter-cell: Executable Jupyter code cells
+ */
+export const insertBlockTool = {
+    name: 'datalayer_insertBlock',
+    displayName: 'Insert Lexical Block',
+    toolReferenceName: 'insertBlock',
+    description: "Insert different type of content with blocks. Use listAvailableBlocks to get availables blocks. When inserting MULTIPLE blocks sequentially (e.g., creating a document outline with heading + paragraph + code), ALWAYS use afterId: 'BOTTOM' for each insertion to append blocks in order. For single insertions, call readAllBlocks first to see document structure. Position blocks using afterId: 'TOP' (beginning), 'BOTTOM' (end - REQUIRED for sequential inserts), or a specific block_id value from readAllBlocks. IMPORTANT: heading blocks are semantic HTML (NOT markdown) - use plain text in source field without # symbols, specify tag property (h1-h6) instead. Use listAvailableBlocks to see all supported types. Works on active .lexical file.",
+    parameters: zodToToolParameters(insertBlockParamsSchema),
+    operation: 'insertBlock',
+    config: {
+        confirmationMessage: (params) => `Insert ${params.type} block ${params.afterId === 'TOP' ? 'at beginning' : params.afterId === 'BOTTOM' ? 'at end' : `after block ${params.afterId}`}?\n\n${params.source}`,
+        invocationMessage: (params) => `Inserting ${params.type} block into lexical document`,
+        requiresConfirmation: true,
+        canBeReferencedInPrompt: true,
+        priority: 'high',
+    },
+    tags: ['lexical', 'insert', 'block', 'edit'],
+};
+//# sourceMappingURL=insertBlock.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.js.map
new file mode 100644
index 0000000..cf1d3d3
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/insertBlock.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"insertBlock.js","sourceRoot":"","sources":["../../../src/tools/definitions/insertBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,kDAAkD,CAAC;AACvF,OAAO,EAAE,uBAAuB,EAAE,MAAM,wBAAwB,CAAC;AAEjE;;;;;;;;;;GAUG;AACH,MAAM,CAAC,MAAM,eAAe,GAAmB;IAC7C,IAAI,EAAE,uBAAuB;IAC7B,WAAW,EAAE,sBAAsB;IACnC,iBAAiB,EAAE,aAAa;IAChC,WAAW,EACT,quBAAquB;IAEvuB,UAAU,EAAE,mBAAmB,CAAC,uBAAuB,CAAC;IAExD,SAAS,EAAE,aAAa;IAExB,MAAM,EAAE;QACN,mBAAmB,EAAE,CAAC,MAIrB,EAAE,EAAE,CACH,UAAU,MAAM,CAAC,IAAI,UAAU,MAAM,CAAC,OAAO,KAAK,KAAK,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,KAAK,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,eAAe,MAAM,CAAC,OAAO,EAAE,QAAQ,MAAM,CAAC,MAAM,EAAE;QAC5K,iBAAiB,EAAE,CAAC,MAAwB,EAAE,EAAE,CAC9C,aAAa,MAAM,CAAC,IAAI,8BAA8B;QACxD,oBAAoB,EAAE,IAAI;QAC1B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,MAAM;KACjB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,MAAM,CAAC;CAC7C,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/listAvailableBlocks.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/listAvailableBlocks.d.ts
new file mode 100644
index 0000000..2b4c6f0
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/listAvailableBlocks.d.ts
@@ -0,0 +1,19 @@
+/**
+ * Tool definition for listing available Lexical block types
+ *
+ * @module tools/definitions/tools/listAvailableBlocks
+ */
+import type { ToolDefinition } from '../core';
+/**
+ * Tool definition for listing available Lexical block types
+ *
+ * This tool exposes the schema of all registered Lexical node types,
+ * enabling AI assistants to understand what blocks can be inserted and their properties.
+ *
+ * This is essential for:
+ * - Understanding the full capabilities of the Lexical editor
+ * - Inserting appropriate block types based on user intent
+ * - Using correct properties for each block type
+ * - Discovering special Datalayer blocks (Jupyter cells)
+ */
+export declare const listAvailableBlocksTool: ToolDefinition;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/listAvailableBlocks.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/listAvailableBlocks.js
new file mode 100644
index 0000000..58d6079
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/listAvailableBlocks.js
@@ -0,0 +1,40 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { zodToToolParameters } from '@datalayer/jupyter-react/lib/tools/core/zodUtils';
+import { listAvailableBlocksParamsSchema } from '../schemas/listAvailableBlocks';
+/**
+ * Tool definition for listing available Lexical block types
+ *
+ * This tool exposes the schema of all registered Lexical node types,
+ * enabling AI assistants to understand what blocks can be inserted and their properties.
+ *
+ * This is essential for:
+ * - Understanding the full capabilities of the Lexical editor
+ * - Inserting appropriate block types based on user intent
+ * - Using correct properties for each block type
+ * - Discovering special Datalayer blocks (Jupyter cells)
+ */
+export const listAvailableBlocksTool = {
+    name: 'datalayer_listAvailableBlocks',
+    displayName: 'List Available Lexical Blocks',
+    toolReferenceName: 'listAvailableBlocks',
+    description: "Discover available block types for the currently open Lexical document. Returns schema for all registered blocks including: 'jupyter-cell' (executable code cell with language property), standard blocks (paragraph, heading [NOT markdown - semantic HTML with tag property], code, quote, list, table). Use this to see exact block type names and required properties before calling insertBlock.",
+    parameters: zodToToolParameters(listAvailableBlocksParamsSchema),
+    operation: 'listAvailableBlocks',
+    config: {
+        confirmationMessage: (params) => params.category
+            ? `List available ${params.category} block types?`
+            : 'List all available block types?',
+        invocationMessage: (params) => params.category
+            ? `Listing ${params.category} block types`
+            : 'Listing all available block types',
+        requiresConfirmation: false,
+        canBeReferencedInPrompt: true,
+        priority: 'low',
+    },
+    tags: ['lexical', 'schema', 'discovery', 'blocks'],
+};
+//# sourceMappingURL=listAvailableBlocks.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/listAvailableBlocks.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/listAvailableBlocks.js.map
new file mode 100644
index 0000000..55e0d64
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/listAvailableBlocks.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"listAvailableBlocks.js","sourceRoot":"","sources":["../../../src/tools/definitions/listAvailableBlocks.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,kDAAkD,CAAC;AACvF,OAAO,EAAE,+BAA+B,EAAE,MAAM,gCAAgC,CAAC;AAEjF;;;;;;;;;;;GAWG;AACH,MAAM,CAAC,MAAM,uBAAuB,GAAmB;IACrD,IAAI,EAAE,+BAA+B;IACrC,WAAW,EAAE,+BAA+B;IAC5C,iBAAiB,EAAE,qBAAqB;IACxC,WAAW,EACT,uYAAuY;IAEzY,UAAU,EAAE,mBAAmB,CAAC,+BAA+B,CAAC;IAEhE,SAAS,EAAE,qBAAqB;IAEhC,MAAM,EAAE;QACN,mBAAmB,EAAE,CAAC,MAA6B,EAAE,EAAE,CACrD,MAAM,CAAC,QAAQ;YACb,CAAC,CAAC,kBAAkB,MAAM,CAAC,QAAQ,eAAe;YAClD,CAAC,CAAC,iCAAiC;QACvC,iBAAiB,EAAE,CAAC,MAA6B,EAAE,EAAE,CACnD,MAAM,CAAC,QAAQ;YACb,CAAC,CAAC,WAAW,MAAM,CAAC,QAAQ,cAAc;YAC1C,CAAC,CAAC,mCAAmC;QACzC,oBAAoB,EAAE,KAAK;QAC3B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,KAAK;KAChB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,QAAQ,EAAE,WAAW,EAAE,QAAQ,CAAC;CACnD,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readAllBlocks.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readAllBlocks.d.ts
new file mode 100644
index 0000000..cbba1b4
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readAllBlocks.d.ts
@@ -0,0 +1,12 @@
+/**
+ * Tool definition for reading all blocks from Lexical documents
+ *
+ * @module tools/definitions/tools/readAllBlocks
+ */
+import type { ToolDefinition } from '../core';
+/**
+ * Tool definition for reading all blocks from a Lexical document
+ *
+ * Returns all blocks with their block_id values for use in other operations.
+ */
+export declare const readAllBlocksTool: ToolDefinition;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readAllBlocks.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readAllBlocks.js
new file mode 100644
index 0000000..0b803bb
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readAllBlocks.js
@@ -0,0 +1,29 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { zodToToolParameters } from '@datalayer/jupyter-react/lib/tools/core/zodUtils';
+import { readAllBlocksParamsSchema } from '../schemas/readAllBlocks';
+/**
+ * Tool definition for reading all blocks from a Lexical document
+ *
+ * Returns all blocks with their block_id values for use in other operations.
+ */
+export const readAllBlocksTool = {
+    name: 'datalayer_readAllBlocks',
+    displayName: 'Read All Lexical Blocks',
+    toolReferenceName: 'readAllBlocks',
+    description: "Read all blocks from the currently open Lexical document. Use listAvailableBlocks to get available blocks. Supports two response formats: 'brief' (default, ~1,100 tokens) returns block_id, block_type, and 40-char content preview for structure queries; 'detailed' (~20,000 tokens) returns full content with source, metadata, and properties. Use brief when you need to see document structure, count blocks, or quickly scan content. Use detailed when you need to read full content. Brief format preview shows: lists as comma-separated items, code/jupyter-cell as first line, horizontalrule as empty string. Returns array of blocks with: block_id (stable identifier for insertion), block_type (e.g. 'heading', 'paragraph', 'jupyter-cell'), preview (brief only), and optionally source/metadata (detailed only). CRITICAL: Use the block_id values from this result for insertBlock's afterId parameter. Works on active .lexical file.",
+    parameters: zodToToolParameters(readAllBlocksParamsSchema),
+    operation: 'readAllBlocks',
+    config: {
+        confirmationMessage: () => 'Read all blocks from the lexical document?',
+        invocationMessage: () => 'Reading all blocks from lexical document',
+        requiresConfirmation: false,
+        canBeReferencedInPrompt: true,
+        priority: 'medium',
+    },
+    tags: ['lexical', 'read', 'blocks', 'all'],
+};
+//# sourceMappingURL=readAllBlocks.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readAllBlocks.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readAllBlocks.js.map
new file mode 100644
index 0000000..80909ea
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readAllBlocks.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"readAllBlocks.js","sourceRoot":"","sources":["../../../src/tools/definitions/readAllBlocks.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,kDAAkD,CAAC;AACvF,OAAO,EAAE,yBAAyB,EAAE,MAAM,0BAA0B,CAAC;AAErE;;;;GAIG;AACH,MAAM,CAAC,MAAM,iBAAiB,GAAmB;IAC/C,IAAI,EAAE,yBAAyB;IAC/B,WAAW,EAAE,yBAAyB;IACtC,iBAAiB,EAAE,eAAe;IAClC,WAAW,EACT,85BAA85B;IAEh6B,UAAU,EAAE,mBAAmB,CAAC,yBAAyB,CAAC;IAE1D,SAAS,EAAE,eAAe;IAE1B,MAAM,EAAE;QACN,mBAAmB,EAAE,GAAG,EAAE,CAAC,4CAA4C;QACvE,iBAAiB,EAAE,GAAG,EAAE,CAAC,0CAA0C;QACnE,oBAAoB,EAAE,KAAK;QAC3B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,QAAQ;KACnB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,CAAC;CAC3C,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readBlock.d.ts
new file mode 100644
index 0000000..d8d885c
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readBlock.d.ts
@@ -0,0 +1,12 @@
+/**
+ * Tool definition for reading a single block from Lexical documents
+ *
+ * @module tools/definitions/tools/readBlock
+ */
+import type { ToolDefinition } from '../core';
+/**
+ * Tool definition for reading a single block from a Lexical document
+ *
+ * Returns the specified block with its complete data.
+ */
+export declare const readBlockTool: ToolDefinition;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readBlock.js
new file mode 100644
index 0000000..db9224f
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readBlock.js
@@ -0,0 +1,29 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { zodToToolParameters } from '@datalayer/jupyter-react/lib/tools/core/zodUtils';
+import { readBlockParamsSchema } from '../schemas/readBlock';
+/**
+ * Tool definition for reading a single block from a Lexical document
+ *
+ * Returns the specified block with its complete data.
+ */
+export const readBlockTool = {
+    name: 'datalayer_readBlock',
+    displayName: 'Read Lexical Block',
+    toolReferenceName: 'readBlock',
+    description: "Read a single block from the currently open Lexical document by its block_id. Use listAvailableBlocks to get available blocks. Returns the block with: block_id, block_type (e.g. 'heading', 'paragraph', 'jupyter-cell'), source (content as string), metadata (properties like level, language). Use block_id values from readAllBlocks. Works on active .lexical file.",
+    parameters: zodToToolParameters(readBlockParamsSchema),
+    operation: 'readBlock',
+    config: {
+        confirmationMessage: (params) => `Read block ${params.id} from the lexical document?`,
+        invocationMessage: (params) => `Reading block ${params.id} from lexical document`,
+        requiresConfirmation: false,
+        canBeReferencedInPrompt: true,
+        priority: 'medium',
+    },
+    tags: ['lexical', 'read', 'block', 'single'],
+};
+//# sourceMappingURL=readBlock.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readBlock.js.map
new file mode 100644
index 0000000..7828fdb
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/readBlock.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"readBlock.js","sourceRoot":"","sources":["../../../src/tools/definitions/readBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,kDAAkD,CAAC;AACvF,OAAO,EAAE,qBAAqB,EAAE,MAAM,sBAAsB,CAAC;AAE7D;;;;GAIG;AACH,MAAM,CAAC,MAAM,aAAa,GAAmB;IAC3C,IAAI,EAAE,qBAAqB;IAC3B,WAAW,EAAE,oBAAoB;IACjC,iBAAiB,EAAE,WAAW;IAC9B,WAAW,EACT,2WAA2W;IAE7W,UAAU,EAAE,mBAAmB,CAAC,qBAAqB,CAAC;IAEtD,SAAS,EAAE,WAAW;IAEtB,MAAM,EAAE;QACN,mBAAmB,EAAE,CAAC,MAAsB,EAAE,EAAE,CAC9C,cAAc,MAAM,CAAC,EAAE,6BAA6B;QACtD,iBAAiB,EAAE,CAAC,MAAsB,EAAE,EAAE,CAC5C,iBAAiB,MAAM,CAAC,EAAE,wBAAwB;QACpD,oBAAoB,EAAE,KAAK;QAC3B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,QAAQ;KACnB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,CAAC;CAC7C,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runAllBlocks.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runAllBlocks.d.ts
new file mode 100644
index 0000000..8eb9a4c
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runAllBlocks.d.ts
@@ -0,0 +1,12 @@
+/**
+ * Tool definition for running all executable blocks in Lexical documents
+ *
+ * @module tools/definitions/tools/runAllBlocks
+ */
+import type { ToolDefinition } from '../core';
+/**
+ * Tool definition for running all executable blocks in sequence
+ *
+ * Executes all jupyter-cell and executable code blocks in the document.
+ */
+export declare const runAllBlocksTool: ToolDefinition;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runAllBlocks.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runAllBlocks.js
new file mode 100644
index 0000000..9708916
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runAllBlocks.js
@@ -0,0 +1,29 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { zodToToolParameters } from '@datalayer/jupyter-react/lib/tools/core/zodUtils';
+import { runAllBlocksParamsSchema } from '../schemas/runAllBlocks';
+/**
+ * Tool definition for running all executable blocks in sequence
+ *
+ * Executes all jupyter-cell and executable code blocks in the document.
+ */
+export const runAllBlocksTool = {
+    name: 'datalayer_runAllBlocks',
+    displayName: 'Run All Lexical Blocks',
+    toolReferenceName: 'runAllBlocks',
+    description: 'Execute all executable blocks in the currently open Lexical document in sequence. Only runs executable blocks (jupyter-cell or code blocks with executable: true). Non-executable blocks are skipped. Triggers execution and returns immediately with count of blocks executed. Use readAllBlocks after execution to check results. Works on active .lexical file.',
+    parameters: zodToToolParameters(runAllBlocksParamsSchema),
+    operation: 'runAllBlocks',
+    config: {
+        confirmationMessage: () => 'Run all executable blocks in the lexical document?',
+        invocationMessage: () => 'Running all executable blocks in lexical document',
+        requiresConfirmation: true,
+        canBeReferencedInPrompt: true,
+        priority: 'high',
+    },
+    tags: ['lexical', 'run', 'execute', 'blocks', 'all', 'jupyter'],
+};
+//# sourceMappingURL=runAllBlocks.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runAllBlocks.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runAllBlocks.js.map
new file mode 100644
index 0000000..528b2dd
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runAllBlocks.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"runAllBlocks.js","sourceRoot":"","sources":["../../../src/tools/definitions/runAllBlocks.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,kDAAkD,CAAC;AACvF,OAAO,EAAE,wBAAwB,EAAE,MAAM,yBAAyB,CAAC;AAEnE;;;;GAIG;AACH,MAAM,CAAC,MAAM,gBAAgB,GAAmB;IAC9C,IAAI,EAAE,wBAAwB;IAC9B,WAAW,EAAE,wBAAwB;IACrC,iBAAiB,EAAE,cAAc;IACjC,WAAW,EACT,oWAAoW;IAEtW,UAAU,EAAE,mBAAmB,CAAC,wBAAwB,CAAC;IAEzD,SAAS,EAAE,cAAc;IAEzB,MAAM,EAAE;QACN,mBAAmB,EAAE,GAAG,EAAE,CACxB,oDAAoD;QACtD,iBAAiB,EAAE,GAAG,EAAE,CACtB,mDAAmD;QACrD,oBAAoB,EAAE,IAAI;QAC1B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,MAAM;KACjB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,KAAK,EAAE,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,SAAS,CAAC;CAChE,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runBlock.d.ts
new file mode 100644
index 0000000..cba3649
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runBlock.d.ts
@@ -0,0 +1,12 @@
+/**
+ * Tool definition for running a block in Lexical documents
+ *
+ * @module tools/definitions/tools/runBlock
+ */
+import type { ToolDefinition } from '../core';
+/**
+ * Tool definition for running a single executable block
+ *
+ * Executes code in jupyter-cell or executable code blocks with bounds validation and timeout support.
+ */
+export declare const runBlockTool: ToolDefinition;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runBlock.js
new file mode 100644
index 0000000..6e0abfd
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runBlock.js
@@ -0,0 +1,29 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { zodToToolParameters } from '@datalayer/jupyter-react/lib/tools/core/zodUtils';
+import { runBlockParamsSchema } from '../schemas/runBlock';
+/**
+ * Tool definition for running a single executable block
+ *
+ * Executes code in jupyter-cell or executable code blocks with bounds validation and timeout support.
+ */
+export const runBlockTool = {
+    name: 'datalayer_runBlock',
+    displayName: 'Run Lexical Block',
+    toolReferenceName: 'runBlock',
+    description: 'Execute a single block in the currently open Lexical document by block_id. WORKFLOW: 1) Call readAllBlocks to get block_id values, 2) Pass block_id to execute. Validates block exists before execution. Only works on executable blocks (jupyter-cell or code blocks with executable: true). Optional timeout (timeoutSeconds) and streaming (stream, progressInterval) parameters available. Triggers execution and returns immediately. Use readBlock after execution to check results. Works on active .lexical file.',
+    parameters: zodToToolParameters(runBlockParamsSchema),
+    operation: 'runBlock',
+    config: {
+        confirmationMessage: (params) => `Run block ${params.id}?`,
+        invocationMessage: (params) => `Running block ${params.id}`,
+        requiresConfirmation: true,
+        canBeReferencedInPrompt: true,
+        priority: 'high',
+    },
+    tags: ['lexical', 'run', 'execute', 'block', 'jupyter'],
+};
+//# sourceMappingURL=runBlock.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runBlock.js.map
new file mode 100644
index 0000000..0320dd4
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/runBlock.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"runBlock.js","sourceRoot":"","sources":["../../../src/tools/definitions/runBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,kDAAkD,CAAC;AACvF,OAAO,EAAE,oBAAoB,EAAE,MAAM,qBAAqB,CAAC;AAE3D;;;;GAIG;AACH,MAAM,CAAC,MAAM,YAAY,GAAmB;IAC1C,IAAI,EAAE,oBAAoB;IAC1B,WAAW,EAAE,mBAAmB;IAChC,iBAAiB,EAAE,UAAU;IAC7B,WAAW,EACT,2fAA2f;IAE7f,UAAU,EAAE,mBAAmB,CAAC,oBAAoB,CAAC;IAErD,SAAS,EAAE,UAAU;IAErB,MAAM,EAAE;QACN,mBAAmB,EAAE,CAAC,MAAsB,EAAE,EAAE,CAAC,aAAa,MAAM,CAAC,EAAE,GAAG;QAC1E,iBAAiB,EAAE,CAAC,MAAsB,EAAE,EAAE,CAAC,iBAAiB,MAAM,CAAC,EAAE,EAAE;QAC3E,oBAAoB,EAAE,IAAI;QAC1B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,MAAM;KACjB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,KAAK,EAAE,SAAS,EAAE,OAAO,EAAE,SAAS,CAAC;CACxD,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.d.ts
new file mode 100644
index 0000000..6b317a7
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.d.ts
@@ -0,0 +1,12 @@
+/**
+ * Tool definition for updating a block in Lexical documents
+ *
+ * @module tools/definitions/tools/updateBlock
+ */
+import type { ToolDefinition } from '../core';
+/**
+ * Tool definition for updating an existing block
+ *
+ * Modifies block type, source content, and/or properties.
+ */
+export declare const updateBlockTool: ToolDefinition;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.js
new file mode 100644
index 0000000..38f71c3
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.js
@@ -0,0 +1,38 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { zodToToolParameters } from '@datalayer/jupyter-react/lib/tools/core/zodUtils';
+import { updateBlockParamsSchema } from '../schemas/updateBlock';
+/**
+ * Tool definition for updating an existing block
+ *
+ * Modifies block type, source content, and/or properties.
+ */
+export const updateBlockTool = {
+    name: 'datalayer_updateBlock',
+    displayName: 'Update Lexical Block',
+    toolReferenceName: 'updateBlock',
+    description: 'Update an existing block in the currently open Lexical document. Use listAvailableBlocks to get available blocks. Can modify block type, source content, and/or properties. Requires id from readAllBlocks. At least one of type, source, or properties must be provided. Properties are merged with existing metadata. Works on active .lexical file.',
+    parameters: zodToToolParameters(updateBlockParamsSchema),
+    operation: 'updateBlock',
+    config: {
+        confirmationMessage: (params) => {
+            const updates = [];
+            if (params.type)
+                updates.push(`type to ${params.type}`);
+            if (params.source)
+                updates.push('source');
+            if (params.properties)
+                updates.push('properties');
+            return `Update block ${params.id} (${updates.join(', ')})?`;
+        },
+        invocationMessage: (params) => `Updating block ${params.id}`,
+        requiresConfirmation: true,
+        canBeReferencedInPrompt: true,
+        priority: 'high',
+    },
+    tags: ['lexical', 'update', 'edit', 'block', 'modify'],
+};
+//# sourceMappingURL=updateBlock.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.js.map
new file mode 100644
index 0000000..c61e319
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/definitions/updateBlock.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"updateBlock.js","sourceRoot":"","sources":["../../../src/tools/definitions/updateBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,mBAAmB,EAAE,MAAM,kDAAkD,CAAC;AACvF,OAAO,EAAE,uBAAuB,EAAE,MAAM,wBAAwB,CAAC;AAEjE;;;;GAIG;AACH,MAAM,CAAC,MAAM,eAAe,GAAmB;IAC7C,IAAI,EAAE,uBAAuB;IAC7B,WAAW,EAAE,sBAAsB;IACnC,iBAAiB,EAAE,aAAa;IAChC,WAAW,EACT,wVAAwV;IAE1V,UAAU,EAAE,mBAAmB,CAAC,uBAAuB,CAAC;IAExD,SAAS,EAAE,aAAa;IAExB,MAAM,EAAE;QACN,mBAAmB,EAAE,CAAC,MAKrB,EAAE,EAAE;YACH,MAAM,OAAO,GAAa,EAAE,CAAC;YAC7B,IAAI,MAAM,CAAC,IAAI;gBAAE,OAAO,CAAC,IAAI,CAAC,WAAW,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC;YACxD,IAAI,MAAM,CAAC,MAAM;gBAAE,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC1C,IAAI,MAAM,CAAC,UAAU;gBAAE,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAClD,OAAO,gBAAgB,MAAM,CAAC,EAAE,KAAK,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;QAC9D,CAAC;QACD,iBAAiB,EAAE,CAAC,MAAsB,EAAE,EAAE,CAC5C,kBAAkB,MAAM,CAAC,EAAE,EAAE;QAC/B,oBAAoB,EAAE,IAAI;QAC1B,uBAAuB,EAAE,IAAI;QAC7B,QAAQ,EAAE,MAAM;KACjB;IAED,IAAI,EAAE,CAAC,SAAS,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,CAAC;CACvD,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/index.d.ts
new file mode 100644
index 0000000..bd5dab2
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/index.d.ts
@@ -0,0 +1,31 @@
+import type { ToolDefinition } from './core';
+import type { ToolOperation } from './core/interfaces';
+/**
+ * Array of all lexical tool definitions
+ */
+export declare const lexicalToolDefinitions: ToolDefinition[];
+/**
+ * Registry of all lexical tool operations
+ * Maps operation names to their implementations
+ */
+export declare const lexicalToolOperations: Record<string, ToolOperation<unknown, unknown>>;
+/**
+ * Complete lexical tools bundle for easy iteration and registration
+ */
+export declare const lexicalTools: {
+    definitions: ToolDefinition<unknown>[];
+    operations: Record<string, ToolOperation<unknown, unknown>>;
+};
+export * from './core';
+export * from './definitions';
+export * from './operations/insertBlock';
+export * from './operations/updateBlock';
+export * from './operations/deleteBlock';
+export * from './operations/readBlock';
+export * from './operations/readAllBlocks';
+export * from './operations/runBlock';
+export * from './operations/runAllBlocks';
+export * from './operations/listAvailableBlocks';
+export * from './operations/executeCode';
+export * from '../state';
+export * from './utils';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/index.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/index.js
new file mode 100644
index 0000000..f292aab
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/index.js
@@ -0,0 +1,83 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Lexical Tools - Main Export
+ *
+ * Centralized export of all tool definitions and operations for easy registration.
+ *
+ * @module jupyter-ui-lexical/tools
+ */
+// Import all tool definitions
+import { insertBlockTool } from './definitions/insertBlock';
+import { updateBlockTool } from './definitions/updateBlock';
+import { deleteBlockTool } from './definitions/deleteBlock';
+import { readBlockTool } from './definitions/readBlock';
+import { readAllBlocksTool } from './definitions/readAllBlocks';
+import { runBlockTool } from './definitions/runBlock';
+import { runAllBlocksTool } from './definitions/runAllBlocks';
+import { listAvailableBlocksTool } from './definitions/listAvailableBlocks';
+import { executeCodeTool } from './definitions/executeCode';
+// Import all operations
+import { insertBlockOperation } from './operations/insertBlock';
+import { updateBlockOperation } from './operations/updateBlock';
+import { deleteBlockOperation } from './operations/deleteBlock';
+import { readBlockOperation } from './operations/readBlock';
+import { readAllBlocksOperation } from './operations/readAllBlocks';
+import { runBlockOperation } from './operations/runBlock';
+import { runAllBlocksOperation } from './operations/runAllBlocks';
+import { listAvailableBlocksOperation } from './operations/listAvailableBlocks';
+import { executeCodeOperation } from './operations/executeCode';
+/**
+ * Array of all lexical tool definitions
+ */
+export const lexicalToolDefinitions = [
+    insertBlockTool,
+    updateBlockTool,
+    deleteBlockTool,
+    readBlockTool,
+    readAllBlocksTool,
+    runBlockTool,
+    runAllBlocksTool,
+    listAvailableBlocksTool,
+    executeCodeTool,
+];
+/**
+ * Registry of all lexical tool operations
+ * Maps operation names to their implementations
+ */
+export const lexicalToolOperations = {
+    insertBlock: insertBlockOperation,
+    updateBlock: updateBlockOperation,
+    deleteBlock: deleteBlockOperation,
+    readBlock: readBlockOperation,
+    readAllBlocks: readAllBlocksOperation,
+    runBlock: runBlockOperation,
+    runAllBlocks: runAllBlocksOperation,
+    listAvailableBlocks: listAvailableBlocksOperation,
+    executeCode: executeCodeOperation,
+};
+/**
+ * Complete lexical tools bundle for easy iteration and registration
+ */
+export const lexicalTools = {
+    definitions: lexicalToolDefinitions,
+    operations: lexicalToolOperations,
+};
+// Re-export everything for convenience
+export * from './core';
+export * from './definitions';
+export * from './operations/insertBlock';
+export * from './operations/updateBlock';
+export * from './operations/deleteBlock';
+export * from './operations/readBlock';
+export * from './operations/readAllBlocks';
+export * from './operations/runBlock';
+export * from './operations/runAllBlocks';
+export * from './operations/listAvailableBlocks';
+export * from './operations/executeCode';
+export * from '../state';
+export * from './utils';
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/index.js.map
new file mode 100644
index 0000000..83191f3
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/tools/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;;;GAMG;AAEH,8BAA8B;AAC9B,OAAO,EAAE,eAAe,EAAE,MAAM,2BAA2B,CAAC;AAC5D,OAAO,EAAE,eAAe,EAAE,MAAM,2BAA2B,CAAC;AAC5D,OAAO,EAAE,eAAe,EAAE,MAAM,2BAA2B,CAAC;AAC5D,OAAO,EAAE,aAAa,EAAE,MAAM,yBAAyB,CAAC;AACxD,OAAO,EAAE,iBAAiB,EAAE,MAAM,6BAA6B,CAAC;AAChE,OAAO,EAAE,YAAY,EAAE,MAAM,wBAAwB,CAAC;AACtD,OAAO,EAAE,gBAAgB,EAAE,MAAM,4BAA4B,CAAC;AAC9D,OAAO,EAAE,uBAAuB,EAAE,MAAM,mCAAmC,CAAC;AAC5E,OAAO,EAAE,eAAe,EAAE,MAAM,2BAA2B,CAAC;AAE5D,wBAAwB;AACxB,OAAO,EAAE,oBAAoB,EAAE,MAAM,0BAA0B,CAAC;AAChE,OAAO,EAAE,oBAAoB,EAAE,MAAM,0BAA0B,CAAC;AAChE,OAAO,EAAE,oBAAoB,EAAE,MAAM,0BAA0B,CAAC;AAChE,OAAO,EAAE,kBAAkB,EAAE,MAAM,wBAAwB,CAAC;AAC5D,OAAO,EAAE,sBAAsB,EAAE,MAAM,4BAA4B,CAAC;AACpE,OAAO,EAAE,iBAAiB,EAAE,MAAM,uBAAuB,CAAC;AAC1D,OAAO,EAAE,qBAAqB,EAAE,MAAM,2BAA2B,CAAC;AAClE,OAAO,EAAE,4BAA4B,EAAE,MAAM,kCAAkC,CAAC;AAChF,OAAO,EAAE,oBAAoB,EAAE,MAAM,0BAA0B,CAAC;AAMhE;;GAEG;AACH,MAAM,CAAC,MAAM,sBAAsB,GAAqB;IACtD,eAAe;IACf,eAAe;IACf,eAAe;IACf,aAAa;IACb,iBAAiB;IACjB,YAAY;IACZ,gBAAgB;IAChB,uBAAuB;IACvB,eAAe;CAChB,CAAC;AAEF;;;GAGG;AACH,MAAM,CAAC,MAAM,qBAAqB,GAG9B;IACF,WAAW,EAAE,oBAAoB;IACjC,WAAW,EAAE,oBAAoB;IACjC,WAAW,EAAE,oBAAoB;IACjC,SAAS,EAAE,kBAAkB;IAC7B,aAAa,EAAE,sBAAsB;IACrC,QAAQ,EAAE,iBAAiB;IAC3B,YAAY,EAAE,qBAAqB;IACnC,mBAAmB,EAAE,4BAA4B;IACjD,WAAW,EAAE,oBAAoB;CAClC,CAAC;AAEF;;GAEG;AACH,MAAM,CAAC,MAAM,YAAY,GAAG;IAC1B,WAAW,EAAE,sBAAsB;IACnC,UAAU,EAAE,qBAAqB;CAClC,CAAC;AAEF,uCAAuC;AACvC,cAAc,QAAQ,CAAC;AACvB,cAAc,eAAe,CAAC;AAC9B,cAAc,0BAA0B,CAAC;AACzC,cAAc,0BAA0B,CAAC;AACzC,cAAc,0BAA0B,CAAC;AACzC,cAAc,wBAAwB,CAAC;AACvC,cAAc,4BAA4B,CAAC;AAC3C,cAAc,uBAAuB,CAAC;AACtC,cAAc,2BAA2B,CAAC;AAC1C,cAAc,kCAAkC,CAAC;AACjD,cAAc,0BAA0B,CAAC;AACzC,cAAc,UAAU,CAAC;AACzB,cAAc,SAAS,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlock.d.ts
new file mode 100644
index 0000000..d7af6c7
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlock.d.ts
@@ -0,0 +1,52 @@
+/**
+ * Delete block operation for Lexical documents
+ *
+ * @module tools/core/operations/deleteBlock
+ */
+import type { ToolOperation } from '../core/interfaces';
+import { type DeleteBlockParams } from '../schemas/deleteBlock';
+/**
+ * Information about a deleted block.
+ */
+export interface DeletedBlockInfo {
+    /** Block ID of the deleted block */
+    id: string;
+    /** Block type (e.g. paragraph, heading, code, jupyter-cell) */
+    type: string;
+    /** Block source content */
+    source: string | string[];
+}
+/**
+ * Result of deleting a block
+ */
+export interface DeleteBlockResult {
+    /** Whether the operation succeeded */
+    success: boolean;
+    /** Array of deleted blocks with their information */
+    deletedBlocks: DeletedBlockInfo[];
+    /** Formatted message describing the deletion */
+    message: string;
+}
+/**
+ * Delete block operation - removes one or more blocks from a Lexical document
+ *
+ * IDs are stable identifiers so deletion order does not matter (unlike index-based deletion).
+ *
+ * Uses documentId as the universal identifier (matches Lexical component).
+ *
+ * Architecture:
+ * - Core layer: Works with documentId (platform-agnostic)
+ * - VS Code adapter: Converts documentId  documentUri via registry
+ * - Internal command: Uses documentUri to send message to webview
+ * - Webview: Lexical component uses same documentId
+ *
+ * @example
+ * ```typescript
+ * // Delete blocks
+ * await deleteBlockOperation.execute(
+ *   { ids: ["block-123", "block-456", "block-789"] },
+ *   { documentId: "doc-1", executeCommand }
+ * );
+ * ```
+ */
+export declare const deleteBlockOperation: ToolOperation<DeleteBlockParams, DeleteBlockResult>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlock.js
new file mode 100644
index 0000000..138fced
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlock.js
@@ -0,0 +1,110 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { readAllBlocksOperation } from './readAllBlocks';
+import { validateWithZod } from '@datalayer/jupyter-react/lib/tools/core/zodUtils';
+import { deleteBlockParamsSchema, } from '../schemas/deleteBlock';
+/**
+ * Delete block operation - removes one or more blocks from a Lexical document
+ *
+ * IDs are stable identifiers so deletion order does not matter (unlike index-based deletion).
+ *
+ * Uses documentId as the universal identifier (matches Lexical component).
+ *
+ * Architecture:
+ * - Core layer: Works with documentId (platform-agnostic)
+ * - VS Code adapter: Converts documentId  documentUri via registry
+ * - Internal command: Uses documentUri to send message to webview
+ * - Webview: Lexical component uses same documentId
+ *
+ * @example
+ * ```typescript
+ * // Delete blocks
+ * await deleteBlockOperation.execute(
+ *   { ids: ["block-123", "block-456", "block-789"] },
+ *   { documentId: "doc-1", executeCommand }
+ * );
+ * ```
+ */
+export const deleteBlockOperation = {
+    name: 'deleteBlock',
+    async execute(params, context) {
+        // Validate params using Zod
+        const validatedParams = validateWithZod(deleteBlockParamsSchema, params, 'deleteBlock');
+        const { ids } = validatedParams;
+        const { documentId } = context;
+        // Validate context
+        if (!documentId) {
+            throw new Error('Document ID is required for deleteBlock operation. ' +
+                'Ensure the tool execution context includes a valid documentId.');
+        }
+        // Ensure executor is available
+        if (!context.executor) {
+            throw new Error('Executor is required for deleteBlock operation. ' +
+                'This should be provided by the platform (DefaultExecutor, BridgeExecutor, etc.)');
+        }
+        try {
+            // First, read all blocks to get current state and validate IDs
+            // Use detailed format to get source for deletion messages
+            const blocksResult = await readAllBlocksOperation.execute({ format: 'detailed' }, context);
+            if (!blocksResult.success || !blocksResult.blocks) {
+                throw new Error('Failed to read blocks for bounds validation');
+            }
+            const blocks = blocksResult.blocks;
+            const blockIds = new Set(blocks.map(block => block.block_id));
+            // Validate ALL IDs exist
+            const missingIds = [];
+            for (const id of ids) {
+                if (!blockIds.has(id)) {
+                    missingIds.push(id);
+                }
+            }
+            if (missingIds.length > 0) {
+                throw new Error(`Block ID(s) not found: ${missingIds.join(', ')}. ` +
+                    `Document has ${blocks.length} blocks.`);
+            }
+            // Store information about blocks before deletion
+            const deletedBlocks = [];
+            // Delete each block (order doesn't matter - IDs are stable)
+            for (const id of ids) {
+                // Find and store block info before deletion
+                const block = blocks.find(b => b.block_id === id);
+                if (!block) {
+                    // This shouldn't happen after validation, but be safe
+                    throw new Error(`Block with ID '${id}' not found during deletion`);
+                }
+                // Execute deletion via executor
+                await context.executor.execute(this.name, {
+                    blockId: id,
+                });
+                // Track deletion
+                deletedBlocks.push({
+                    id: block.block_id,
+                    type: block.block_type,
+                    source: block.source,
+                });
+            }
+            // Format message similar to deleteCell pattern
+            const message = deletedBlocks
+                .map(block => {
+                return (`Deleted block with ID '${block.id}':\n` +
+                    `Type: ${block.type}\n` +
+                    `----------------------------------------`);
+            })
+                .join('\n\n');
+            // Return success result
+            return {
+                success: true,
+                deletedBlocks,
+                message,
+            };
+        }
+        catch (error) {
+            const errorMessage = error instanceof Error ? error.message : String(error);
+            throw new Error(`Failed to delete block(s): ${errorMessage}`);
+        }
+    },
+};
+//# sourceMappingURL=deleteBlock.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlock.js.map
new file mode 100644
index 0000000..e455e12
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/deleteBlock.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"deleteBlock.js","sourceRoot":"","sources":["../../../src/tools/operations/deleteBlock.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/executeCode.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/executeCode.d.ts
new file mode 100644
index 0000000..15d6537
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/executeCode.d.ts
@@ -0,0 +1,33 @@
+/**
+ * Platform-agnostic code execution operation for Lexical documents.
+ * Executes code directly in the kernel without creating or modifying blocks.
+ *
+ * @module tools/operations/executeCode
+ */
+import type { ToolOperation } from '../core/interfaces';
+import { type ExecuteCodeParams } from '../schemas/executeCode';
+/**
+ * Result from executeCode operation.
+ */
+export interface ExecuteCodeResult {
+    success: boolean;
+    /** Execution outputs (streams, results, errors) */
+    outputs?: Array<{
+        type: 'stream' | 'execute_result' | 'display_data' | 'error';
+        content: unknown;
+    }>;
+    /** Error message if execution failed */
+    error?: string;
+    /** Execution count (if stored in history) */
+    executionCount?: number;
+}
+/**
+ * Executes code directly in the kernel without creating a block.
+ *
+ * This is useful for:
+ * - Variable inspection
+ * - Environment setup
+ * - Background tasks
+ * - Tool introspection
+ */
+export declare const executeCodeOperation: ToolOperation<ExecuteCodeParams, ExecuteCodeResult>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/executeCode.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/executeCode.js
new file mode 100644
index 0000000..b9c3b1e
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/executeCode.js
@@ -0,0 +1,56 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { validateWithZod } from '@datalayer/jupyter-react/lib/tools/core/zodUtils';
+import { executeCodeParamsSchema, } from '../schemas/executeCode';
+/**
+ * Executes code directly in the kernel without creating a block.
+ *
+ * This is useful for:
+ * - Variable inspection
+ * - Environment setup
+ * - Background tasks
+ * - Tool introspection
+ */
+export const executeCodeOperation = {
+    name: 'executeCode',
+    async execute(params, context) {
+        console.log('[executeCodeOperation] Called with params:', params);
+        console.log('[executeCodeOperation] Context:', {
+            documentId: context.documentId,
+            hasExecutor: !!context.executor,
+        });
+        // Validate params using Zod
+        const validatedParams = validateWithZod(executeCodeParamsSchema, params, 'executeCode');
+        console.log('[executeCodeOperation] Validated params:', validatedParams);
+        const { documentId } = context;
+        if (!documentId) {
+            return {
+                success: false,
+                error: 'Document ID is required for this operation.',
+            };
+        }
+        // Ensure executor is available
+        if (!context.executor) {
+            throw new Error('Executor is required for executeCode operation. ' +
+                'This should be provided by the platform (DefaultExecutor, BridgeExecutor, etc.)');
+        }
+        try {
+            console.log('[executeCodeOperation] Calling executor.execute with:', {
+                operationName: this.name,
+                validatedParams,
+            });
+            // Call executor (uses this.name for DRY principle)
+            const result = (await context.executor.execute(this.name, validatedParams));
+            console.log('[executeCodeOperation] Executor result:', result);
+            return result;
+        }
+        catch (error) {
+            const errorMessage = error instanceof Error ? error.message : String(error);
+            throw new Error(`Failed to execute code: ${errorMessage}`);
+        }
+    },
+};
+//# sourceMappingURL=executeCode.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/executeCode.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/executeCode.js.map
new file mode 100644
index 0000000..cf34e8e
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/executeCode.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"executeCode.js","sourceRoot":"","sources":["../../../src/tools/operations/executeCode.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAUH,OAAO,EAAE,eAAe,EAAE,MAAM,kDAAkD,CAAC;AACnF,OAAO,EACL,uBAAuB,GAExB,MAAM,wBAAwB,CAAC;AAkBhC;;;;;;;;GAQG;AACH,MAAM,CAAC,MAAM,oBAAoB,GAG7B;IACF,IAAI,EAAE,aAAa;IAEnB,KAAK,CAAC,OAAO,CACX,MAAe,EACf,OAA6B;QAE7B,OAAO,CAAC,GAAG,CAAC,4CAA4C,EAAE,MAAM,CAAC,CAAC;QAClE,OAAO,CAAC,GAAG,CAAC,iCAAiC,EAAE;YAC7C,UAAU,EAAE,OAAO,CAAC,UAAU;YAC9B,WAAW,EAAE,CAAC,CAAC,OAAO,CAAC,QAAQ;SAChC,CAAC,CAAC;QAEH,4BAA4B;QAC5B,MAAM,eAAe,GAAG,eAAe,CACrC,uBAA8B,EAC9B,MAAM,EACN,aAAa,CACO,CAAC;QAEvB,OAAO,CAAC,GAAG,CAAC,0CAA0C,EAAE,eAAe,CAAC,CAAC;QAEzE,MAAM,EAAE,UAAU,EAAE,GAAG,OAAO,CAAC;QAE/B,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,KAAK,EAAE,6CAA6C;aACrD,CAAC;QACJ,CAAC;QAED,+BAA+B;QAC/B,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACtB,MAAM,IAAI,KAAK,CACb,kDAAkD;gBAChD,iFAAiF,CACpF,CAAC;QACJ,CAAC;QAED,IAAI,CAAC;YACH,OAAO,CAAC,GAAG,CAAC,uDAAuD,EAAE;gBACnE,aAAa,EAAE,IAAI,CAAC,IAAI;gBACxB,eAAe;aAChB,CAAC,CAAC;YAEH,mDAAmD;YACnD,MAAM,MAAM,GAAG,CAAC,MAAM,OAAO,CAAC,QAAQ,CAAC,OAAO,CAC5C,IAAI,CAAC,IAAI,EACT,eAAe,CAChB,CAAsB,CAAC;YAExB,OAAO,CAAC,GAAG,CAAC,yCAAyC,EAAE,MAAM,CAAC,CAAC;YAC/D,OAAO,MAAM,CAAC;QAChB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,YAAY,GAChB,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACzD,MAAM,IAAI,KAAK,CAAC,2BAA2B,YAAY,EAAE,CAAC,CAAC;QAC7D,CAAC;IACH,CAAC;CACF,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.d.ts
new file mode 100644
index 0000000..407c61e
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.d.ts
@@ -0,0 +1,29 @@
+/**
+ * Insert block operation for Lexical documents
+ *
+ * @module tools/core/operations/insertBlock
+ */
+import type { ToolOperation } from '../core/interfaces';
+import { type InsertBlockParams } from '../schemas/insertBlock';
+/**
+ * Result of inserting a block
+ */
+export interface InsertBlockResult {
+    /** Whether the operation succeeded */
+    success: boolean;
+    /** Success message describing the insertion */
+    message?: string;
+    /** Error message if operation failed */
+    error?: string;
+}
+/**
+ * Insert block operation - adds a new block to a Lexical document
+ *
+ * Supports inserting various block types:
+ * - paragraph: Regular text paragraph
+ * - heading: Heading block (specify tag: h1-h6 in properties)
+ * - code: Code block (specify language in properties)
+ * - quote: Blockquote
+ * - list/listitem: List blocks
+ */
+export declare const insertBlockOperation: ToolOperation<InsertBlockParams, InsertBlockResult>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.js
new file mode 100644
index 0000000..f5a9369
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.js
@@ -0,0 +1,60 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { validateWithZod } from '@datalayer/jupyter-react/lib/tools/core/zodUtils';
+import { insertBlockParamsSchema, } from '../schemas/insertBlock';
+/**
+ * Insert block operation - adds a new block to a Lexical document
+ *
+ * Supports inserting various block types:
+ * - paragraph: Regular text paragraph
+ * - heading: Heading block (specify tag: h1-h6 in properties)
+ * - code: Code block (specify language in properties)
+ * - quote: Blockquote
+ * - list/listitem: List blocks
+ */
+export const insertBlockOperation = {
+    name: 'insertBlock',
+    async execute(params, context) {
+        // Validate params using Zod
+        const validatedParams = validateWithZod(insertBlockParamsSchema, params, 'insertBlock');
+        const { afterId, type, source, properties } = validatedParams;
+        const { documentId } = context;
+        // Validate context
+        if (!documentId) {
+            throw new Error('Document ID is required for insertBlock operation. ' +
+                'Ensure the tool execution context includes a valid documentId.');
+        }
+        // Ensure executor is available
+        if (!context.executor) {
+            throw new Error('Executor is required for insertBlock operation. ' +
+                'This should be provided by the platform (DefaultExecutor, BridgeExecutor, etc.)');
+        }
+        try {
+            // Call executor with individual parameters (matches notebook pattern)
+            // The state method will handle creating the LexicalBlock object
+            await context.executor.execute(this.name, {
+                type,
+                source,
+                properties,
+                afterId,
+            });
+            const message = afterId === 'TOP'
+                ? `Block of type '${type}' inserted at the beginning of the document`
+                : afterId === 'BOTTOM'
+                    ? `Block of type '${type}' inserted at the end of the document`
+                    : `Block of type '${type}' inserted after block '${afterId}'`;
+            return {
+                success: true,
+                message,
+            };
+        }
+        catch (error) {
+            const errorMessage = error instanceof Error ? error.message : String(error);
+            throw new Error(`Failed to insert block: ${errorMessage}`);
+        }
+    },
+};
+//# sourceMappingURL=insertBlock.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.js.map
new file mode 100644
index 0000000..805bc04
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/insertBlock.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"insertBlock.js","sourceRoot":"","sources":["../../../src/tools/operations/insertBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,eAAe,EAAE,MAAM,kDAAkD,CAAC;AACnF,OAAO,EACL,uBAAuB,GAExB,MAAM,wBAAwB,CAAC;AAgBhC;;;;;;;;;GASG;AACH,MAAM,CAAC,MAAM,oBAAoB,GAG7B;IACF,IAAI,EAAE,aAAa;IAEnB,KAAK,CAAC,OAAO,CACX,MAAe,EACf,OAA6B;QAE7B,4BAA4B;QAC5B,MAAM,eAAe,GAAG,eAAe,CACrC,uBAA8B,EAC9B,MAAM,EACN,aAAa,CACO,CAAC;QAEvB,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,UAAU,EAAE,GAAG,eAAe,CAAC;QAC9D,MAAM,EAAE,UAAU,EAAE,GAAG,OAAO,CAAC;QAE/B,mBAAmB;QACnB,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,MAAM,IAAI,KAAK,CACb,qDAAqD;gBACnD,gEAAgE,CACnE,CAAC;QACJ,CAAC;QAED,+BAA+B;QAC/B,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACtB,MAAM,IAAI,KAAK,CACb,kDAAkD;gBAChD,iFAAiF,CACpF,CAAC;QACJ,CAAC;QAED,IAAI,CAAC;YACH,sEAAsE;YACtE,gEAAgE;YAChE,MAAM,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE;gBACxC,IAAI;gBACJ,MAAM;gBACN,UAAU;gBACV,OAAO;aACR,CAAC,CAAC;YAEH,MAAM,OAAO,GACX,OAAO,KAAK,KAAK;gBACf,CAAC,CAAC,kBAAkB,IAAI,6CAA6C;gBACrE,CAAC,CAAC,OAAO,KAAK,QAAQ;oBACpB,CAAC,CAAC,kBAAkB,IAAI,uCAAuC;oBAC/D,CAAC,CAAC,kBAAkB,IAAI,2BAA2B,OAAO,GAAG,CAAC;YAEpE,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,OAAO;aACR,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,YAAY,GAChB,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACzD,MAAM,IAAI,KAAK,CAAC,2BAA2B,YAAY,EAAE,CAAC,CAAC;QAC7D,CAAC;IACH,CAAC;CACF,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.d.ts
new file mode 100644
index 0000000..88ce07b
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.d.ts
@@ -0,0 +1,88 @@
+/**
+ * List available block types operation for Lexical documents
+ *
+ * This operation returns the schema of all registered Lexical node types,
+ * helping Copilot understand what blocks can be inserted and their properties.
+ *
+ * @module tools/core/operations/listAvailableBlocks
+ */
+import type { ToolOperation } from '../core/interfaces';
+import { type ListAvailableBlocksParams, type BlockCategory } from '../schemas/listAvailableBlocks';
+/**
+ * Example block usage
+ */
+export interface BlockExample {
+    /** Block type identifier (e.g., "paragraph", "code", "jupyter-cell") */
+    type: string;
+    /** Example source code or text content */
+    source: string;
+    /** Example properties/metadata */
+    properties?: Record<string, unknown>;
+}
+/**
+ * Schema for a single block type
+ */
+export interface BlockTypeSchema {
+    /** Block type identifier */
+    type: string;
+    /** Human-readable display name */
+    displayName: string;
+    /** Block category */
+    category: BlockCategory;
+    /** Description of what this block does */
+    description: string;
+    /** Required properties for this block type */
+    requiredProperties?: string[];
+    /** Optional properties with their schemas */
+    optionalProperties?: Record<string, {
+        type: string;
+        description: string;
+        enum?: string[];
+        default?: unknown;
+    }>;
+    /** Example usage */
+    example?: BlockExample;
+    /** Whether this block can contain children */
+    canContainChildren?: boolean;
+    /** Whether this block is executable (like Jupyter code blocks) */
+    isExecutable?: boolean;
+}
+/**
+ * Result of listing available blocks
+ */
+export interface ListAvailableBlocksResult {
+    /** Whether the operation succeeded */
+    success: boolean;
+    /** Array of available block type schemas */
+    types?: BlockTypeSchema[];
+    /** Number of available block types */
+    count?: number;
+    /** Categories available */
+    categories?: BlockCategory[];
+    /** Error message if operation failed */
+    error?: string;
+}
+/**
+ * List available blocks operation
+ *
+ * Returns the schema of all registered Lexical node types, enabling
+ * Copilot to understand what blocks can be inserted and how to use them.
+ *
+ * **How it works:**
+ * 1. LexicalHandle.getAvailableBlockTypes() queries the editor's registered nodes
+ *    - Accesses editor._nodes Map (contains all node classes)
+ *    - Returns array with node.getType() for each registered node
+ * 2. We match node types with DEFAULT_BLOCK_TYPES schemas
+ * 3. Only return schemas for nodes that are actually registered
+ *
+ * **What Lexical nodes actually expose:**
+ * - getType(): string (e.g., "equation", "image", "jupyter-cell")
+ * - Constructor name (e.g., EquationNode, ImageNode, JupyterCellNode)
+ * - That's it! Nodes don't expose descriptions or metadata
+ *
+ * **Our schema provides:**
+ * - displayName, description, category (from DEFAULT_BLOCK_TYPES)
+ * - requiredProperties, optionalProperties (for construction)
+ * - examples, canContainChildren, isExecutable (usage hints)
+ */
+export declare const listAvailableBlocksOperation: ToolOperation<ListAvailableBlocksParams, ListAvailableBlocksResult>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.js
new file mode 100644
index 0000000..a7cec9f
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.js
@@ -0,0 +1,235 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { validateWithZod } from '@datalayer/jupyter-react/lib/tools/core/zodUtils';
+import { listAvailableBlocksParamsSchema, } from '../schemas/listAvailableBlocks';
+/**
+ * Default Lexical block types supported by the editor
+ *
+ * This represents the standard Lexical node types plus custom Datalayer extensions.
+ */
+const DEFAULT_BLOCK_TYPES = [
+    // Text blocks
+    {
+        type: 'paragraph',
+        displayName: 'Paragraph',
+        category: 'text',
+        description: 'A regular paragraph block for text content. Use plain text in source field - do NOT include markdown syntax.',
+        canContainChildren: true,
+        example: {
+            type: 'paragraph',
+            source: 'This is a regular paragraph with text.',
+        },
+    },
+    // Heading blocks
+    {
+        type: 'heading',
+        displayName: 'Heading',
+        category: 'heading',
+        description: 'A semantic HTML heading block (NOT markdown). Use plain text in source field - do NOT include markdown syntax like # or ##. Specify heading level (h1-h6) via the tag property.',
+        requiredProperties: ['tag'],
+        optionalProperties: {
+            tag: {
+                type: 'string',
+                description: 'Heading level: h1 (largest) to h6 (smallest). Use h1 for main titles, h2 for sections, h3 for subsections.',
+                enum: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'],
+                default: 'h2',
+            },
+        },
+        canContainChildren: true,
+        example: {
+            type: 'heading',
+            source: 'Introduction',
+            properties: { tag: 'h1' },
+        },
+    },
+    // Quote blocks
+    {
+        type: 'quote',
+        displayName: 'Blockquote',
+        category: 'text',
+        description: 'A blockquote for highlighting quoted text',
+        canContainChildren: true,
+        example: {
+            type: 'quote',
+            source: 'To be or not to be, that is the question.',
+        },
+    },
+    // List blocks
+    {
+        type: 'list',
+        displayName: 'List',
+        category: 'list',
+        description: 'A list container supporting bullet or numbered items. Provide items as newline-separated text in the source field - each line becomes a separate list item automatically.',
+        optionalProperties: {
+            listType: {
+                type: 'string',
+                description: 'Type of list: bullet or number',
+                enum: ['bullet', 'number'],
+                default: 'bullet',
+            },
+            start: {
+                type: 'number',
+                description: 'Starting number for numbered lists',
+                default: 1,
+            },
+        },
+        canContainChildren: true,
+        example: {
+            type: 'list',
+            source: 'Apple\nBanana\nTangerine',
+            properties: { listType: 'number', start: 1 },
+        },
+    },
+    // Horizontal rule blocks
+    {
+        type: 'horizontalrule',
+        displayName: 'Horizontal Rule',
+        category: 'text',
+        description: 'A horizontal divider line for visually separating sections of content. Source field should be empty or omitted.',
+        canContainChildren: false,
+        example: {
+            type: 'horizontalrule',
+            source: '',
+        },
+    },
+    // Special Datalayer blocks - Jupyter cells
+    {
+        type: 'jupyter-cell',
+        displayName: 'Jupyter Code Cell',
+        category: 'jupyter',
+        description: 'An executable Jupyter code cell integrated into the document. RECOMMENDED: Use this for executable code (Python, JavaScript, etc.) instead of static code blocks, as it allows users to run code and see outputs directly in the document.',
+        optionalProperties: {
+            language: {
+                type: 'string',
+                description: 'Programming language for the cell',
+                enum: ['python', 'javascript'],
+                default: 'python',
+            },
+            kernelName: {
+                type: 'string',
+                description: 'Name of the Jupyter kernel to use',
+            },
+        },
+        canContainChildren: false,
+        isExecutable: true,
+        example: {
+            type: 'jupyter-cell',
+            source: "import pandas as pd\ndf = pd.DataFrame({'A': [1, 2, 3]})\ndf.head()",
+            properties: { language: 'python' },
+        },
+    },
+    // Code blocks (static, non-executable)
+    {
+        type: 'code',
+        displayName: 'Code Block',
+        category: 'code',
+        description: 'A static code block for displaying code without execution. Use this ONLY for non-executable code like SQL queries, configuration files, or pseudocode. For executable Python/JavaScript code, prefer jupyter-cell instead.',
+        optionalProperties: {
+            language: {
+                type: 'string',
+                description: 'Programming language for syntax highlighting (e.g., sql, json, yaml, bash)',
+                default: 'plaintext',
+            },
+        },
+        canContainChildren: false,
+        isExecutable: false,
+        example: {
+            type: 'code',
+            source: 'SELECT * FROM users WHERE active = true;',
+            properties: { language: 'sql' },
+        },
+    },
+    // Equation blocks
+    {
+        type: 'equation',
+        displayName: 'Equation',
+        category: 'media',
+        description: 'A LaTeX equation block for mathematical notation. Use LaTeX syntax in the source field. Equations are always displayed as centered display equations (not inline). Do NOT include properties.inline - it is always false.',
+        optionalProperties: {
+            equation: {
+                type: 'string',
+                description: 'LaTeX equation string (e.g., "E = mc^2" or "\\\\frac{a}{b}" or "\\\\int_0^\\\\infty e^{-x} dx"). Note: this is optional - you can also just put the LaTeX in the source field.',
+            },
+        },
+        canContainChildren: false,
+        isExecutable: false,
+        example: {
+            type: 'equation',
+            source: 'E = mc^2',
+            properties: {},
+        },
+    },
+];
+/**
+ * List available blocks operation
+ *
+ * Returns the schema of all registered Lexical node types, enabling
+ * Copilot to understand what blocks can be inserted and how to use them.
+ *
+ * **How it works:**
+ * 1. LexicalHandle.getAvailableBlockTypes() queries the editor's registered nodes
+ *    - Accesses editor._nodes Map (contains all node classes)
+ *    - Returns array with node.getType() for each registered node
+ * 2. We match node types with DEFAULT_BLOCK_TYPES schemas
+ * 3. Only return schemas for nodes that are actually registered
+ *
+ * **What Lexical nodes actually expose:**
+ * - getType(): string (e.g., "equation", "image", "jupyter-cell")
+ * - Constructor name (e.g., EquationNode, ImageNode, JupyterCellNode)
+ * - That's it! Nodes don't expose descriptions or metadata
+ *
+ * **Our schema provides:**
+ * - displayName, description, category (from DEFAULT_BLOCK_TYPES)
+ * - requiredProperties, optionalProperties (for construction)
+ * - examples, canContainChildren, isExecutable (usage hints)
+ */
+export const listAvailableBlocksOperation = {
+    name: 'listAvailableBlocks',
+    async execute(params, context) {
+        // Validate params using Zod
+        const validatedParams = validateWithZod(listAvailableBlocksParamsSchema, params || {}, 'listAvailableBlocks');
+        const { category } = validatedParams;
+        const { documentId } = context;
+        try {
+            let types = DEFAULT_BLOCK_TYPES;
+            // Try to get dynamically registered types from the document
+            // This is optional - if no documentId or executor, we fall back to DEFAULT_BLOCK_TYPES
+            if (documentId && context.executor) {
+                try {
+                    // Call executor to get registered nodes
+                    const registeredNodes = (await context.executor.execute('listAvailableBlocks', {}));
+                    if (registeredNodes && registeredNodes.length > 0) {
+                        // Lexical nodes have types like: "paragraph", "heading", "code", "quote",
+                        // "list", "listitem", "table", "equation", "image", "youtube", "jupyter-cell"
+                        const registeredTypes = new Set(registeredNodes.map((node) => node.type.toLowerCase()));
+                        // Filter to only schemas for registered node types
+                        types = DEFAULT_BLOCK_TYPES.filter(schema => registeredTypes.has(schema.type.toLowerCase()));
+                    }
+                }
+                catch (error) {
+                    console.warn('Failed to get dynamic block types, using static list:', error);
+                }
+            }
+            // Filter by category if specified
+            if (category) {
+                types = types.filter(block => block.category === category);
+            }
+            // Extract unique categories
+            const categories = Array.from(new Set(types.map(block => block.category)));
+            return {
+                success: true,
+                types,
+                count: types.length,
+                categories,
+            };
+        }
+        catch (error) {
+            const errorMessage = error instanceof Error ? error.message : String(error);
+            throw new Error(`Failed to list available blocks: ${errorMessage}`);
+        }
+    },
+};
+//# sourceMappingURL=listAvailableBlocks.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.js.map
new file mode 100644
index 0000000..d82c250
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/listAvailableBlocks.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"listAvailableBlocks.js","sourceRoot":"","sources":["../../../src/tools/operations/listAvailableBlocks.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readAllBlocks.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readAllBlocks.d.ts
new file mode 100644
index 0000000..d90fd1b
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readAllBlocks.d.ts
@@ -0,0 +1,30 @@
+/**
+ * Read all blocks operation for Lexical documents
+ *
+ * @module tools/core/operations/readAllBlocks
+ */
+import type { ToolOperation } from '../core/interfaces';
+import type { LexicalBlock, BriefBlock } from '../core/types';
+import { type ReadAllBlocksParams } from '../schemas/readAllBlocks';
+/**
+ * Result of reading all blocks
+ */
+export interface ReadAllBlocksResult {
+    /** Whether the operation succeeded */
+    success: boolean;
+    /** The blocks that were read (each includes block_id) */
+    blocks?: LexicalBlock[] | BriefBlock[];
+    /** Number of blocks returned */
+    blockCount?: number;
+    /** Error message if operation failed */
+    error?: string;
+}
+/**
+ * Read all blocks operation - retrieves all blocks from a Lexical document
+ *
+ * Returns all blocks with their block_id values for stable addressing.
+ * Use the block_id in subsequent insertBlock operations.
+ *
+ * Uses lexicalId as the universal identifier (matches Lexical component).
+ */
+export declare const readAllBlocksOperation: ToolOperation<ReadAllBlocksParams, ReadAllBlocksResult>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readAllBlocks.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readAllBlocks.js
new file mode 100644
index 0000000..cb700ba
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readAllBlocks.js
@@ -0,0 +1,50 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { validateWithZod } from '@datalayer/jupyter-react/lib/tools/core/zodUtils';
+import { readAllBlocksParamsSchema, } from '../schemas/readAllBlocks';
+/**
+ * Read all blocks operation - retrieves all blocks from a Lexical document
+ *
+ * Returns all blocks with their block_id values for stable addressing.
+ * Use the block_id in subsequent insertBlock operations.
+ *
+ * Uses lexicalId as the universal identifier (matches Lexical component).
+ */
+export const readAllBlocksOperation = {
+    name: 'readAllBlocks',
+    async execute(params, context) {
+        // Validate params using Zod
+        const validatedParams = validateWithZod(readAllBlocksParamsSchema, params || {}, 'readAllBlocks');
+        const { format = 'brief' } = validatedParams;
+        const { documentId } = context;
+        // Validate context
+        if (!documentId) {
+            throw new Error('Document ID is required for readAllBlocks operation. ' +
+                'Ensure the tool execution context includes a valid documentId.');
+        }
+        // Ensure executor is available
+        if (!context.executor) {
+            throw new Error('Executor is required for readAllBlocks operation. ' +
+                'This should be provided by the platform (DefaultExecutor, BridgeExecutor, etc.)');
+        }
+        try {
+            // Call executor with format parameter
+            const blocks = (await context.executor.execute(this.name, {
+                format,
+            }));
+            return {
+                success: true,
+                blocks,
+                blockCount: blocks.length,
+            };
+        }
+        catch (error) {
+            const errorMessage = error instanceof Error ? error.message : String(error);
+            throw new Error(`Failed to read all blocks: ${errorMessage}`);
+        }
+    },
+};
+//# sourceMappingURL=readAllBlocks.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readAllBlocks.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readAllBlocks.js.map
new file mode 100644
index 0000000..c135aa3
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readAllBlocks.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"readAllBlocks.js","sourceRoot":"","sources":["../../../src/tools/operations/readAllBlocks.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAUH,OAAO,EAAE,eAAe,EAAE,MAAM,kDAAkD,CAAC;AACnF,OAAO,EACL,yBAAyB,GAE1B,MAAM,0BAA0B,CAAC;AAmBlC;;;;;;;GAOG;AACH,MAAM,CAAC,MAAM,sBAAsB,GAG/B;IACF,IAAI,EAAE,eAAe;IAErB,KAAK,CAAC,OAAO,CACX,MAAe,EACf,OAA6B;QAE7B,4BAA4B;QAC5B,MAAM,eAAe,GAAG,eAAe,CACrC,yBAAgC,EAChC,MAAM,IAAI,EAAE,EACZ,eAAe,CACO,CAAC;QAEzB,MAAM,EAAE,MAAM,GAAG,OAAO,EAAE,GAAG,eAAe,CAAC;QAC7C,MAAM,EAAE,UAAU,EAAE,GAAG,OAAO,CAAC;QAE/B,mBAAmB;QACnB,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,MAAM,IAAI,KAAK,CACb,uDAAuD;gBACrD,gEAAgE,CACnE,CAAC;QACJ,CAAC;QAED,+BAA+B;QAC/B,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACtB,MAAM,IAAI,KAAK,CACb,oDAAoD;gBAClD,iFAAiF,CACpF,CAAC;QACJ,CAAC;QAED,IAAI,CAAC;YACH,sCAAsC;YACtC,MAAM,MAAM,GAAG,CAAC,MAAM,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE;gBACxD,MAAM;aACP,CAAC,CAAkC,CAAC;YAErC,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,MAAM;gBACN,UAAU,EAAE,MAAM,CAAC,MAAM;aAC1B,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,YAAY,GAChB,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACzD,MAAM,IAAI,KAAK,CAAC,8BAA8B,YAAY,EAAE,CAAC,CAAC;QAChE,CAAC;IACH,CAAC;CACF,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readBlock.d.ts
new file mode 100644
index 0000000..f7c452f
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readBlock.d.ts
@@ -0,0 +1,27 @@
+/**
+ * Read single block operation for Lexical documents
+ *
+ * @module tools/core/operations/readBlock
+ */
+import type { ToolOperation } from '../core/interfaces';
+import type { LexicalBlock } from '../core/types';
+import { type ReadBlockParams } from '../schemas/readBlock';
+/**
+ * Result of reading a single block
+ */
+export interface ReadBlockResult {
+    /** Whether the operation succeeded */
+    success: boolean;
+    /** The block that was read (includes block_id) */
+    block?: LexicalBlock;
+    /** Error message if operation failed */
+    error?: string;
+}
+/**
+ * Read block operation - retrieves a single block from a Lexical document
+ *
+ * Returns the block with the specified block_id for inspection.
+ *
+ * Uses documentId as the universal identifier (matches Lexical component).
+ */
+export declare const readBlockOperation: ToolOperation<ReadBlockParams, ReadBlockResult>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readBlock.js
new file mode 100644
index 0000000..70a4ca3
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readBlock.js
@@ -0,0 +1,63 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { readAllBlocksOperation } from './readAllBlocks';
+import { validateWithZod } from '@datalayer/jupyter-react/lib/tools/core/zodUtils';
+import { readBlockParamsSchema, } from '../schemas/readBlock';
+/**
+ * Read block operation - retrieves a single block from a Lexical document
+ *
+ * Returns the block with the specified block_id for inspection.
+ *
+ * Uses documentId as the universal identifier (matches Lexical component).
+ */
+export const readBlockOperation = {
+    name: 'readBlock',
+    async execute(params, context) {
+        // Validate params using Zod
+        const validatedParams = validateWithZod(readBlockParamsSchema, params, 'readBlock');
+        const { id } = validatedParams;
+        const { documentId } = context;
+        // Validate context
+        if (!documentId) {
+            throw new Error('Document ID is required for readBlock operation. ' +
+                'Ensure the tool execution context includes a valid documentId.');
+        }
+        // Ensure executor is available
+        if (!context.executor) {
+            throw new Error('Executor is required for readBlock operation. ' +
+                'This should be provided by the platform (DefaultExecutor, BridgeExecutor, etc.)');
+        }
+        try {
+            // First, validate that the block ID exists (bounds validation)
+            const blocksResult = await readAllBlocksOperation.execute({}, context);
+            if (!blocksResult.success || !blocksResult.blocks) {
+                throw new Error('Failed to read blocks for bounds validation');
+            }
+            const blockCount = blocksResult.blocks.length;
+            const blockExists = blocksResult.blocks.some(block => block.block_id === id);
+            // Validate block ID exists (match similar pattern to readCell)
+            if (!blockExists) {
+                return {
+                    success: false,
+                    error: `Block ID '${id}' not found. Document has ${blockCount} block${blockCount !== 1 ? 's' : ''}.`,
+                };
+            }
+            // Call executor (uses this.name for DRY principle)
+            const block = (await context.executor.execute(this.name, {
+                blockId: id,
+            }));
+            return {
+                success: true,
+                block,
+            };
+        }
+        catch (error) {
+            const errorMessage = error instanceof Error ? error.message : String(error);
+            throw new Error(`Failed to read block: ${errorMessage}`);
+        }
+    },
+};
+//# sourceMappingURL=readBlock.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readBlock.js.map
new file mode 100644
index 0000000..677cd85
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/readBlock.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"readBlock.js","sourceRoot":"","sources":["../../../src/tools/operations/readBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAUH,OAAO,EAAE,sBAAsB,EAAE,MAAM,iBAAiB,CAAC;AACzD,OAAO,EAAE,eAAe,EAAE,MAAM,kDAAkD,CAAC;AACnF,OAAO,EACL,qBAAqB,GAEtB,MAAM,sBAAsB,CAAC;AAgB9B;;;;;;GAMG;AACH,MAAM,CAAC,MAAM,kBAAkB,GAG3B;IACF,IAAI,EAAE,WAAW;IAEjB,KAAK,CAAC,OAAO,CACX,MAAe,EACf,OAA6B;QAE7B,4BAA4B;QAC5B,MAAM,eAAe,GAAG,eAAe,CACrC,qBAA4B,EAC5B,MAAM,EACN,WAAW,CACO,CAAC;QAErB,MAAM,EAAE,EAAE,EAAE,GAAG,eAAe,CAAC;QAC/B,MAAM,EAAE,UAAU,EAAE,GAAG,OAAO,CAAC;QAE/B,mBAAmB;QACnB,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,MAAM,IAAI,KAAK,CACb,mDAAmD;gBACjD,gEAAgE,CACnE,CAAC;QACJ,CAAC;QAED,+BAA+B;QAC/B,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACtB,MAAM,IAAI,KAAK,CACb,gDAAgD;gBAC9C,iFAAiF,CACpF,CAAC;QACJ,CAAC;QAED,IAAI,CAAC;YACH,+DAA+D;YAC/D,MAAM,YAAY,GAAG,MAAM,sBAAsB,CAAC,OAAO,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;YAEvE,IAAI,CAAC,YAAY,CAAC,OAAO,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC;gBAClD,MAAM,IAAI,KAAK,CAAC,6CAA6C,CAAC,CAAC;YACjE,CAAC;YAED,MAAM,UAAU,GAAG,YAAY,CAAC,MAAM,CAAC,MAAM,CAAC;YAC9C,MAAM,WAAW,GAAG,YAAY,CAAC,MAAM,CAAC,IAAI,CAC1C,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,KAAK,EAAE,CAC/B,CAAC;YAEF,+DAA+D;YAC/D,IAAI,CAAC,WAAW,EAAE,CAAC;gBACjB,OAAO;oBACL,OAAO,EAAE,KAAK;oBACd,KAAK,EAAE,aAAa,EAAE,6BAA6B,UAAU,SAAS,UAAU,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG;iBACrG,CAAC;YACJ,CAAC;YAED,mDAAmD;YACnD,MAAM,KAAK,GAAG,CAAC,MAAM,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE;gBACvD,OAAO,EAAE,EAAE;aACZ,CAAC,CAAiB,CAAC;YAEpB,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,KAAK;aACN,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,YAAY,GAChB,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACzD,MAAM,IAAI,KAAK,CAAC,yBAAyB,YAAY,EAAE,CAAC,CAAC;QAC3D,CAAC;IACH,CAAC;CACF,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runAllBlocks.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runAllBlocks.d.ts
new file mode 100644
index 0000000..7d4120d
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runAllBlocks.d.ts
@@ -0,0 +1,27 @@
+/**
+ * Run all blocks operation for Lexical documents
+ *
+ * @module tools/core/operations/runAllBlocks
+ */
+import type { ToolOperation } from '../core/interfaces';
+import { type RunAllBlocksParams } from '../schemas/runAllBlocks';
+/**
+ * Result of running all blocks
+ */
+export interface RunAllBlocksResult {
+    /** Whether the operation succeeded */
+    success: boolean;
+    /** Number of blocks that were executed */
+    executedCount?: number;
+    /** Error message if operation failed */
+    error?: string;
+}
+/**
+ * Run all blocks operation - executes all executable blocks in a Lexical document
+ *
+ * Runs all executable blocks (jupyter-cell, code blocks with executable: true) in sequence.
+ * Only executable blocks are run; other block types are skipped.
+ *
+ * Uses documentId as the universal identifier (matches Lexical component).
+ */
+export declare const runAllBlocksOperation: ToolOperation<RunAllBlocksParams, RunAllBlocksResult>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runAllBlocks.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runAllBlocks.js
new file mode 100644
index 0000000..7ef9b08
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runAllBlocks.js
@@ -0,0 +1,46 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { validateWithZod } from '@datalayer/jupyter-react/lib/tools/core/zodUtils';
+import { runAllBlocksParamsSchema, } from '../schemas/runAllBlocks';
+/**
+ * Run all blocks operation - executes all executable blocks in a Lexical document
+ *
+ * Runs all executable blocks (jupyter-cell, code blocks with executable: true) in sequence.
+ * Only executable blocks are run; other block types are skipped.
+ *
+ * Uses documentId as the universal identifier (matches Lexical component).
+ */
+export const runAllBlocksOperation = {
+    name: 'runAllBlocks',
+    async execute(params, context) {
+        // Validate params using Zod
+        validateWithZod(runAllBlocksParamsSchema, params || {}, 'runAllBlocks');
+        const { documentId } = context;
+        // Validate context
+        if (!documentId) {
+            throw new Error('Document ID is required for runAllBlocks operation. ' +
+                'Ensure the tool execution context includes a valid documentId.');
+        }
+        // Ensure executor is available
+        if (!context.executor) {
+            throw new Error('Executor is required for runAllBlocks operation. ' +
+                'This should be provided by the platform (DefaultExecutor, BridgeExecutor, etc.)');
+        }
+        try {
+            // Call executor (uses this.name for DRY principle)
+            const executedCount = (await context.executor.execute(this.name, {}));
+            return {
+                success: true,
+                executedCount,
+            };
+        }
+        catch (error) {
+            const errorMessage = error instanceof Error ? error.message : String(error);
+            throw new Error(`Failed to run all blocks: ${errorMessage}`);
+        }
+    },
+};
+//# sourceMappingURL=runAllBlocks.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runAllBlocks.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runAllBlocks.js.map
new file mode 100644
index 0000000..c31463e
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runAllBlocks.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"runAllBlocks.js","sourceRoot":"","sources":["../../../src/tools/operations/runAllBlocks.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,eAAe,EAAE,MAAM,kDAAkD,CAAC;AACnF,OAAO,EACL,wBAAwB,GAEzB,MAAM,yBAAyB,CAAC;AAgBjC;;;;;;;GAOG;AACH,MAAM,CAAC,MAAM,qBAAqB,GAG9B;IACF,IAAI,EAAE,cAAc;IAEpB,KAAK,CAAC,OAAO,CACX,MAAe,EACf,OAA6B;QAE7B,4BAA4B;QAC5B,eAAe,CACb,wBAA+B,EAC/B,MAAM,IAAI,EAAE,EACZ,cAAc,CACf,CAAC;QAEF,MAAM,EAAE,UAAU,EAAE,GAAG,OAAO,CAAC;QAE/B,mBAAmB;QACnB,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,MAAM,IAAI,KAAK,CACb,sDAAsD;gBACpD,gEAAgE,CACnE,CAAC;QACJ,CAAC;QAED,+BAA+B;QAC/B,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACtB,MAAM,IAAI,KAAK,CACb,mDAAmD;gBACjD,iFAAiF,CACpF,CAAC;QACJ,CAAC;QAED,IAAI,CAAC;YACH,mDAAmD;YACnD,MAAM,aAAa,GAAG,CAAC,MAAM,OAAO,CAAC,QAAQ,CAAC,OAAO,CACnD,IAAI,CAAC,IAAI,EACT,EAAE,CACH,CAAW,CAAC;YAEb,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,aAAa;aACd,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,YAAY,GAChB,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACzD,MAAM,IAAI,KAAK,CAAC,6BAA6B,YAAY,EAAE,CAAC,CAAC;QAC/D,CAAC;IACH,CAAC;CACF,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runBlock.d.ts
new file mode 100644
index 0000000..a49ddaa
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runBlock.d.ts
@@ -0,0 +1,29 @@
+/**
+ * Run block operation for Lexical documents
+ *
+ * @module tools/core/operations/runBlock
+ */
+import type { ToolOperation } from '../core/interfaces';
+import { type RunBlockParams } from '../schemas/runBlock';
+/**
+ * Result from runBlock operation (snake_case for outputs, matching MCP and existing tools).
+ */
+export interface RunBlockResult {
+    success: boolean;
+    id?: string;
+    execution_count?: number | null;
+    outputs?: any[];
+    elapsed_time?: number;
+    message?: string;
+    error?: string;
+    timeout?: boolean;
+}
+/**
+ * Run block operation - executes a single block in a Lexical document
+ *
+ * Only works on executable blocks like jupyter-cell or code blocks with executable: true.
+ * Includes bounds validation, elapsed time tracking, and execution results with outputs.
+ *
+ * Uses documentId as the universal identifier (matches Lexical component).
+ */
+export declare const runBlockOperation: ToolOperation<RunBlockParams, RunBlockResult>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runBlock.js
new file mode 100644
index 0000000..e4eac88
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runBlock.js
@@ -0,0 +1,114 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { readAllBlocksOperation } from './readAllBlocks';
+import { validateWithZod } from '@datalayer/jupyter-react/lib/tools/core/zodUtils';
+import { runBlockParamsSchema } from '../schemas/runBlock';
+/**
+ * Run block operation - executes a single block in a Lexical document
+ *
+ * Only works on executable blocks like jupyter-cell or code blocks with executable: true.
+ * Includes bounds validation, elapsed time tracking, and execution results with outputs.
+ *
+ * Uses documentId as the universal identifier (matches Lexical component).
+ */
+export const runBlockOperation = {
+    name: 'runBlock',
+    async execute(params, context) {
+        // Validate params using Zod schema
+        const { id, timeoutSeconds, stream = false, progressInterval = 5, } = validateWithZod(runBlockParamsSchema, params, this.name);
+        const { documentId } = context;
+        if (!documentId) {
+            return {
+                success: false,
+                error: 'Document ID is required for this operation.',
+            };
+        }
+        // Ensure executor is available
+        if (!context.executor) {
+            throw new Error('Executor is required for runBlock operation. ' +
+                'This should be provided by the platform (DefaultExecutor, BridgeExecutor, etc.)');
+        }
+        const startTime = Date.now();
+        try {
+            // Validate that block ID exists (bounds validation)
+            const blocksResult = await readAllBlocksOperation.execute({}, context);
+            if (!blocksResult.success || !blocksResult.blocks) {
+                throw new Error('Failed to read blocks for bounds validation');
+            }
+            const blockExists = blocksResult.blocks.some(block => block.block_id === id);
+            if (!blockExists) {
+                const blockCount = blocksResult.blocks.length;
+                return {
+                    success: false,
+                    error: `Block ID '${id}' not found. The document has ${blockCount} block${blockCount !== 1 ? 's' : ''}.`,
+                };
+            }
+            // Call executor and capture results
+            let executorResult;
+            if (timeoutSeconds !== undefined) {
+                // Create timeout promise
+                const timeoutPromise = new Promise((_, reject) => {
+                    setTimeout(() => {
+                        reject(new Error(`TIMEOUT_ERROR: Block execution exceeded ${timeoutSeconds} seconds`));
+                    }, timeoutSeconds * 1000);
+                });
+                // Create execution promise
+                const executionPromise = context.executor.execute(this.name, {
+                    blockId: id,
+                    timeoutSeconds,
+                    stream,
+                    progressInterval,
+                });
+                // Race between execution and timeout
+                executorResult = await Promise.race([
+                    executionPromise,
+                    timeoutPromise,
+                ]);
+            }
+            else {
+                // No timeout - execute normally
+                executorResult = await context.executor.execute(this.name, {
+                    blockId: id,
+                    stream,
+                    progressInterval,
+                });
+            }
+            // Calculate elapsed time
+            const elapsed_time = (Date.now() - startTime) / 1000;
+            // Extract outputs from executor result
+            const execution_count = executorResult?.execution_count ?? null;
+            const outputs = executorResult?.outputs ?? [];
+            // Use the message from executor result, or create a default one
+            const message = executorResult?.message ||
+                `Block executed in ${elapsed_time.toFixed(2)}s`;
+            return {
+                success: true,
+                id,
+                execution_count,
+                outputs,
+                elapsed_time,
+                message,
+            };
+        }
+        catch (error) {
+            const elapsed_time = (Date.now() - startTime) / 1000;
+            const errorMessage = error instanceof Error ? error.message : String(error);
+            // Check if this is a timeout error
+            if (errorMessage.includes('TIMEOUT_ERROR')) {
+                return {
+                    success: false,
+                    timeout: true,
+                    id,
+                    elapsed_time,
+                    error: `Execution timed out after ${timeoutSeconds} seconds`,
+                };
+            }
+            // Regular error (not timeout)
+            throw new Error(`Failed to run block: ${errorMessage}`);
+        }
+    },
+};
+//# sourceMappingURL=runBlock.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runBlock.js.map
new file mode 100644
index 0000000..f8b973d
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/runBlock.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"runBlock.js","sourceRoot":"","sources":["../../../src/tools/operations/runBlock.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.d.ts
new file mode 100644
index 0000000..a201a40
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.d.ts
@@ -0,0 +1,29 @@
+/**
+ * Update block operation for Lexical documents
+ *
+ * @module tools/core/operations/updateBlock
+ */
+import type { ToolOperation } from '../core/interfaces';
+import { type UpdateBlockParams } from '../schemas/updateBlock';
+/**
+ * Result of updating a block
+ */
+export interface UpdateBlockResult {
+    /** Whether the operation succeeded */
+    success: boolean;
+    /** The ID of the updated block */
+    id?: string;
+    /** Success message describing the update */
+    message?: string;
+    /** Error message if operation failed */
+    error?: string;
+}
+/**
+ * Update block operation - modifies an existing block in a Lexical document
+ *
+ * Allows updating block type, source content, and/or properties.
+ * At least one of type, source, or properties must be provided.
+ *
+ * Uses documentId as the universal identifier (matches Lexical component).
+ */
+export declare const updateBlockOperation: ToolOperation<UpdateBlockParams, UpdateBlockResult>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.js
new file mode 100644
index 0000000..e379d2e
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.js
@@ -0,0 +1,68 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { validateWithZod } from '@datalayer/jupyter-react/lib/tools/core/zodUtils';
+import { updateBlockParamsSchema, } from '../schemas/updateBlock';
+/**
+ * Update block operation - modifies an existing block in a Lexical document
+ *
+ * Allows updating block type, source content, and/or properties.
+ * At least one of type, source, or properties must be provided.
+ *
+ * Uses documentId as the universal identifier (matches Lexical component).
+ */
+export const updateBlockOperation = {
+    name: 'updateBlock',
+    async execute(params, context) {
+        // Validate params using Zod
+        const validatedParams = validateWithZod(updateBlockParamsSchema, params, 'updateBlock');
+        const { id, type, source, properties } = validatedParams;
+        const { documentId } = context;
+        // Validate that at least one update field is provided
+        if (type === undefined &&
+            source === undefined &&
+            properties === undefined) {
+            throw new Error('At least one of type, source, or properties must be provided for updateBlock operation.');
+        }
+        // Validate context
+        if (!documentId) {
+            throw new Error('Document ID is required for updateBlock operation. ' +
+                'Ensure the tool execution context includes a valid documentId.');
+        }
+        // Ensure executor is available
+        if (!context.executor) {
+            throw new Error('Executor is required for updateBlock operation. ' +
+                'This should be provided by the platform (DefaultExecutor, BridgeExecutor, etc.)');
+        }
+        try {
+            // Call executor with individual parameters (matches notebook pattern)
+            // The state method will handle merging updates
+            await context.executor.execute(this.name, {
+                blockId: id,
+                type,
+                source,
+                properties,
+            });
+            const updatedFields = [
+                type !== undefined && 'type',
+                source !== undefined && 'source',
+                properties !== undefined && 'properties',
+            ]
+                .filter(Boolean)
+                .join(', ');
+            const message = `Block '${id}' updated successfully (${updatedFields})`;
+            return {
+                success: true,
+                id: id,
+                message,
+            };
+        }
+        catch (error) {
+            const errorMessage = error instanceof Error ? error.message : String(error);
+            throw new Error(`Failed to update block: ${errorMessage}`);
+        }
+    },
+};
+//# sourceMappingURL=updateBlock.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.js.map
new file mode 100644
index 0000000..30cd50b
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/operations/updateBlock.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"updateBlock.js","sourceRoot":"","sources":["../../../src/tools/operations/updateBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AASH,OAAO,EAAE,eAAe,EAAE,MAAM,kDAAkD,CAAC;AACnF,OAAO,EACL,uBAAuB,GAExB,MAAM,wBAAwB,CAAC;AAmBhC;;;;;;;GAOG;AACH,MAAM,CAAC,MAAM,oBAAoB,GAG7B;IACF,IAAI,EAAE,aAAa;IAEnB,KAAK,CAAC,OAAO,CACX,MAAe,EACf,OAA6B;QAE7B,4BAA4B;QAC5B,MAAM,eAAe,GAAG,eAAe,CACrC,uBAA8B,EAC9B,MAAM,EACN,aAAa,CACO,CAAC;QAEvB,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,UAAU,EAAE,GAAG,eAAe,CAAC;QACzD,MAAM,EAAE,UAAU,EAAE,GAAG,OAAO,CAAC;QAE/B,sDAAsD;QACtD,IACE,IAAI,KAAK,SAAS;YAClB,MAAM,KAAK,SAAS;YACpB,UAAU,KAAK,SAAS,EACxB,CAAC;YACD,MAAM,IAAI,KAAK,CACb,yFAAyF,CAC1F,CAAC;QACJ,CAAC;QAED,mBAAmB;QACnB,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,MAAM,IAAI,KAAK,CACb,qDAAqD;gBACnD,gEAAgE,CACnE,CAAC;QACJ,CAAC;QAED,+BAA+B;QAC/B,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACtB,MAAM,IAAI,KAAK,CACb,kDAAkD;gBAChD,iFAAiF,CACpF,CAAC;QACJ,CAAC;QAED,IAAI,CAAC;YACH,sEAAsE;YACtE,+CAA+C;YAC/C,MAAM,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE;gBACxC,OAAO,EAAE,EAAE;gBACX,IAAI;gBACJ,MAAM;gBACN,UAAU;aACX,CAAC,CAAC;YAEH,MAAM,aAAa,GAAG;gBACpB,IAAI,KAAK,SAAS,IAAI,MAAM;gBAC5B,MAAM,KAAK,SAAS,IAAI,QAAQ;gBAChC,UAAU,KAAK,SAAS,IAAI,YAAY;aACzC;iBACE,MAAM,CAAC,OAAO,CAAC;iBACf,IAAI,CAAC,IAAI,CAAC,CAAC;YACd,MAAM,OAAO,GAAG,UAAU,EAAE,2BAA2B,aAAa,GAAG,CAAC;YAExE,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,EAAE,EAAE,EAAE;gBACN,OAAO;aACR,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,YAAY,GAChB,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACzD,MAAM,IAAI,KAAK,CAAC,2BAA2B,YAAY,EAAE,CAAC,CAAC;QAC7D,CAAC;IACH,CAAC;CACF,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlock.d.ts
new file mode 100644
index 0000000..96836f8
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlock.d.ts
@@ -0,0 +1,10 @@
+/**
+ * Zod schema for deleteBlock operation parameters.
+ *
+ * @module tools/schemas/deleteBlock
+ */
+import { z } from 'zod';
+export declare const deleteBlockParamsSchema: z.ZodObject<{
+    ids: z.ZodArray<z.ZodString>;
+}, z.core.$strip>;
+export type DeleteBlockParams = z.infer<typeof deleteBlockParamsSchema>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlock.js
new file mode 100644
index 0000000..c63318c
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlock.js
@@ -0,0 +1,18 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Zod schema for deleteBlock operation parameters.
+ *
+ * @module tools/schemas/deleteBlock
+ */
+import { z } from 'zod';
+export const deleteBlockParamsSchema = z.object({
+    ids: z
+        .array(z.string().min(1))
+        .min(1)
+        .describe('Array of block IDs to delete'),
+});
+//# sourceMappingURL=deleteBlock.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlock.js.map
new file mode 100644
index 0000000..7e222ea
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/deleteBlock.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"deleteBlock.js","sourceRoot":"","sources":["../../../src/tools/schemas/deleteBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,OAAO,EAAE,CAAC,EAAE,MAAM,KAAK,CAAC;AAExB,MAAM,CAAC,MAAM,uBAAuB,GAAG,CAAC,CAAC,MAAM,CAAC;IAC9C,GAAG,EAAE,CAAC;SACH,KAAK,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;SACxB,GAAG,CAAC,CAAC,CAAC;SACN,QAAQ,CAAC,8BAA8B,CAAC;CAC5C,CAAC,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/executeCode.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/executeCode.d.ts
new file mode 100644
index 0000000..225ec15
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/executeCode.d.ts
@@ -0,0 +1,13 @@
+/**
+ * Zod schema for executeCode operation parameters.
+ *
+ * @module tools/schemas/executeCode
+ */
+import { z } from 'zod';
+export declare const executeCodeParamsSchema: z.ZodObject<{
+    code: z.ZodString;
+    storeHistory: z.ZodDefault<z.ZodOptional<z.ZodBoolean>>;
+    silent: z.ZodDefault<z.ZodOptional<z.ZodBoolean>>;
+    stopOnError: z.ZodDefault<z.ZodOptional<z.ZodBoolean>>;
+}, z.core.$strip>;
+export type ExecuteCodeParams = z.infer<typeof executeCodeParamsSchema>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/executeCode.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/executeCode.js
new file mode 100644
index 0000000..444c7b0
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/executeCode.js
@@ -0,0 +1,30 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Zod schema for executeCode operation parameters.
+ *
+ * @module tools/schemas/executeCode
+ */
+import { z } from 'zod';
+export const executeCodeParamsSchema = z.object({
+    code: z.string().min(1).describe('Code to execute in the kernel'),
+    storeHistory: z
+        .boolean()
+        .optional()
+        .default(false)
+        .describe('Whether to store execution in kernel history'),
+    silent: z
+        .boolean()
+        .optional()
+        .default(true)
+        .describe('Whether to suppress output'),
+    stopOnError: z
+        .boolean()
+        .optional()
+        .default(true)
+        .describe('Whether to stop execution on error'),
+});
+//# sourceMappingURL=executeCode.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/executeCode.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/executeCode.js.map
new file mode 100644
index 0000000..93315e2
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/executeCode.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"executeCode.js","sourceRoot":"","sources":["../../../src/tools/schemas/executeCode.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,OAAO,EAAE,CAAC,EAAE,MAAM,KAAK,CAAC;AAExB,MAAM,CAAC,MAAM,uBAAuB,GAAG,CAAC,CAAC,MAAM,CAAC;IAC9C,IAAI,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,+BAA+B,CAAC;IACjE,YAAY,EAAE,CAAC;SACZ,OAAO,EAAE;SACT,QAAQ,EAAE;SACV,OAAO,CAAC,KAAK,CAAC;SACd,QAAQ,CAAC,8CAA8C,CAAC;IAC3D,MAAM,EAAE,CAAC;SACN,OAAO,EAAE;SACT,QAAQ,EAAE;SACV,OAAO,CAAC,IAAI,CAAC;SACb,QAAQ,CAAC,4BAA4B,CAAC;IACzC,WAAW,EAAE,CAAC;SACX,OAAO,EAAE;SACT,QAAQ,EAAE;SACV,OAAO,CAAC,IAAI,CAAC;SACb,QAAQ,CAAC,oCAAoC,CAAC;CAClD,CAAC,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.d.ts
new file mode 100644
index 0000000..3fa9a8a
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.d.ts
@@ -0,0 +1,14 @@
+/**
+ * Lexical tool schemas - centralized exports.
+ *
+ * @module tools/schemas
+ */
+export * from './insertBlock';
+export * from './updateBlock';
+export * from './deleteBlock';
+export * from './readBlock';
+export * from './readAllBlocks';
+export * from './runBlock';
+export * from './runAllBlocks';
+export * from './executeCode';
+export * from './listAvailableBlocks';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.js
new file mode 100644
index 0000000..2b39b6d
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.js
@@ -0,0 +1,20 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Lexical tool schemas - centralized exports.
+ *
+ * @module tools/schemas
+ */
+export * from './insertBlock';
+export * from './updateBlock';
+export * from './deleteBlock';
+export * from './readBlock';
+export * from './readAllBlocks';
+export * from './runBlock';
+export * from './runAllBlocks';
+export * from './executeCode';
+export * from './listAvailableBlocks';
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.js.map
new file mode 100644
index 0000000..988ef20
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/tools/schemas/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,cAAc,eAAe,CAAC;AAC9B,cAAc,eAAe,CAAC;AAC9B,cAAc,eAAe,CAAC;AAC9B,cAAc,aAAa,CAAC;AAC5B,cAAc,iBAAiB,CAAC;AAChC,cAAc,YAAY,CAAC;AAC3B,cAAc,gBAAgB,CAAC;AAC/B,cAAc,eAAe,CAAC;AAC9B,cAAc,uBAAuB,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.d.ts
new file mode 100644
index 0000000..4c645ef
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.d.ts
@@ -0,0 +1,13 @@
+/**
+ * Zod schema for insertBlock operation parameters.
+ *
+ * @module tools/schemas/insertBlock
+ */
+import { z } from 'zod';
+export declare const insertBlockParamsSchema: z.ZodObject<{
+    afterId: z.ZodString;
+    type: z.ZodString;
+    source: z.ZodString;
+    properties: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>;
+}, z.core.$strip>;
+export type InsertBlockParams = z.infer<typeof insertBlockParamsSchema>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.js
new file mode 100644
index 0000000..337f380
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.js
@@ -0,0 +1,26 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Zod schema for insertBlock operation parameters.
+ *
+ * @module tools/schemas/insertBlock
+ */
+import { z } from 'zod';
+export const insertBlockParamsSchema = z.object({
+    afterId: z
+        .string()
+        .describe("Position to insert block: 'TOP' for beginning, 'BOTTOM' for end, or a specific block ID"),
+    type: z
+        .string()
+        .min(1)
+        .describe("Block type (e.g., 'paragraph', 'heading', 'code', 'list-item')"),
+    source: z.string().describe('Block source content'),
+    properties: z
+        .record(z.string(), z.unknown())
+        .optional()
+        .describe('Optional block metadata and properties'),
+});
+//# sourceMappingURL=insertBlock.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.js.map
new file mode 100644
index 0000000..3963788
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/insertBlock.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"insertBlock.js","sourceRoot":"","sources":["../../../src/tools/schemas/insertBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,OAAO,EAAE,CAAC,EAAE,MAAM,KAAK,CAAC;AAExB,MAAM,CAAC,MAAM,uBAAuB,GAAG,CAAC,CAAC,MAAM,CAAC;IAC9C,OAAO,EAAE,CAAC;SACP,MAAM,EAAE;SACR,QAAQ,CACP,yFAAyF,CAC1F;IACH,IAAI,EAAE,CAAC;SACJ,MAAM,EAAE;SACR,GAAG,CAAC,CAAC,CAAC;SACN,QAAQ,CAAC,gEAAgE,CAAC;IAC7E,MAAM,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,sBAAsB,CAAC;IACnD,UAAU,EAAE,CAAC;SACV,MAAM,CAAC,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC;SAC/B,QAAQ,EAAE;SACV,QAAQ,CAAC,wCAAwC,CAAC;CACtD,CAAC,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.d.ts
new file mode 100644
index 0000000..1e7d21c
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.d.ts
@@ -0,0 +1,28 @@
+/**
+ * Zod schema for listAvailableBlocks operation parameters.
+ *
+ * @module tools/schemas/listAvailableBlocks
+ */
+import { z } from 'zod';
+export declare const blockCategorySchema: z.ZodEnum<{
+    list: "list";
+    media: "media";
+    text: "text";
+    heading: "heading";
+    table: "table";
+    code: "code";
+    jupyter: "jupyter";
+}>;
+export declare const listAvailableBlocksParamsSchema: z.ZodObject<{
+    category: z.ZodOptional<z.ZodEnum<{
+        list: "list";
+        media: "media";
+        text: "text";
+        heading: "heading";
+        table: "table";
+        code: "code";
+        jupyter: "jupyter";
+    }>>;
+}, z.core.$strip>;
+export type BlockCategory = z.infer<typeof blockCategorySchema>;
+export type ListAvailableBlocksParams = z.infer<typeof listAvailableBlocksParamsSchema>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.js
new file mode 100644
index 0000000..6755506
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.js
@@ -0,0 +1,26 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Zod schema for listAvailableBlocks operation parameters.
+ *
+ * @module tools/schemas/listAvailableBlocks
+ */
+import { z } from 'zod';
+export const blockCategorySchema = z.enum([
+    'text',
+    'heading',
+    'code',
+    'media',
+    'list',
+    'table',
+    'jupyter',
+]);
+export const listAvailableBlocksParamsSchema = z.object({
+    category: blockCategorySchema
+        .optional()
+        .describe('Optional category filter for block types'),
+});
+//# sourceMappingURL=listAvailableBlocks.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.js.map
new file mode 100644
index 0000000..b7d3b0c
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/listAvailableBlocks.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"listAvailableBlocks.js","sourceRoot":"","sources":["../../../src/tools/schemas/listAvailableBlocks.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,OAAO,EAAE,CAAC,EAAE,MAAM,KAAK,CAAC;AAExB,MAAM,CAAC,MAAM,mBAAmB,GAAG,CAAC,CAAC,IAAI,CAAC;IACxC,MAAM;IACN,SAAS;IACT,MAAM;IACN,OAAO;IACP,MAAM;IACN,OAAO;IACP,SAAS;CACV,CAAC,CAAC;AAEH,MAAM,CAAC,MAAM,+BAA+B,GAAG,CAAC,CAAC,MAAM,CAAC;IACtD,QAAQ,EAAE,mBAAmB;SAC1B,QAAQ,EAAE;SACV,QAAQ,CAAC,0CAA0C,CAAC;CACxD,CAAC,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/readAllBlocks.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/readAllBlocks.d.ts
new file mode 100644
index 0000000..2a30171
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/readAllBlocks.d.ts
@@ -0,0 +1,13 @@
+/**
+ * Zod schema for readAllBlocks operation parameters.
+ *
+ * @module tools/schemas/readAllBlocks
+ */
+import { z } from 'zod';
+export declare const readAllBlocksParamsSchema: z.ZodObject<{
+    format: z.ZodOptional<z.ZodDefault<z.ZodEnum<{
+        brief: "brief";
+        detailed: "detailed";
+    }>>>;
+}, z.core.$strip>;
+export type ReadAllBlocksParams = z.infer<typeof readAllBlocksParamsSchema>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/readAllBlocks.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/readAllBlocks.js
new file mode 100644
index 0000000..63dcd13
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/readAllBlocks.js
@@ -0,0 +1,15 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Zod schema for readAllBlocks operation parameters.
+ *
+ * @module tools/schemas/readAllBlocks
+ */
+import { z } from 'zod';
+export const readAllBlocksParamsSchema = z.object({
+    format: z.enum(['brief', 'detailed']).default('brief').optional(),
+});
+//# sourceMappingURL=readAllBlocks.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/readAllBlocks.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/readAllBlocks.js.map
new file mode 100644
index 0000000..152eba2
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/readAllBlocks.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"readAllBlocks.js","sourceRoot":"","sources":["../../../src/tools/schemas/readAllBlocks.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,OAAO,EAAE,CAAC,EAAE,MAAM,KAAK,CAAC;AAExB,MAAM,CAAC,MAAM,yBAAyB,GAAG,CAAC,CAAC,MAAM,CAAC;IAChD,MAAM,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE;CAClE,CAAC,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/readBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/readBlock.d.ts
new file mode 100644
index 0000000..3bede06
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/readBlock.d.ts
@@ -0,0 +1,10 @@
+/**
+ * Zod schema for readBlock operation parameters.
+ *
+ * @module tools/schemas/readBlock
+ */
+import { z } from 'zod';
+export declare const readBlockParamsSchema: z.ZodObject<{
+    id: z.ZodString;
+}, z.core.$strip>;
+export type ReadBlockParams = z.infer<typeof readBlockParamsSchema>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/readBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/readBlock.js
new file mode 100644
index 0000000..33c0946
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/readBlock.js
@@ -0,0 +1,15 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Zod schema for readBlock operation parameters.
+ *
+ * @module tools/schemas/readBlock
+ */
+import { z } from 'zod';
+export const readBlockParamsSchema = z.object({
+    id: z.string().min(1).describe('Block ID to read'),
+});
+//# sourceMappingURL=readBlock.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/readBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/readBlock.js.map
new file mode 100644
index 0000000..870ab6e
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/readBlock.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"readBlock.js","sourceRoot":"","sources":["../../../src/tools/schemas/readBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,OAAO,EAAE,CAAC,EAAE,MAAM,KAAK,CAAC;AAExB,MAAM,CAAC,MAAM,qBAAqB,GAAG,CAAC,CAAC,MAAM,CAAC;IAC5C,EAAE,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,kBAAkB,CAAC;CACnD,CAAC,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/runAllBlocks.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/runAllBlocks.d.ts
new file mode 100644
index 0000000..a834c71
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/runAllBlocks.d.ts
@@ -0,0 +1,8 @@
+/**
+ * Zod schema for runAllBlocks operation parameters.
+ *
+ * @module tools/schemas/runAllBlocks
+ */
+import { z } from 'zod';
+export declare const runAllBlocksParamsSchema: z.ZodObject<{}, z.core.$strip>;
+export type RunAllBlocksParams = z.infer<typeof runAllBlocksParamsSchema>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/runAllBlocks.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/runAllBlocks.js
new file mode 100644
index 0000000..b55e6ed
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/runAllBlocks.js
@@ -0,0 +1,15 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Zod schema for runAllBlocks operation parameters.
+ *
+ * @module tools/schemas/runAllBlocks
+ */
+import { z } from 'zod';
+export const runAllBlocksParamsSchema = z.object({
+// Empty schema - reserved for future parameters like execution options
+});
+//# sourceMappingURL=runAllBlocks.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/runAllBlocks.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/runAllBlocks.js.map
new file mode 100644
index 0000000..fae1648
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/runAllBlocks.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"runAllBlocks.js","sourceRoot":"","sources":["../../../src/tools/schemas/runAllBlocks.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,OAAO,EAAE,CAAC,EAAE,MAAM,KAAK,CAAC;AAExB,MAAM,CAAC,MAAM,wBAAwB,GAAG,CAAC,CAAC,MAAM,CAAC;AAC/C,uEAAuE;CACxE,CAAC,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/runBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/runBlock.d.ts
new file mode 100644
index 0000000..0e366be
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/runBlock.d.ts
@@ -0,0 +1,21 @@
+/**
+ * Zod schema for runBlock operation parameters.
+ *
+ * @module tools/schemas/runBlock
+ */
+import { z } from 'zod';
+/**
+ * Schema for runBlock parameters
+ *
+ * Validates block ID, timeout, streaming, and progress interval settings.
+ */
+export declare const runBlockParamsSchema: z.ZodObject<{
+    id: z.ZodString;
+    timeoutSeconds: z.ZodOptional<z.ZodNumber>;
+    stream: z.ZodOptional<z.ZodBoolean>;
+    progressInterval: z.ZodOptional<z.ZodNumber>;
+}, z.core.$strip>;
+/**
+ * TypeScript type inferred from Zod schema.
+ */
+export type RunBlockParams = z.infer<typeof runBlockParamsSchema>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/runBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/runBlock.js
new file mode 100644
index 0000000..309d6c1
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/runBlock.js
@@ -0,0 +1,34 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Zod schema for runBlock operation parameters.
+ *
+ * @module tools/schemas/runBlock
+ */
+import { z } from 'zod';
+/**
+ * Schema for runBlock parameters
+ *
+ * Validates block ID, timeout, streaming, and progress interval settings.
+ */
+export const runBlockParamsSchema = z.object({
+    id: z.string().min(1).describe('Executable block ID to run'),
+    timeoutSeconds: z
+        .number()
+        .positive()
+        .optional()
+        .describe('Execution timeout in seconds. If omitted, no timeout is enforced (normal Jupyter behavior).'),
+    stream: z
+        .boolean()
+        .optional()
+        .describe('Enable streaming progress updates (default: false)'),
+    progressInterval: z
+        .number()
+        .positive()
+        .optional()
+        .describe('Progress update interval in seconds when stream=true (default: 5)'),
+});
+//# sourceMappingURL=runBlock.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/runBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/runBlock.js.map
new file mode 100644
index 0000000..7de1f9d
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/runBlock.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"runBlock.js","sourceRoot":"","sources":["../../../src/tools/schemas/runBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,OAAO,EAAE,CAAC,EAAE,MAAM,KAAK,CAAC;AAExB;;;;GAIG;AACH,MAAM,CAAC,MAAM,oBAAoB,GAAG,CAAC,CAAC,MAAM,CAAC;IAC3C,EAAE,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,4BAA4B,CAAC;IAC5D,cAAc,EAAE,CAAC;SACd,MAAM,EAAE;SACR,QAAQ,EAAE;SACV,QAAQ,EAAE;SACV,QAAQ,CACP,6FAA6F,CAC9F;IACH,MAAM,EAAE,CAAC;SACN,OAAO,EAAE;SACT,QAAQ,EAAE;SACV,QAAQ,CAAC,oDAAoD,CAAC;IACjE,gBAAgB,EAAE,CAAC;SAChB,MAAM,EAAE;SACR,QAAQ,EAAE;SACV,QAAQ,EAAE;SACV,QAAQ,CACP,mEAAmE,CACpE;CACJ,CAAC,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.d.ts
new file mode 100644
index 0000000..1219419
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.d.ts
@@ -0,0 +1,13 @@
+/**
+ * Zod schema for updateBlock operation parameters.
+ *
+ * @module tools/schemas/updateBlock
+ */
+import { z } from 'zod';
+export declare const updateBlockParamsSchema: z.ZodObject<{
+    id: z.ZodString;
+    type: z.ZodOptional<z.ZodString>;
+    source: z.ZodOptional<z.ZodString>;
+    properties: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>;
+}, z.core.$strip>;
+export type UpdateBlockParams = z.infer<typeof updateBlockParamsSchema>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.js
new file mode 100644
index 0000000..9950791
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.js
@@ -0,0 +1,25 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Zod schema for updateBlock operation parameters.
+ *
+ * @module tools/schemas/updateBlock
+ */
+import { z } from 'zod';
+export const updateBlockParamsSchema = z.object({
+    id: z.string().min(1).describe('Block ID to update'),
+    type: z
+        .string()
+        .min(1)
+        .optional()
+        .describe("New block type (e.g., 'paragraph', 'heading', 'code', 'list-item')"),
+    source: z.string().optional().describe('New block source content'),
+    properties: z
+        .record(z.string(), z.unknown())
+        .optional()
+        .describe('New block metadata and properties'),
+});
+//# sourceMappingURL=updateBlock.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.js.map
new file mode 100644
index 0000000..a43d65d
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/schemas/updateBlock.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"updateBlock.js","sourceRoot":"","sources":["../../../src/tools/schemas/updateBlock.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;GAIG;AAEH,OAAO,EAAE,CAAC,EAAE,MAAM,KAAK,CAAC;AAExB,MAAM,CAAC,MAAM,uBAAuB,GAAG,CAAC,CAAC,MAAM,CAAC;IAC9C,EAAE,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,oBAAoB,CAAC;IACpD,IAAI,EAAE,CAAC;SACJ,MAAM,EAAE;SACR,GAAG,CAAC,CAAC,CAAC;SACN,QAAQ,EAAE;SACV,QAAQ,CACP,oEAAoE,CACrE;IACH,MAAM,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,0BAA0B,CAAC;IAClE,UAAU,EAAE,CAAC;SACV,MAAM,CAAC,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC;SAC/B,QAAQ,EAAE;SACV,QAAQ,CAAC,mCAAmC,CAAC;CACjD,CAAC,CAAC"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.d.ts
new file mode 100644
index 0000000..c0d8b8c
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.d.ts
@@ -0,0 +1,59 @@
+/**
+ * Utilities for converting between Lexical editor state and LexicalBlock format.
+ * Used by message handlers to serialize/deserialize blocks for tool operations.
+ *
+ * @module utils/blocks
+ */
+import type { LexicalEditor, LexicalNode } from 'lexical';
+import type { LexicalBlock, BlockFormat, BriefBlock } from '../core/types';
+/**
+ * Convert Lexical editor state to an array of LexicalBlocks or BriefBlocks.
+ * Reads the current editor state and serializes top-level blocks.
+ *
+ * Special handling for Jupyter cells: jupyter-input and jupyter-output nodes
+ * are merged into a single jupyter-cell block to provide a clean abstraction
+ * for tool operations. The agent sees one block with embedded outputs.
+ *
+ * @param editor - The Lexical editor instance
+ * @param format - Response format: 'brief' (block_id + block_type + preview) or 'detailed' (full content)
+ */
+export declare function editorStateToBlocks(editor: LexicalEditor, format?: BlockFormat): LexicalBlock[] | BriefBlock[];
+/**
+ * Convert a Lexical node to a LexicalBlock.
+ * Returns Jupyter-style format with block_id, block_type, source, and metadata.
+ */
+export declare function nodeToBlock(node: LexicalNode): LexicalBlock | null;
+/**
+ * Insert a LexicalBlock into the editor at the specified index or after a block ID.
+ * Creates the appropriate Lexical node based on block type.
+ *
+ * @param editor - Lexical editor instance
+ * @param block - Block to insert
+ * @param index - Index where to insert (0-based), or -1 to append
+ * @param afterBlockId - Optional: Insert after this block ID instead of using index
+ */
+export declare function insertBlock(editor: LexicalEditor, block: LexicalBlock, index: number, afterBlockId?: string): void;
+/**
+ * Delete a block from the editor at the specified index.
+ */
+export declare function deleteBlock(editor: LexicalEditor, index: number): void;
+/**
+ * Update a block in the editor at the specified index.
+ */
+export declare function updateBlock(editor: LexicalEditor, index: number, block: LexicalBlock): void;
+/**
+ * Get the count of top-level blocks in the editor.
+ */
+export declare function getBlockCount(editor: LexicalEditor): number;
+/**
+ * Get a specific block by index.
+ */
+export declare function getBlock(editor: LexicalEditor, index: number): LexicalBlock | null;
+/**
+ * Get registered node types from the editor.
+ * Returns type names and class names of all registered Lexical nodes.
+ */
+export declare function getRegisteredNodes(editor: LexicalEditor): Array<{
+    type: string;
+    className?: string;
+}>;
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.js
new file mode 100644
index 0000000..b1d0133
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.js
@@ -0,0 +1,587 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+import { $getRoot, $createParagraphNode, $createTextNode } from 'lexical';
+import { $createHeadingNode, $createQuoteNode, $isHeadingNode, $isQuoteNode, } from '@lexical/rich-text';
+import { $createCodeNode, $isCodeNode } from '@lexical/code';
+import { $createListNode, $createListItemNode, $isListNode, } from '@lexical/list';
+/**
+ * Generate a 40-character preview of block content.
+ * Special handling for different block types:
+ * - Lists: comma-separated items
+ * - Code/jupyter-cell: first line only
+ * - Horizontalrule: empty string
+ * - Others: first 40 chars
+ *
+ * @param block - Block to generate preview for
+ * @returns 40-char preview string (with "..." if truncated)
+ */
+function generatePreview(block) {
+    const maxLength = 40;
+    // Empty preview for horizontal rules
+    if (block.block_type === 'horizontalrule') {
+        return '';
+    }
+    // Get source as string
+    const source = Array.isArray(block.source)
+        ? block.source.join('\n')
+        : block.source;
+    // Special handling for lists: comma-separated items
+    if (block.block_type === 'list') {
+        const items = source
+            .split('\n')
+            .map(s => s.trim())
+            .filter(s => s.length > 0);
+        const preview = items.join(', ');
+        return preview.length > maxLength
+            ? preview.slice(0, maxLength - 3) + '...'
+            : preview;
+    }
+    // Code and jupyter-cell: first line only
+    if (block.block_type === 'code' || block.block_type === 'jupyter-cell') {
+        const firstLine = source.split('\n')[0] || '';
+        return firstLine.length > maxLength
+            ? firstLine.slice(0, maxLength - 3) + '...'
+            : firstLine;
+    }
+    // Default: first 40 chars
+    return source.length > maxLength
+        ? source.slice(0, maxLength - 3) + '...'
+        : source;
+}
+/**
+ * Convert Lexical editor state to an array of LexicalBlocks or BriefBlocks.
+ * Reads the current editor state and serializes top-level blocks.
+ *
+ * Special handling for Jupyter cells: jupyter-input and jupyter-output nodes
+ * are merged into a single jupyter-cell block to provide a clean abstraction
+ * for tool operations. The agent sees one block with embedded outputs.
+ *
+ * @param editor - The Lexical editor instance
+ * @param format - Response format: 'brief' (block_id + block_type + preview) or 'detailed' (full content)
+ */
+export function editorStateToBlocks(editor, format = 'brief') {
+    const blocks = [];
+    editor.getEditorState().read(() => {
+        const root = $getRoot();
+        const children = root.getChildren();
+        const processedOutputIds = new Set();
+        for (let i = 0; i < children.length; i++) {
+            const child = children[i];
+            const childType = child.getType();
+            // Skip jupyter-output nodes - they're merged with their input nodes
+            if (childType === 'jupyter-output') {
+                processedOutputIds.add(child.getKey());
+                continue;
+            }
+            // For jupyter-input nodes, find and merge with paired output node
+            if (childType === 'jupyter-input') {
+                const inputNode = child;
+                let outputNode = null;
+                // Look for jupyter-output in next siblings
+                for (let j = i + 1; j < children.length; j++) {
+                    if (children[j].getType() === 'jupyter-output') {
+                        outputNode = children[j];
+                        processedOutputIds.add(outputNode.getKey());
+                        break;
+                    }
+                }
+                // Merge input + output into single jupyter-cell block
+                const block = mergeJupyterNodes(inputNode, outputNode);
+                if (block) {
+                    blocks.push(block);
+                }
+                continue;
+            }
+            // Regular node conversion
+            const block = nodeToBlock(child);
+            if (block) {
+                blocks.push(block);
+            }
+        }
+    });
+    // Return brief format if requested (block_id, block_type, and preview)
+    if (format === 'brief') {
+        return blocks.map(block => ({
+            block_id: block.block_id,
+            block_type: block.block_type,
+            preview: generatePreview(block),
+        }));
+    }
+    return blocks;
+}
+/**
+ * Merge jupyter-input and jupyter-output nodes into a single jupyter-cell block.
+ * The block_id is taken from the input node (for deletion purposes).
+ */
+function mergeJupyterNodes(inputNode, outputNode) {
+    const block_id = inputNode.getKey(); // Use input ID for deletion
+    const source = inputNode.getTextContent();
+    // eslint-disable-next-line @typescript-eslint/no-explicit-any
+    const inputNodeAny = inputNode;
+    const language = inputNodeAny.getLanguage?.() || 'python';
+    // Extract outputs from output node if present
+    let outputs;
+    if (outputNode) {
+        // eslint-disable-next-line @typescript-eslint/no-explicit-any
+        const outputNodeAny = outputNode;
+        // Try getting latest version of the node
+        const latestOutputNode = outputNodeAny.getLatest?.() || outputNodeAny;
+        // Try multiple ways to access outputs
+        const rawOutputs = latestOutputNode.getOutputs?.() ||
+            latestOutputNode.__outputs ||
+            outputNodeAny.getOutputs?.() ||
+            outputNodeAny.__outputs;
+        if (rawOutputs && Array.isArray(rawOutputs) && rawOutputs.length > 0) {
+            outputs = rawOutputs;
+        }
+    }
+    return {
+        block_id,
+        block_type: 'jupyter-cell',
+        source,
+        metadata: {
+            language,
+            outputs,
+        },
+    };
+}
+/**
+ * Convert a Lexical node to a LexicalBlock.
+ * Returns Jupyter-style format with block_id, block_type, source, and metadata.
+ */
+export function nodeToBlock(node) {
+    const type = node.getType();
+    const block_id = node.getKey(); // Lexical's stable node identifier
+    // Heading
+    if ($isHeadingNode(node)) {
+        const tag = node.getTag();
+        const level = parseInt(tag.substring(1)); // h1 -> 1, h2 -> 2, etc.
+        const { text, formatting } = extractTextAndFormatting(node);
+        return {
+            block_id,
+            block_type: 'heading',
+            source: text,
+            metadata: { level },
+            formatting,
+        };
+    }
+    // Quote
+    if ($isQuoteNode(node)) {
+        const { text, formatting } = extractTextAndFormatting(node);
+        return {
+            block_id,
+            block_type: 'quote',
+            source: text,
+            formatting,
+        };
+    }
+    // Code
+    if ($isCodeNode(node)) {
+        const language = node.getLanguage() || 'plaintext';
+        const text = node.getTextContent();
+        return {
+            block_id,
+            block_type: 'code',
+            source: text,
+            metadata: { language },
+        };
+    }
+    // List
+    if ($isListNode(node)) {
+        const listTypeMap = {
+            bullet: 'bullet',
+            number: 'number',
+            check: 'check',
+        };
+        const list_type = listTypeMap[node.getListType()] || 'bullet';
+        const { text, formatting } = extractTextAndFormatting(node);
+        return {
+            block_id,
+            block_type: 'list',
+            source: text,
+            metadata: { list_type },
+            formatting,
+        };
+    }
+    // List item
+    if (type === 'listitem') {
+        const { text, formatting } = extractTextAndFormatting(node);
+        // eslint-disable-next-line @typescript-eslint/no-explicit-any
+        const checked = node.getChecked?.() ?? undefined;
+        return {
+            block_id,
+            block_type: 'listitem',
+            source: text,
+            metadata: checked !== undefined ? { checked } : undefined,
+            formatting,
+        };
+    }
+    // Paragraph (default)
+    if (type === 'paragraph') {
+        // Check if paragraph contains only an equation child
+        // Equations get wrapped in paragraphs by the EquationsPlugin
+        // eslint-disable-next-line @typescript-eslint/no-explicit-any
+        const children = 'getChildren' in node ? node.getChildren() : [];
+        if (children.length === 1 && children[0].getType() === 'equation') {
+            // Extract the equation child instead of the paragraph
+            const equationNode = children[0];
+            // eslint-disable-next-line @typescript-eslint/no-explicit-any
+            const eqAny = equationNode;
+            const equation = eqAny.getEquation?.() || eqAny.__equation || '';
+            const inline = eqAny.getInline?.() ?? eqAny.__inline ?? false;
+            return {
+                block_id: equationNode.getKey(), // Use equation's ID, not paragraph's
+                block_type: 'equation',
+                source: equation,
+                metadata: { equation, inline },
+            };
+        }
+        // Regular paragraph
+        const { text, formatting } = extractTextAndFormatting(node);
+        return {
+            block_id,
+            block_type: 'paragraph',
+            source: text,
+            formatting,
+        };
+    }
+    // Jupyter cell (legacy or direct node)
+    if (type === 'jupyter-cell') {
+        const text = node.getTextContent();
+        // eslint-disable-next-line @typescript-eslint/no-explicit-any
+        const nodeAny = node;
+        const language = nodeAny.getLanguage?.() || 'python';
+        const outputs = nodeAny.getOutputs?.() || [];
+        return {
+            block_id,
+            block_type: 'jupyter-cell',
+            source: text,
+            metadata: {
+                language,
+                outputs: outputs.length > 0 ? outputs : undefined,
+            },
+        };
+    }
+    // Jupyter input node (should be merged via editorStateToBlocks)
+    // This is a fallback if accessed directly via getBlock()
+    if (type === 'jupyter-input') {
+        const text = node.getTextContent();
+        // eslint-disable-next-line @typescript-eslint/no-explicit-any
+        const nodeAny = node;
+        const language = nodeAny.getLanguage?.() || 'python';
+        return {
+            block_id,
+            block_type: 'jupyter-cell',
+            source: text,
+            metadata: {
+                language,
+                outputs: undefined,
+            },
+        };
+    }
+    // Jupyter output node (should be skipped via editorStateToBlocks)
+    // Return null as these should never be exposed independently
+    if (type === 'jupyter-output') {
+        return null;
+    }
+    // Image
+    if (type === 'image') {
+        // eslint-disable-next-line @typescript-eslint/no-explicit-any
+        const nodeAny = node;
+        const src = nodeAny.getSrc?.() || nodeAny.__src || '';
+        const alt_text = nodeAny.getAltText?.() || nodeAny.__altText || '';
+        return {
+            block_id,
+            block_type: 'image',
+            source: '',
+            metadata: { src, alt_text },
+        };
+    }
+    // Equation
+    if (type === 'equation') {
+        // eslint-disable-next-line @typescript-eslint/no-explicit-any
+        const nodeAny = node;
+        const equation = nodeAny.getEquation?.() || nodeAny.__equation || '';
+        const inline = nodeAny.getInline?.() ?? nodeAny.__inline ?? false;
+        return {
+            block_id,
+            block_type: 'equation',
+            source: equation,
+            metadata: { equation, inline },
+        };
+    }
+    // Table
+    if (type === 'table') {
+        const text = node.getTextContent();
+        return {
+            block_id,
+            block_type: 'table',
+            source: text,
+        };
+    }
+    // Unknown types - return as generic block to avoid data loss
+    const text = node.getTextContent();
+    return {
+        block_id,
+        block_type: type,
+        source: text,
+    };
+}
+/**
+ * Extract text content and inline formatting from a Lexical node.
+ * Returns both plain text (for source) and formatting array (for rich text).
+ */
+function extractTextAndFormatting(node) {
+    const formatting = [];
+    let hasFormatting = false;
+    // Get text content
+    const text = node.getTextContent();
+    // Try to extract formatted children
+    // eslint-disable-next-line @typescript-eslint/no-explicit-any
+    const children = 'getChildren' in node ? node.getChildren() : [];
+    if (children.length > 0) {
+        for (const child of children) {
+            if (child.getType() === 'text') {
+                const childText = child.getTextContent();
+                const childFormat = child.getFormat?.() || 0;
+                formatting.push({ text: childText, format: childFormat });
+                if (childFormat !== 0) {
+                    hasFormatting = true;
+                }
+            }
+            else {
+                // Nested node - recursively extract
+                const nested = extractTextAndFormatting(child);
+                if (nested.formatting) {
+                    formatting.push(...nested.formatting);
+                    hasFormatting = true;
+                }
+                else {
+                    formatting.push({ text: nested.text, format: 0 });
+                }
+            }
+        }
+    }
+    else {
+        // Leaf node
+        const format = 'getFormat' in node
+            ? node.getFormat?.() || 0
+            : 0;
+        formatting.push({ text, format });
+        if (format !== 0) {
+            hasFormatting = true;
+        }
+    }
+    return {
+        text,
+        formatting: hasFormatting && formatting.length > 0 ? formatting : undefined,
+    };
+}
+/**
+ * Insert a LexicalBlock into the editor at the specified index or after a block ID.
+ * Creates the appropriate Lexical node based on block type.
+ *
+ * @param editor - Lexical editor instance
+ * @param block - Block to insert
+ * @param index - Index where to insert (0-based), or -1 to append
+ * @param afterBlockId - Optional: Insert after this block ID instead of using index
+ */
+export function insertBlock(editor, block, index, afterBlockId) {
+    editor.update(() => {
+        const root = $getRoot();
+        const node = blockToNode(block);
+        if (!node) {
+            throw new Error(`Unsupported block type: ${block.block_type}`);
+        }
+        const children = root.getChildren();
+        // Handle special values for afterBlockId
+        if (afterBlockId === 'TOP') {
+            if (children.length > 0) {
+                children[0].insertBefore(node);
+            }
+            else {
+                root.append(node);
+            }
+            return;
+        }
+        if (afterBlockId === 'BOTTOM' || !afterBlockId) {
+            root.append(node);
+            return;
+        }
+        // Otherwise, find the block by ID and insert after it
+        const targetBlock = children.find(child => child.getKey() === afterBlockId);
+        if (targetBlock) {
+            targetBlock.insertAfter(node);
+        }
+        else {
+            throw new Error(`Block ID ${afterBlockId} not found. Use readBlocks to get valid block IDs, or use 'TOP'/'BOTTOM' for beginning/end.`);
+        }
+    });
+}
+/**
+ * Delete a block from the editor at the specified index.
+ */
+export function deleteBlock(editor, index) {
+    editor.update(() => {
+        const root = $getRoot();
+        const children = root.getChildren();
+        if (index < 0 || index >= children.length) {
+            throw new Error(`Block index out of range: ${index}`);
+        }
+        children[index].remove();
+    });
+}
+/**
+ * Update a block in the editor at the specified index.
+ */
+export function updateBlock(editor, index, block) {
+    editor.update(() => {
+        const root = $getRoot();
+        const children = root.getChildren();
+        if (index < 0 || index >= children.length) {
+            throw new Error(`Block index out of range: ${index}`);
+        }
+        const newNode = blockToNode(block);
+        if (!newNode) {
+            throw new Error(`Unsupported block type: ${block.block_type}`);
+        }
+        // Replace old node with new node
+        const oldNode = children[index];
+        oldNode.replace(newNode);
+    });
+}
+/**
+ * Convert a LexicalBlock to a Lexical node.
+ * Creates the appropriate node type with content.
+ */
+function blockToNode(block) {
+    // Get source as string
+    const textContent = Array.isArray(block.source)
+        ? block.source.join('\n')
+        : block.source;
+    // Helper to create text nodes with formatting
+    const createTextNodes = () => {
+        if (block.formatting && block.formatting.length > 0) {
+            // Create separate text nodes for each formatted segment
+            return block.formatting.map(seg => {
+                const textNode = $createTextNode(seg.text);
+                if (seg.format) {
+                    textNode.setFormat(seg.format);
+                }
+                return textNode;
+            });
+        }
+        else {
+            // Simple text node
+            return [textContent ? $createTextNode(textContent) : $createTextNode('')];
+        }
+    };
+    switch (block.block_type) {
+        case 'paragraph': {
+            const paragraph = $createParagraphNode();
+            createTextNodes().forEach(node => paragraph.append(node));
+            return paragraph;
+        }
+        case 'heading': {
+            const level = block.metadata?.level || 1;
+            const tag = `h${level}`;
+            const heading = $createHeadingNode(tag);
+            createTextNodes().forEach(node => heading.append(node));
+            return heading;
+        }
+        case 'code': {
+            const language = block.metadata?.language || 'plaintext';
+            const code = $createCodeNode(language);
+            code.append($createTextNode(textContent));
+            return code;
+        }
+        case 'quote': {
+            const quote = $createQuoteNode();
+            createTextNodes().forEach(node => quote.append(node));
+            return quote;
+        }
+        case 'list': {
+            const list_type = block.metadata?.list_type || 'bullet';
+            const list = $createListNode(list_type);
+            const listItem = $createListItemNode();
+            createTextNodes().forEach(node => listItem.append(node));
+            list.append(listItem);
+            return list;
+        }
+        case 'listitem': {
+            const listItem = $createListItemNode();
+            if (block.metadata?.checked !== undefined) {
+                listItem.setChecked(block.metadata.checked);
+            }
+            createTextNodes().forEach(node => listItem.append(node));
+            return listItem;
+        }
+        case 'equation': {
+            // Equation blocks are handled via INSERT_EQUATION_COMMAND
+            // The equation property can be in source OR in metadata
+            const equation = block.metadata?.equation ||
+                block.metadata?.latex ||
+                textContent;
+            // Check if we have the necessary data before delegating to command handler
+            if (!equation) {
+                return null;
+            }
+            // Return null to delegate to the adapter's insertViaCommand method
+            // which will dispatch INSERT_EQUATION_COMMAND with equation and inline properties
+            return null;
+        }
+        default:
+            // For unsupported types (jupyter-cell, image), return null
+            // These should be handled via command dispatch instead
+            return null;
+    }
+}
+/**
+ * Get the count of top-level blocks in the editor.
+ */
+export function getBlockCount(editor) {
+    let count = 0;
+    editor.getEditorState().read(() => {
+        const root = $getRoot();
+        count = root.getChildren().length;
+    });
+    return count;
+}
+/**
+ * Get a specific block by index.
+ */
+export function getBlock(editor, index) {
+    let block = null;
+    editor.getEditorState().read(() => {
+        const root = $getRoot();
+        const children = root.getChildren();
+        if (index >= 0 && index < children.length) {
+            block = nodeToBlock(children[index]);
+        }
+    });
+    return block;
+}
+/**
+ * Get registered node types from the editor.
+ * Returns type names and class names of all registered Lexical nodes.
+ */
+export function getRegisteredNodes(editor) {
+    const registeredNodes = [];
+    // Access the editor's internal _nodes Map
+    // eslint-disable-next-line @typescript-eslint/no-explicit-any
+    const editorInternal = editor;
+    if (editorInternal._nodes) {
+        const nodesMap = editorInternal._nodes;
+        for (const [type, { klass }] of nodesMap.entries()) {
+            registeredNodes.push({
+                type,
+                className: klass.name,
+            });
+        }
+    }
+    return registeredNodes;
+}
+//# sourceMappingURL=blocks.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.js.map
new file mode 100644
index 0000000..c033e31
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/blocks.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"blocks.js","sourceRoot":"","sources":["../../../src/tools/utils/blocks.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/index.d.ts b/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/index.d.ts
new file mode 100644
index 0000000..835a15a
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/index.d.ts
@@ -0,0 +1,8 @@
+/**
+ * Lexical Tools Utilities
+ *
+ * Utilities for working with lexical blocks and document operations.
+ *
+ * @module jupyter-ui-lexical/tools/utils
+ */
+export * from './blocks';
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/index.js b/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/index.js
new file mode 100644
index 0000000..e54af15
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/index.js
@@ -0,0 +1,14 @@
+/*
+ * Copyright (c) 2021-2023 Datalayer, Inc.
+ *
+ * MIT License
+ */
+/**
+ * Lexical Tools Utilities
+ *
+ * Utilities for working with lexical blocks and document operations.
+ *
+ * @module jupyter-ui-lexical/tools/utils
+ */
+export * from './blocks';
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/index.js.map b/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/index.js.map
new file mode 100644
index 0000000..ac8388e
--- /dev/null
+++ b/node_modules/@datalayer/jupyter-lexical/lib/tools/utils/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/tools/utils/index.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH;;;;;;GAMG;AAEH,cAAc,UAAU,CAAC"}
\ No newline at end of file
